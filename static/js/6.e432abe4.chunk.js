(this["webpackJsonptnm-app"]=this["webpackJsonptnm-app"]||[]).push([[6],{268:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Ge}));var n,a,o=r(44),i=r(17),c=r(12),s=r(0),l=r.n(s),d=r(40),u=r(111),h=r(214),j=r(279),p=r(266),b=r(253),m=r(226),f=r(203),O=r(244),g=r(229),x=r(213),y=r(160),v=r.n(y),S=r(161),w=r.n(S),k=r(230),N=r(232),C=r(233),T=r(234),P=r(242),I=r(150),D=r.n(I),E=r(235),z=r(236),W=r(237),F=r(238),A=r(239),L=r(240),M=r(241),B=r(243),V=r(10),G=r(46),U=r(3),q=Object(U.jsxs)("div",{children:[Object(U.jsxs)(N.a,{button:!0,component:V.b,to:"/dashboard",children:[Object(U.jsx)(C.a,{children:Object(U.jsx)(D.a,{})}),Object(U.jsx)(T.a,{primary:"Dashboard"})]}),Object(U.jsxs)(N.a,(n={button:!0},Object(i.a)(n,"button",!0),Object(i.a)(n,"component",V.b),Object(i.a)(n,"to","/orders"),Object(i.a)(n,"children",[Object(U.jsx)(C.a,{children:Object(U.jsx)(E.a,{})}),Object(U.jsx)(T.a,{primary:"Orders"})]),n)),Object(U.jsxs)(N.a,(a={button:!0},Object(i.a)(a,"button",!0),Object(i.a)(a,"component",V.b),Object(i.a)(a,"to","/printing"),Object(i.a)(a,"children",[Object(U.jsx)(C.a,{children:Object(U.jsx)(z.a,{})}),Object(U.jsx)(T.a,{primary:"Printing"})]),a)),Object(U.jsxs)(N.a,{button:!0,component:V.b,to:"/stores",children:[Object(U.jsx)(C.a,{children:Object(U.jsx)(W.a,{})}),Object(U.jsx)(T.a,{primary:"Stores"})]}),Object(U.jsxs)(N.a,{button:!0,component:V.b,to:"/inventory",children:[Object(U.jsx)(C.a,{children:Object(U.jsx)(F.a,{})}),Object(U.jsx)(T.a,{primary:"Inventory"})]}),Object(U.jsxs)(N.a,{button:!0,component:V.b,to:"/purchases",children:[Object(U.jsx)(C.a,{children:Object(U.jsx)(A.a,{})}),Object(U.jsx)(T.a,{primary:"Purchases"})]}),Object(U.jsxs)(N.a,{button:!0,component:V.b,to:"/products",children:[Object(U.jsx)(C.a,{children:Object(U.jsx)(L.a,{})}),Object(U.jsx)(T.a,{primary:"Products"})]}),Object(U.jsxs)(N.a,{button:!0,children:[Object(U.jsx)(C.a,{children:Object(U.jsx)(M.a,{})}),Object(U.jsx)(T.a,{primary:"Invoice"})]})]}),Y=Object(U.jsxs)("div",{children:[Object(U.jsx)(P.a,{inset:!0,children:"Advanced"}),Object(U.jsxs)(N.a,{button:!0,component:"a",href:G.a+"/admin",children:[Object(U.jsx)(C.a,{children:Object(U.jsx)(B.a,{})}),Object(U.jsx)(T.a,{primary:"Django Admin"})]})]}),R=r(1),H=(r(21),r(61)),J=r(212),K=r(216),_=r(215),X=Object(u.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Z(e){var t=X(),r=Object(J.a)(["mr-token"]),n=Object(o.a)(r,1)[0],a=Object(s.useState)({}),i=Object(o.a)(a,2),c=i[0],l=i[1],d=Object(s.useState)(!1),u=Object(o.a)(d,3),h=u[0],j=u[1],p=(u[2],!1);console.log("opened form");var b=function(t){e.setMode("none")};return h?Object(U.jsxs)("div",{children:["Saved Succcesfully ",Object(U.jsx)(k.a,{onClick:b,children:"Go back to Products"})]}):Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{display:"flex"},children:[Object(U.jsx)(f.a,{children:"update"==e.mode?"Update":"Add"}),Object(U.jsx)(k.a,{onClick:b,children:"Go back"})]}),Object(U.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var r=new FormData(t.target),a={};r.forEach((function(e,t){return a[t]=e})),console.log("sending data"),console.log(a),"update"==e.mode?G.b.updateProduct(n["mr-token"],e.id,a).then((function(e){return 400==e.status&&(console.log(e),j(!1),p=!0),200==e.status&&j(!0),e.json()})).then((function(e){p&&l(e)})).catch((function(e){console.log("api error"),console.error(e)})):G.b.addProduct(n["mr-token"],a).then((function(e){return console.log("saving",e.status),400==e.status&&(console.log(e),j(!1),p=!0),201==e.status&&j(!0),e.json()})).then((function(e){p&&l(e)})).catch((function(e){console.log("api error"),console.error(e)}))},children:[0!=Object.keys(c).length&&Object(U.jsxs)(_.a,{error:!0,children:["Invalid data ",c.form]}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"style",label:"Style",name:"style",disabled:"update"==e.mode,helperText:c.style?c.style[0]:"",error:!!c.style,defaultValue:"update"==e.mode?e.data.style:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"size",label:"Size",name:"size",disabled:"update"==e.mode,helperText:c.size?c.size[0]:"",error:!!c.size,defaultValue:"update"==e.mode?e.data.size:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"color",label:"Color",name:"color",disabled:"update"==e.mode,helperText:c.color?c.color[0]:"",error:!!c.color,defaultValue:"update"==e.mode?e.data.color:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",disabled:"update"==e.mode,helperText:c.sku?c.sku[0]:"",error:!!c.sku,defaultValue:"update"==e.mode?e.data.sku:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"cost",label:"Cost",name:"cost",type:"number",inputProps:{step:.01},helperText:c.cost?c.cost[0]:"",error:!!c.cost,defaultValue:"update"==e.mode?e.data.cost:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"price",label:"Price",name:"price",type:"number",inputProps:{step:.01},helperText:c.price?c.price[0]:"",error:!!c.price,defaultValue:"update"==e.mode?e.data.price:""}),Object(U.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]})}var $=[{field:"sfmId",headerName:"SFM ID",width:150},{field:"style",headerName:"Style",width:150,editable:!0},{field:"size",headerName:"Size",width:150,editable:!0},{field:"color",headerName:"Color",width:150,editable:!0},{field:"sku",headerName:"SKU",width:150},{field:"cost",headerName:"Cost",width:150,editable:!0},{field:"price",headerName:"Price",width:150,editable:!0},{field:"amountInStock",headerName:"Amount In Stock",width:150,editable:!0}];var Q=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(J.a)(["mr-token"]),i=Object(o.a)(a,1)[0],c=Object(s.useState)("none"),l=Object(o.a)(c,2),d=l[0],u=l[1],h=Object(s.useState)([]),j=Object(o.a)(h,2),p=j[0],b=j[1],m=Object(s.useState)({}),f=Object(o.a)(m,2),g=f[0],x=f[1],y=Object(s.useState)(),v=Object(o.a)(y,2),S=v[0],w=v[1],N=Object(s.useState)(!1),C=Object(o.a)(N,2),T=C[0],P=C[1],I=Object(s.useState)(""),D=Object(o.a)(I,2),E=D[0],z=D[1];function W(){G.b.getProductList(i["mr-token"]).then((function(e){console.log(e),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}return Object(s.useEffect)((function(){"none"==d&&W()}),[i,d]),Object(s.useEffect)((function(){console.log(i)}),[i]),i["mr-token"]?Object(U.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(U.jsx)("h3",{children:"Products"}),""==E?"":Object(U.jsx)("div",{style:{color:"red"},children:E}),Object(U.jsx)(O.a,{style:{width:"100%",marginBottom:"15px"}}),"none"==d?Object(U.jsxs)("div",{children:[Object(U.jsx)(k.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){u("add")},children:"Add"}),Object(U.jsx)(k.a,{style:{width:"60px",marginBottom:"10px"},disabled:1!=p.length,onClick:function(e){if(console.log("update clicked"),1==p.length){var t=p[0];b([]),G.b.getProduct(i["mr-token"],t).then((function(e){return e.json()})).then((function(e){console.log("filling formdata"),x(e),u("update")})).catch((function(e){console.log("api error"),console.error(e)}))}},color:"primary",variant:"contained",children:"Update"}),Object(U.jsxs)("form",{children:[Object(U.jsx)(K.a,{type:"file",name:"myfile",onChange:function(e){w(e.target.files[0]),console.log("file is: ",e.target.files[0]),P(!0)}}),Object(U.jsx)(k.a,{type:"submit",disabled:!T,onClick:function(e){e.preventDefault();var t=new FormData;t.append("productsFile",S),T&&-1==S.name.search(/product/i)?z("Please make sure you have selected products file. File name should contain the word product"):G.b.uploadProductsFile(i["mr-token"],t).then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(z("Successfully imported all records"),console.log("Successfully imported all records")):(z("Partial Success (see error records in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):z("Failed import due to unknown reason"),console.log("setting mode"),P(!1),W(),u("none")})).catch((function(e){console.error("Error:",e),z("Failed import due to unknown reasons")}))},color:"primary",variant:"contained",children:"Import Products"})]}),Object(U.jsx)("div",{style:{width:"100%",minWidth:"600px"},children:Object(U.jsx)(H.a,{rows:r,columns:$,checkboxSelection:!0,autoHeight:!0,components:{Toolbar:H.b},onSelectionModelChange:function(e){console.log(e),b(e.selectionModel)}})})]}):Object(U.jsx)(Z,{id:"update"==d?p:null,data:"update"==d?g:null,mode:d,setMode:u})]}):Object(U.jsx)(R.a,{to:"/signin"})},ee=[{field:"storeName",headerName:"Store Name",width:150},{field:"storeCode",headerName:"Store Code",width:150},{field:"emailAddress",headerName:"Email Address",width:150},{field:"addressLine1",headerName:"Addres Line 1",width:150},{field:"addressLine2",headerName:"Adress Line 2",width:150},{field:"city",headerName:"City",width:150},{field:"state",headerName:"State",width:150},{field:"zipCode",headerName:"Zip Code",width:150}];var te=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(J.a)(["mr-token"]),i=Object(o.a)(a,1)[0];return Object(s.useEffect)((function(){G.b.getStoreList(i["mr-token"]).then((function(e){return console.log(e),e.forEach((function(e,t){return e.id=t+1})),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]),Object(s.useEffect)((function(){console.log(i)}),[i]),i["mr-token"]?Object(U.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(U.jsx)("h3",{children:"Stores"}),Object(U.jsx)(O.a,{style:{width:"100%",marginBottom:"15px"}}),Object(U.jsx)("div",{style:{width:"100%",minWidth:"600px"},children:Object(U.jsx)(H.a,{rows:r,columns:ee,autoHeight:!0,components:{Toolbar:H.b}})})]}):Object(U.jsx)(R.a,{to:"/signin"})},re=r(52),ne=r(256),ae=r(259),oe=r(260),ie=r(248),ce=r(272),se=Object(u.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function le(e){var t=se(),r=Object(J.a)(["mr-token"]),n=Object(o.a)(r,1)[0],a=Object(s.useState)({}),i=Object(o.a)(a,2),l=i[0],d=i[1],u=Object(s.useState)(!1),h=Object(o.a)(u,2),j=h[0],p=h[1],b=Object(s.useState)(!1),m=Object(o.a)(b,2),O=m[0],g=m[1],x=Object(s.useState)([]),y=Object(o.a)(x,2),v=y[0],S=y[1],w=Object(s.useState)([]),N=Object(o.a)(w,2),C=N[0],T=N[1],P=Object(s.useState)([]),I=Object(o.a)(P,2),D=I[0],E=I[1],z=Object(s.useState)([]),W=Object(o.a)(z,2),F=W[0],A=W[1],L=Object(s.useState)([]),M=Object(o.a)(L,2),B=M[0],V=M[1],q=!1;console.log("opened form"),console.log(C),console.log(B),Object(s.useEffect)((function(){G.b.getProductList(n["mr-token"]).then((function(e){var t=e.map((function(e){return e.style}));T(Object(re.a)(new Set(t)));var r=e.map((function(e){return e.size}));E(Object(re.a)(new Set(r)));var n=e.map((function(e){return e.color}));A(Object(re.a)(new Set(n))),V(e.map((function(e){return e.sfmId})))})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);var Y=function(e){g(!1)},R=function(t){console.log(t),"update"==e.mode?G.b.updatePurchase(n["mr-token"],e.id,t).then((function(e){return 400==e.status&&(console.log(e),p(!1),q=!0),200==e.status&&p(!0),e.json()})).then((function(e){q&&d(e)})).catch((function(e){console.log("api error"),console.error(e)})):G.b.addPurchase(n["mr-token"],t).then((function(e){return console.log("saving",e.status),400==e.status&&(console.log(e),p(!1),q=!0),201==e.status&&p(!0),e.json()})).then((function(e){q&&d(e)})).catch((function(e){console.log("api error"),console.error(e)}))},H=function(t){e.setMode("none")};return j?Object(U.jsxs)("div",{children:["Saved Succcesfully ",Object(U.jsx)(k.a,{onClick:H,children:"Go back to Purchases"})]}):Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{display:"flex"},children:[Object(U.jsx)(f.a,{children:"update"==e.mode?"Update":"Add"}),Object(U.jsx)(k.a,{onClick:H,children:"Go back"})]}),Object(U.jsxs)(ne.a,{open:O,onClose:Y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(U.jsx)(ae.a,{id:"alert-dialog-title",children:'"The Product does not Exist. New Product will be created. Continue?"'}),Object(U.jsxs)(oe.a,{children:[Object(U.jsx)(k.a,{onClick:Y,color:"primary",children:"Cancel"}),Object(U.jsx)(k.a,{onClick:function(e){R(v)},color:"primary",autoFocus:!0,children:"Confirm"})]})]}),Object(U.jsxs)("form",{className:t.form,onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),r={};console.log(t),t.forEach((function(e,t){return r[t]=e})),console.log("sending data");var n=r.style+"-"+r.size+"-"+r.color;S(r),B.find((function(e){return e==n}))?R(r):g(!0)},children:[0!=Object.keys(l).length&&Object(U.jsx)(_.a,{error:!0,children:"Invalid data"}),Object(U.jsxs)(K.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"status",label:"Status",name:"status",helperText:l.status?l.status[0]:"",error:!!l.status,defaultValue:"update"==e.mode?e.data.status:"",children:[Object(U.jsx)(ie.a,{value:"In Transit",children:"In Transit"},0),Object(U.jsx)(ie.a,{value:"Received",children:"Received"},1)]}),Object(U.jsx)(ce.a,{id:"styleCombo",options:C,freeSolo:!0,getOptionLabel:function(e){return e},fullWidth:!0,renderInput:function(t){return Object(U.jsx)(K.a,Object(c.a)(Object(c.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,id:"style",label:"Style",name:"style",disabled:"update"==e.mode,helperText:l.style?l.style[0]:"",error:!!l.style,defaultValue:"update"==e.mode?e.data.style:""}))}}),Object(U.jsx)(ce.a,{id:"sizeCombo",options:D,freeSolo:!0,getOptionLabel:function(e){return e},renderInput:function(t){return Object(U.jsx)(K.a,Object(c.a)(Object(c.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"size",label:"Size",name:"size",disabled:"update"==e.mode,helperText:l.size?l.size[0]:"",error:!!l.size,defaultValue:"update"==e.mode?e.data.size:""}))}}),Object(U.jsx)(ce.a,{id:"colorCombo",options:F,freeSolo:!0,getOptionLabel:function(e){return e},renderInput:function(t){return Object(U.jsx)(K.a,Object(c.a)(Object(c.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,id:"color",label:"Color",name:"color",disabled:"update"==e.mode,helperText:l.color?l.color[0]:"",error:!!l.color,defaultValue:"update"==e.mode?e.data.color:""}))}}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"company",label:"Company",name:"company",helperText:l.company?l.company[0]:"",error:!!l.company,defaultValue:"update"==e.mode?e.data.company:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"warehouse",label:"Warehouse",name:"warehouse",helperText:l.warehouse?l.warehouse[0]:"",error:!!l.warehouse,defaultValue:"update"==e.mode?e.data.warehouse:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"ordered",label:"Ordered",name:"ordered",type:"number",helperText:l.ordered?l.ordered[0]:"",error:!!l.ordered,defaultValue:"update"==e.mode?e.data.ordered:""}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderDate",label:"order Date",name:"orderDate",type:"date",helperText:l.orderDate?l.orderDate[0]:"",error:!!l.orderDate,InputLabelProps:{shrink:!0},defaultValue:"update"==e.mode?e.data.orderDate:""}),Object(U.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]})}var de=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(J.a)(["mr-token"]),i=Object(o.a)(a,1)[0],l=Object(s.useState)("none"),d=Object(o.a)(l,2),u=d[0],h=d[1],j=Object(s.useState)([]),p=Object(o.a)(j,2),b=p[0],m=p[1],f=Object(s.useState)({}),g=Object(o.a)(f,2),x=g[0],y=g[1],v=Object(s.useState)(),S=Object(o.a)(v,2),w=S[0],N=S[1],C=Object(s.useState)(!1),T=Object(o.a)(C,2),P=T[0],I=T[1],D=Object(s.useState)(""),E=Object(o.a)(D,2),z=E[0],W=E[1],F=[{field:"id",headerName:"Purchase Id",width:150,hide:!0},{field:"status",headerName:"Status",width:150,renderCell:function(e){return Object(U.jsx)(k.a,{variant:"contained",color:"In Transit"==e.value?"secondary":"primary",size:"small","data-pid":e.id,onClick:A,style:{marginLeft:16},children:e.value})}},{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"company",headerName:"Company"},{field:"warehouse",headerName:"Warehouse",width:150},{field:"ordered",headerName:"Ordered",width:150},{field:"orderDate",headerName:"Order Date",width:150},{field:"arrivalDate",headerName:"Arrival Date",width:150},{field:"sfmId",headerName:"SFM ID",width:150}],A=function(e){var t=parseInt(e.currentTarget.dataset.pid),a=r.find((function(e){return e.id==t})),o="In Transit"==a.status?"Received":"In Transit",s=Object(c.a)(Object(c.a)({},a),{},{status:o});console.log(s),G.b.updatePurchase(i["mr-token"],t,s).then((function(e){if(200==e.status)return e.json();throw 400==e.status?JSON.stringify(e.json()):"Something went wrong. Please Refresh"})).then((function(e){var t=r.map((function(t){return t.id==e.id?e:t}));W("updated purchase"),console.log(t.map((function(e){return e.id}))),n(t)})).catch((function(e){console.log("api error"),console.error(e),W("Something went wrong, "+String(e))}))};function L(){console.log("fetching data"),G.b.getPurchasesList(i["mr-token"]).then((function(e){console.log(e),m([]),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}return Object(s.useEffect)((function(){console.log("useeffect called"),"none"==u&&L()}),[i,u]),Object(s.useEffect)((function(){console.log(i)}),[u]),i["mr-token"]?Object(U.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(U.jsx)("h3",{children:"Purchases"}),""==z?"":Object(U.jsx)("div",{children:z}),Object(U.jsx)(O.a,{style:{width:"100%",marginBottom:"10px"}}),"none"==u?Object(U.jsxs)("div",{children:[Object(U.jsx)(k.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){h("add")},children:"Add"}),Object(U.jsx)(k.a,{style:{width:"60px",marginBottom:"10px"},disabled:1!=b.length,onClick:function(e){console.log("update clicked"),1==b.length&&G.b.getPurchase(i["mr-token"],b[0]).then((function(e){return e.json()})).then((function(e){console.log("filling formdata"),y(e),h("update")})).catch((function(e){console.log("api error"),console.error(e)}))},color:"primary",variant:"contained",children:"Update"}),Object(U.jsxs)("form",{children:[Object(U.jsx)(K.a,{type:"file",name:"myfile",onChange:function(e){N(e.target.files[0]),console.log("file is: ",e.target.files[0]),I(!0)}}),Object(U.jsx)(k.a,{type:"submit",disabled:!P,onClick:function(e){e.preventDefault();var t=new FormData;t.append("purchaseFile",w),P&&-1==w.name.search(/purchase/i)?W("Please make sure you have selected purchase file. File name should contain the word purchase"):G.b.uploadPurchasesFile(i["mr-token"],t).then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(W("Successfully imported all records"),console.log("Successfully imported all records")):(W("Partial Success (see error records in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):W("Failed import due to unknown reason"),console.log("setting mode"),L(),h("none"),I(!1)})).catch((function(e){console.error("Error:",e),W("Failed import due to unknown reasons")}))},color:"primary",variant:"contained",children:"Import"})]}),Object(U.jsx)("div",{style:{width:"100%",minWidth:"600px",flexGrow:1},children:Object(U.jsx)(H.a,{rows:r,columns:F,checkboxSelection:!0,autoHeight:!0,components:{Toolbar:H.b},onSelectionModelChange:function(e){console.log(e),m(e.selectionModel)},disableSelectionOnClick:!0})})]}):Object(U.jsx)(le,{id:"update"==u?b:null,data:"update"==u?x:null,mode:u,setMode:h})]}):Object(U.jsx)(R.a,{to:"/signin"})},ue=[{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"productAvailability",headerName:"Product Availabity",width:150},{field:"inStock",headerName:"In Stock",width:150},{field:"unfulfilledCount",headerName:"Unfulfilled Count",width:150},{field:"inTransit",headerName:"In Transit",width:150},{field:"arrivalDate",headerName:"ArrivaL Date",width:150},{field:"trueCount",headerName:"True Count",width:150},{field:"minimum",headerName:"Minimum",width:150},{field:"maximum",headerName:"Maximum",width:150},{field:"shortCount",headerName:"Short Count",width:150},{field:"needToPurchase",headerName:"Need to Purchase",width:150}];var he=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(J.a)(["mr-token"]),i=Object(o.a)(a,1)[0];return Object(s.useEffect)((function(){console.log(Object(c.a)({},r[0])),G.b.getInventoryList(i["mr-token"]).then((function(e){return console.log(e),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]),Object(s.useEffect)((function(){console.log(i)}),[i]),i["mr-token"]?Object(U.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(U.jsx)("h3",{children:"Inventory"}),Object(U.jsx)(O.a,{style:{width:"100%",marginBottom:"15px"}}),Object(U.jsx)("div",{style:{width:"100%",minWidth:"600px"},children:Object(U.jsx)(H.a,{rows:r,columns:ue,autoHeight:!0,components:{Toolbar:H.b}})})]}):Object(U.jsx)(R.a,{to:"/signin"})},je=r(156),pe=r.n(je),be=r(158),me=r(159),fe=r(219),Oe=r(220),ge=r(217),xe=r(227),ye=Object(u.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ve(e){var t=ye(),r=Object(J.a)(["mr-token"]),n=Object(o.a)(r,1)[0],a=Object(s.useState)({}),i=Object(o.a)(a,2),c=i[0],l=i[1],d=Object(s.useState)(!1),u=Object(o.a)(d,3),h=u[0],j=u[1],p=(u[2],Object(s.useState)([])),b=Object(o.a)(p,2),m=b[0],O=b[1],g=Object(s.useState)([]),x=Object(o.a)(g,2),y=x[0],v=x[1],S=!1;console.log("opened form"),Object(s.useEffect)((function(){G.b.getProductList(n["mr-token"]).then((function(e){return console.log(e),O(e)})).catch((function(e){console.log("api error"),console.error(e)})),G.b.getStoreList(n["mr-token"]).then((function(e){return console.log(e),v(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);var w=function(t){e.setMode("none")};return h?Object(U.jsxs)("div",{children:["Saved Succcesfully ",Object(U.jsx)(k.a,{onClick:w,children:"Go back to Orders"})]}):Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{display:"flex"},children:[Object(U.jsx)(f.a,{children:"update"==e.mode?"Update":"Add"}),Object(U.jsx)(k.a,{onClick:w,children:"Go back"})]}),Object(U.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var r=new FormData(t.target),a={};r.forEach((function(e,t){return a[t]=e}));var o=a.sfmId.split("-")[0];a.style="".concat.apply("",Object(re.a)(o.slice(0,o.length-2))),a.size=o[o.length-2],a.color=o[o.length-1],""==a.saleDate&&(a.saleDate=null),""==a.shipDate&&(a.shipDate=null),console.log("sending data"),console.log(a),"update"==e.mode?G.b.updateOrder(n["mr-token"],e.id,a).then((function(e){return 400==e.status&&(console.log(e),j(!1),S=!0),200==e.status&&j(!0),e.json()})).then((function(e){S&&l(e)})).catch((function(e){console.log("api error"),console.error(e)})):G.b.addOrder(n["mr-token"],a).then((function(e){return console.log("saving",e.status),400==e.status&&(console.log(e),j(!1),S=!0),201==e.status&&j(!0),e.json()})).then((function(e){S&&l(e)})).catch((function(e){console.log("api error"),console.error(e)}))},children:[0!=Object.keys(c).length&&Object(U.jsxs)(_.a,{error:!0,children:["Invalid data ",c.form]}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"store",label:"Store Name",name:"store",helperText:c.store?c.store[0]:"",error:!!c.store,children:y.map((function(e){return Object(U.jsx)(ie.a,{value:e.storeCode,children:e.storeName},e.storeCode)}))}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"orderStatus",label:"Order Status",name:"orderStatus",helperText:c.orderStatus?c.orderStatus[0]:"",error:!!c.orderStatus}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"saleDate",label:"Sale Date",name:"saleDate",type:"date",helperText:c.saleDate?c.saleDate[0]:"",error:!!c.saleDate,InputLabelProps:{shrink:!0}}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderNo",label:"Order No",name:"orderNo",inputProps:{maxLength:20},helperText:c.orderNo?c.orderNo[0]:"",error:!!c.orderNo}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"recipientName",label:"Recipient Name",name:"recipientName",inputProps:{maxLength:50},helperText:c.recipientName?c.recipientName[0]:"",error:!!c.recipientName,defaultValue:"update"==e.mode?e.data.recipientName:""}),Object(U.jsxs)(fe.a,{children:[Object(U.jsx)(Oe.a,{htmlFor:"my-input",children:"Email address"}),Object(U.jsx)(ge.a,{type:"text",id:"my-input","aria-describedby":"my-helper-text",list:"browsers",children:Object(U.jsxs)("datalist",{id:"browsers",children:[Object(U.jsx)("option",{value:"Edge"}),Object(U.jsx)("option",{value:"Firefox"}),Object(U.jsx)("option",{value:"Chrome"}),Object(U.jsx)("option",{value:"Opera"}),Object(U.jsx)("option",{value:"Safari"})]})}),Object(U.jsx)(xe.a,{id:"my-helper-text",children:"We'll never share your email."})]}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,required:!0,id:"sfmId",label:"Style - Size - Color",name:"sfmId",helperText:c.sfmId?c.sfmId[0]:"",error:!!c.sfmId,children:m.map((function(e){return Object(U.jsx)(ie.a,{value:e.sfmId,children:e.sfmId},e.sfmId)}))}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"design",label:"design",name:"design",helperText:c.design?c.design[0]:"",error:!!c.design}),Object(U.jsxs)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"processing",label:"Processing",name:"processing",inputProps:{maxLength:1},helperText:c.processing?c.processing[0]:"",error:!!c.processing,defaultValue:"N",children:[Object(U.jsx)(ie.a,{value:"N",children:"No"},0),Object(U.jsx)(ie.a,{value:"Y",children:"Yes"},1)]}),Object(U.jsxs)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"printed",label:"Printed",name:"printed",inputProps:{maxLength:1},helperText:c.printed?c.printed[0]:"",error:!!c.printed,defaultValue:"N",children:[Object(U.jsx)(ie.a,{value:"N",children:"No"},0),Object(U.jsx)(ie.a,{value:"Y",children:"Yes"},1)]}),Object(U.jsxs)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"shipped",label:"Shipped",name:"shipped",inputProps:{maxLength:1},helperText:c.shipped?c.shipped[0]:"",error:!!c.shipped,defaultValue:"N",children:[Object(U.jsx)(ie.a,{value:"N",children:"No"},0),Object(U.jsx)(ie.a,{value:"Y",children:"Yes"},1)]}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sfmNotes",label:"SFM Notes",name:"sfmNotes",helperText:c.sfmNotes?c.sfmNotes[0]:"",error:!!c.sfmNotes}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"Buyer Name",label:"buyerName",name:"buyerName",helperText:c.buyerName?c.buyerName[0]:"",error:!!c.buyerName}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"email",id:"buyerEmail",label:"Buyer Email",name:"buyerEmail",helperText:c.buyerEmail?c.buyerEmail[0]:"",error:!!c.buyerEmail}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"buyerComments",label:"Buyer Comments",name:"buyerComments",helperText:c.buyerComments?c.buyerComments[0]:"",error:!!c.buyerComments}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"giftMessages",label:"Gift Messages",name:"giftMessages",helperText:c.giftMessages?c.giftMessages[0]:"",error:!!c.giftMessages}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",inputProps:{maxLength:20},helperText:c.sku?c.sku[0]:"",error:!!c.sku}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"shipDate",label:"shipDate",name:"shipDate",type:"datetime-local",InputLabelProps:{shrink:!0},helperText:c.shipDate?c.shipDate[0]:"",error:!!c.shipDate}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"priorityShip",label:"priorityShip",name:"priorityShip",helperText:c.priorityShip?c.priorityShip[0]:"",error:!!c.priorityShip}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"customerPaidShipping",label:"Customer Paid Shipping $",name:"customerPaidShipping",type:"number",inputProps:{step:.01},helperText:c.customerPaidShipping?c.customerPaidShipping[0]:"",error:!!c.customerPaidShipping}),Object(U.jsx)(K.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"trackingNumber",label:"Tracking Number",name:"trackingNumber",helperText:c.trackingNumber?c.trackingNumber[0]:"",error:!!c.trackingNumber}),Object(U.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]})}var Se=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),we=[{field:"orderId",headerName:"Order Id",width:150},{field:"storeName",headerName:"Store Name",width:150},{field:"orderStatus",headerName:"Order Status",width:150},{field:"saleDate",headerName:"Sale Date",type:"date",editable:!0,width:150},{field:"orderNo",headerName:"Order No",width:150},{field:"orderCount",headerName:"Order Count",width:150},{field:"recipientName",headerName:"Recipent Name",width:150,editable:!0},{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"design",headerName:"Design",width:150},{field:"processing",headerName:"Processing",width:150},{field:"printed",headerName:"Printed",width:150},{field:"shipped",headerName:"Shipped",width:150},{field:"sfmNotes",headerName:"SFM Notes",width:150},{field:"buyerName",headerName:"Buyer Name",width:150},{field:"buyerEmail",headerName:"Buyer Email",width:150},{field:"buyerComments",headerName:"Buyer Comments",width:150},{field:"giftMessages",headerName:"Gift Messages",width:150},{field:"sfmId",headerName:"SFM ID",width:150},{field:"sku",headerName:"SKU",width:150},{field:"shipDate",headerName:"Ship Date",type:"datetime",editable:!0,width:150},{field:"priorityShip",headerName:"Priority Ship",width:150},{field:"customerPaidShipping",headerName:"Customer Paid Shipping",width:150,type:"number",editable:!0,valueFormatter:function(e){var t=e.value;return Se.format(Number(t))}},{field:"trackingNumber",headerName:"Tracking Number",width:150,editable:!0},{field:"productAvailability",headerName:"Product Availability",width:150}];var ke=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(J.a)(["mr-token"]),i=Object(o.a)(a,1)[0],d=Object(s.useState)("none"),u=Object(o.a)(d,2),h=u[0],j=u[1],p=Object(s.useState)(!1),b=Object(o.a)(p,2),m=b[0],f=b[1],g=Object(s.useState)([]),x=Object(o.a)(g,2),y=x[0],v=x[1],S=Object(s.useState)([]),w=Object(o.a)(S,2),N=w[0],C=w[1],T=Object(s.useState)(),P=Object(o.a)(T,2),I=P[0],D=P[1],E=Object(s.useState)(!1),z=Object(o.a)(E,2),W=z[0],F=z[1],A=Object(s.useState)(),L=Object(o.a)(A,2),M=L[0],B=L[1],V=Object(s.useState)(!1),q=Object(o.a)(V,2),Y=q[0],_=q[1],X=Object(s.useState)(""),Z=Object(o.a)(X,2),$=Z[0],Q=Z[1],ee=l.a.useCallback((function(e){var t=e.id,r=e.field,n=e.props;console.log("cell commit",N,n);var a=n,o=N.map((function(e){var n={};return n[r]=a.value,e.orderId===t?Object(c.a)(Object(c.a)({},e),n):e}));C(o),console.log("cell commit after ",o)}),[N]),te=function(e){e.preventDefault();var t=new FormData;if(W&&-1==I.name.search(/order/i))Q("Please make sure you have selected orders file. File name should contain the word order");else if(Y&&-1==M.name.search(/ship/i))Q("Please make sure you have selected shipping file. File name should contain the word ship");else{var r;if(W)t.append("ordersFile",I),r=G.b.uploadOrdersFile(i["mr-token"],t);else{if(!Y)return void Q("Please select a file");t.append("shippingFile",M),r=G.b.uploadShippingFile(i["mr-token"],t)}r.then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(Q("Successfully imported all records"),console.log("Successfully imported all records")):(Q("Partial Success (see error records in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):Q("Failed import due to unknown reason"),F("fasle"),ce(),j("none")})).catch((function(e){console.error("Error:",e),Q("Failed import due to unknown reasons")}))}},ie=function(e){f(!1)};function ce(){G.b.getOrderList(i["mr-token"]).then((function(e){return console.log(e),e.forEach((function(e,t){return e.id=e.orderId})),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}return Object(s.useEffect)((function(){"none"==h&&ce()}),[h,i]),Object(s.useEffect)((function(){console.log(i)}),[i]),i["mr-token"]?Object(U.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(U.jsx)("h3",{children:"Orders"}),""==$?"":Object(U.jsx)("div",{style:{color:"red"},children:$}),Object(U.jsx)(O.a,{style:{width:"100%",marginBottom:"15px"}}),"none"==h?Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",flexDirection:"row"},children:[Object(U.jsx)(k.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){j("add")},children:"Add"}),Object(U.jsxs)("div",{children:[Object(U.jsx)(k.a,{variant:"outlined",color:"primary",disabled:!(y.length>0),onClick:function(e){f(!0)},children:"Delete Selected"}),Object(U.jsxs)(ne.a,{open:m,onClose:ie,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(U.jsxs)(ae.a,{id:"alert-dialog-title",children:['"Are you sure you want to delete the ',y.length,' items"']}),Object(U.jsxs)(oe.a,{children:[Object(U.jsx)(k.a,{onClick:ie,color:"primary",children:"Cancel"}),Object(U.jsx)(k.a,{onClick:function(e){console.log("u confirmed delete"),y.forEach((function(e){G.b.deleteOrder(i["mr-token"],e).then((function(t){200==t.status||204==t.status?console.log("deleted order with id ".concat(e)):console.log("Failed to delete order with id ".concat(e))})).catch((function(t){return console.error("could not delete order id ".concat(e),t)}))})),f(!1)},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]}),Object(U.jsx)(k.a,{variant:"outlined",color:"primary",disabled:!(N.length>0),onClick:function(e){function t(){return(t=Object(me.a)(pe.a.mark((function e(){var t,r,n,a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Object(be.a)(N),e.prev=2,a=pe.a.mark((function e(){var r,a,o,c,s;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,e.prev=1,a=function(){var e=Object(me.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.b.updateOrder(i["mr-token"],r.orderId,r));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=5,a();case 5:if(200!=(o=e.sent).status){e.next=10;break}console.log("updated order with id ".concat(r.orderId)),e.next=20;break;case 10:if(400!=o.status){e.next=19;break}return console.log("Invalid Update for order with id ".concat(r.orderId)),e.next=14,o.json();case 14:c=e.sent,s=r.orderId,t.push({orderId:s,result:c}),e.next=20;break;case 19:throw"server error";case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(1),console.log("Something went wrong for order id ".concat(r.orderId)),console.error(e.t0),t.push("Something went wrong for order id ".concat(r.orderId));case 27:case"end":return e.stop()}}),e,null,[[1,22]])})),r.s();case 5:if((n=r.n()).done){e.next=9;break}return e.delegateYield(a(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:t.length>0?Q("Some rows were not updated\n"+JSON.stringify(t)):Q("Updated successfully");case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}console.log("updating the orders",N),function(){t.apply(this,arguments)}()},children:"Update Selected"}),Object(U.jsxs)("form",{children:[Object(U.jsx)(K.a,{type:"file",name:"myfile",onChange:function(e){D(e.target.files[0]),console.log("file is: ",e.target.files[0]),F(!0)}}),Object(U.jsx)(k.a,{type:"submit",disabled:!W,onClick:te,color:"primary",variant:"contained",children:"Import Order Details"})]}),Object(U.jsxs)("form",{children:[Object(U.jsx)(K.a,{type:"file",name:"myShippingfile",onChange:function(e){B(e.target.files[0]),console.log("file is: ",e.target.files[0]),_(!0)}}),Object(U.jsx)(k.a,{type:"submit",disabled:!Y,onClick:te,color:"primary",variant:"contained",children:"Import Shipping Details"})]})]}),Object(U.jsx)("div",{style:{width:"100%",height:"500px",minWidth:"600px"},children:Object(U.jsx)(H.a,{rows:r,columns:we,checkboxSelection:!0,components:{Toolbar:H.b},disableSelectionOnClick:!0,onSelectionModelChange:function(e){console.log(e),v(e.selectionModel)},onRowSelected:function(e){console.log(e);var t=Object(re.a)(e.api.current.getSelectedRows().values());console.log("selected rows ere : ",t),C(t)},onEditCellChangeCommitted:ee})})]}):Object(U.jsx)(ve,{mode:h,setMode:j})]}):Object(U.jsx)(R.a,{to:"/signin"})},Ne=r(224),Ce=r(247),Te=Object(u.a)((function(){return{root:{alignItems:"center",lineHeight:"24px",width:"100%",height:"100%",position:"relative",display:"flex","& .cellValue":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}}}));function Pe(e){var t=e.width,r=e.value,n=Object(s.useRef)(null),a=Object(s.useRef)(null),i=Object(s.useRef)(null),c=Object(s.useState)(null),l=Object(o.a)(c,2),d=l[0],u=l[1],h=Te(),j=Object(s.useState)(!1),p=Object(o.a)(j,2),b=p[0],m=p[1],O=Object(s.useState)(!1),g=Object(o.a)(O,2),x=g[0],y=g[1];return Object(s.useEffect)((function(){if(b)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||m(!1)}}),[m,b]),Object(U.jsxs)("div",{ref:n,className:h.root,onMouseEnter:function(){var e,t=(e=i.current,String(e.innerHTML).length>10);y(t),u(a.current),m(!0)},onMouseLeave:function(){m(!1)},children:[Object(U.jsx)("div",{ref:a,style:{height:1,width:t,display:"block",position:"absolute",top:0}}),Object(U.jsx)("div",{ref:i,className:"cellValue",children:r}),x&&Object(U.jsx)(Ce.a,{open:b&&null!==d,anchorEl:d,style:{width:t,marginLeft:-17},children:Object(U.jsx)(Ne.a,{elevation:1,style:{minHeight:n.current.offsetHeight-3},children:Object(U.jsx)(f.a,{variant:"body2",style:{padding:8},children:r})})})]})}var Ie=r(262),De=r(265),Ee=r(252),ze=r(261),We=r(263),Fe=r(264),Ae=Object(u.a)({table:{minWidth:700},th:{background:"black"}});var Le=function(){var e=Ae(),t=Object(s.useState)([]),r=Object(o.a)(t,2),n=r[0],a=r[1],i=Object(J.a)(["mr-token"]),d=Object(o.a)(i,1)[0],u=Object(s.useState)("none"),h=Object(o.a)(u,2),j=h[0],p=h[1],b=Object(s.useState)(!1),m=Object(o.a)(b,2),f=m[0],g=m[1],x=Object(s.useState)([]),y=Object(o.a)(x,2),v=y[0],S=(y[1],Object(s.useState)([])),w=Object(o.a)(S,2),N=w[0],C=w[1],T=Object(s.useState)(""),P=Object(o.a)(T,2),I=P[0],D=P[1],E=function(e){console.log(e.currentTarget,e.currentTarget.dataset.oid);var t=parseInt(e.currentTarget.dataset.oid),r=String(e.currentTarget.dataset.btype),o=n.find((function(e){return e.orderId==t})),i={};if(console.log(r),"processing"==r){var s="Y"==o.processing?"N":"Y";console.log(s),i=Object(c.a)(Object(c.a)({},o),{},{processing:s})}if("printed"==r){var l="Y"==o.printed?"N":"Y";console.log(l),i=Object(c.a)(Object(c.a)({},o),{},{printed:l})}if("shipped"==r){var u="Y"==o.shipped?"N":"Y";console.log(u),i=Object(c.a)(Object(c.a)({},o),{},{shipped:u})}G.b.updateOrder(d["mr-token"],t,i).then((function(e){if(200==e.status)return e.json();throw"Something went wrong"})).then((function(e){var t=n.map((function(t){return t.orderId==e.orderId?e:t}));D("updated order"),console.log(t.map((function(e){return e.orderId}))),a(t)})).catch((function(e){console.log("api error"),console.error(e),D("Something went wrong")}))},z=(l.a.useCallback((function(e){var t=e.id,r=e.field,n=e.props;console.log("cell commit",N,n);var a=n,o=N.map((function(e){var n={};return n[r]=a.value,e.orderId===t?Object(c.a)(Object(c.a)({},e),n):e}));C(o),console.log("cell commit after ",o)}),[N]),function(e){g(!1)});Object(s.useEffect)((function(){"none"==j&&G.b.getOrderList(d["mr-token"]).then((function(e){var t=e.filter((function(e){return"shipped"!=e.orderStatus.toLowerCase()}));console.log("fetching orders"),console.log(t.map((function(e){return e.orderId}))),t.forEach((function(e,t){return e.id=e.orderId}));var r=[{prop:"storeName",direction:1},{prop:"recipientName",direction:1},{prop:"orderNo",direction:1},{prop:"orderStatus",direction:1}];t.sort((function(e,t){for(var n=0,a=0;n<r.length&&0===a;)a=r[n].direction*(e[r[n].prop].toString()<t[r[n].prop].toString()?-1:e[r[n].prop].toString()>t[r[n].prop].toString()?1:0),n++;return a})),console.log(t.map((function(e){return e.orderId}))),a(t)})).catch((function(e){console.log("api error"),console.error(e)}))}),[j,d]),Object(s.useEffect)((function(){console.log(d)}),[d]);var W=0;return d["mr-token"]?Object(U.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(U.jsx)("h3",{children:"Printing"}),""==I?"":Object(U.jsx)("div",{style:{color:"red"},children:I}),Object(U.jsx)(O.a,{style:{width:"100%",marginBottom:"15px"}}),"none"==j?Object(U.jsxs)("div",{children:[Object(U.jsx)(k.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){p("add")},children:"Add"}),Object(U.jsxs)("div",{children:[Object(U.jsx)(k.a,{variant:"outlined",color:"primary",disabled:!(v.length>0),onClick:function(e){g(!0)},children:"Delete"}),Object(U.jsxs)(ne.a,{open:f,onClose:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(U.jsxs)(ae.a,{id:"alert-dialog-title",children:['"Are you sure you want to delete the ',v.length,' items"']}),Object(U.jsxs)(oe.a,{children:[Object(U.jsx)(k.a,{onClick:z,color:"primary",children:"Cancel"}),Object(U.jsx)(k.a,{onClick:function(e){console.log("u confirmed delete"),v.forEach((function(e){G.b.deleteOrder(d["mr-token"],e).then((function(t){200==t.status||204==t.status?console.log("deleted order with id ".concat(e)):console.log("Failed to delete order with id ".concat(e))})).catch((function(t){return console.error("could not delete order id ".concat(e),t)}))})),g(!1)},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]}),Object(U.jsx)(ze.a,{component:Ne.a,style:{height:"500px"},children:Object(U.jsxs)(Ie.a,{className:e.table,size:"small","aria-label":"spanning table",children:[Object(U.jsx)(We.a,{children:Object(U.jsxs)(Fe.a,{children:[Object(U.jsx)(Ee.a,{children:"Order Status"}),Object(U.jsx)(Ee.a,{align:"right",children:"Shop"}),Object(U.jsx)(Ee.a,{align:"right",children:"Recipient/Order/#"}),Object(U.jsx)(Ee.a,{align:"right",children:"Style"}),Object(U.jsx)(Ee.a,{align:"right",children:"Size"}),Object(U.jsx)(Ee.a,{align:"right",children:"Color"}),Object(U.jsx)(Ee.a,{align:"right",children:"Design"}),Object(U.jsx)(Ee.a,{align:"right",children:"Message"}),Object(U.jsx)(Ee.a,{align:"right",children:"Processed"}),Object(U.jsx)(Ee.a,{align:"right",children:"Printed"}),Object(U.jsx)(Ee.a,{align:"right",children:"Shipped"}),Object(U.jsx)(Ee.a,{align:"right",children:"Product Availability"}),Object(U.jsx)(Ee.a,{align:"right",children:"Notes"})]})}),Object(U.jsx)(De.a,{children:n.map((function(e,t,r){var n=!1;if(t==W){n=!0;for(var a=t+1;a<r.length;a++)if(e.orderNo!=r[a].orderNo||e.storeName!=r[a].storeName||e.recipientName!=r[a].recipientName||e.orderStatus!=r[a].orderStatus){W=a;break}}return Object(U.jsxs)(Fe.a,{children:[n&&Object(U.jsx)(Ee.a,{rowSpan:W-t,children:e.orderStatus}),n&&Object(U.jsx)(Ee.a,{rowSpan:W-t,children:e.storeName}),n&&Object(U.jsxs)(Ee.a,{rowSpan:W-t,children:[Object(U.jsx)("div",{children:e.recipientName}),Object(U.jsx)("div",{children:e.orderNo}),Object(U.jsx)("div",{children:e.orderCount})]}),Object(U.jsx)(Ee.a,{align:"right",children:e.style}),Object(U.jsx)(Ee.a,{align:"right",children:e.size}),Object(U.jsx)(Ee.a,{align:"right",children:e.color}),Object(U.jsx)(Ee.a,{align:"right",children:e.design}),Object(U.jsx)(Ee.a,{align:"right",style:{maxWidth:"100px"},children:Object(U.jsx)(Pe,{value:e.giftMessages,width:500})}),Object(U.jsx)(Ee.a,{align:"right",children:Object(U.jsx)(k.a,{onClick:E,"data-oid":e.orderId,"data-btype":"processing",color:"Y"==e.processing?"primary":"secondary",variant:"contained",children:e.processing})}),Object(U.jsx)(Ee.a,{align:"right",children:Object(U.jsx)(k.a,{onClick:E,"data-oid":e.orderId,"data-btype":"printed",color:"Y"==e.printed?"primary":"secondary",variant:"contained",children:e.printed})}),Object(U.jsx)(Ee.a,{align:"right",children:Object(U.jsx)(k.a,{onClick:E,"data-oid":e.orderId,"data-btype":"shipped",color:"Y"==e.shipped?"primary":"secondary",variant:"contained",children:e.shipped})}),Object(U.jsx)(Ee.a,{align:"right",children:e.productAvailability}),Object(U.jsx)(Ee.a,{align:"right",children:e.sfmNotes})]},e.orderId)}))})]})})]}):Object(U.jsx)(ve,{mode:j,setMode:p})]}):Object(U.jsx)(R.a,{to:"/signin"})};var Me=function(){return Object(U.jsxs)(l.a.Fragment,{children:[Object(U.jsx)("p",{children:"This is my empty Dashboard"}),Object(U.jsx)("p",{children:"This is my empty Dashboard"}),Object(U.jsx)("p",{children:"This is my empty Dashboard"}),Object(U.jsx)("p",{children:"This is my empty Dashboard"})]})};var Be=function(){return Object(U.jsxs)(R.d,{children:[Object(U.jsx)(R.b,{exact:!0,path:"/",component:Me}),Object(U.jsx)(R.b,{exact:!0,path:"/dashboard",component:Me}),Object(U.jsx)(R.b,{exact:!0,path:"/products",component:Q}),Object(U.jsx)(R.b,{exact:!0,path:"/stores",component:te}),Object(U.jsx)(R.b,{exact:!0,path:"/purchases",component:de}),Object(U.jsx)(R.b,{exact:!0,path:"/inventory",component:he}),Object(U.jsx)(R.b,{exact:!0,path:"/orders",component:ke}),Object(U.jsx)(R.b,{exact:!0,path:"/printing",component:Le})]})};var Ve=Object(u.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(c.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1,textAlign:"center"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(i.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto",padding:"5px"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:"0px",paddingRight:"0px"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Ge(){var e=Ve(),t=l.a.useState(!0),r=Object(o.a)(t,2),n=r[0],a=r[1];Object(d.a)(e.paper,e.fixedHeight);return Object(U.jsxs)("div",{className:e.root,children:[Object(U.jsx)(h.a,{}),Object(U.jsx)(p.a,{position:"absolute",className:Object(d.a)(e.appBar,n&&e.appBarShift),children:Object(U.jsxs)(b.a,{className:e.toolbar,children:[Object(U.jsx)(g.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},className:Object(d.a)(e.menuButton,n&&e.menuButtonHidden),children:Object(U.jsx)(v.a,{})}),Object(U.jsx)(f.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:"SFM Dropshipping"}),Object(U.jsx)(k.a,{color:"secondary",variant:"contained",component:V.b,to:"/signin",children:"Sign In"})]})}),Object(U.jsxs)(j.a,{variant:"permanent",classes:{paper:Object(d.a)(e.drawerPaper,!n&&e.drawerPaperClose)},open:n,children:[Object(U.jsx)("div",{className:e.toolbarIcon,children:Object(U.jsx)(g.a,{onClick:function(){a(!1)},children:Object(U.jsx)(w.a,{})})}),Object(U.jsx)(O.a,{}),Object(U.jsx)(m.a,{children:q}),Object(U.jsx)(O.a,{}),Object(U.jsx)(m.a,{children:Y})]}),Object(U.jsxs)("main",{className:e.content,children:[Object(U.jsx)("div",{className:e.appBarSpacer}),Object(U.jsx)(x.a,{maxWidth:!1,className:e.container,children:Object(U.jsx)(Be,{})})]})]})}},46:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r(67),a=r(62),o="https://sfm-dropshipping.herokuapp.com",i=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"getProductList",value:function(e){return fetch(o+"/api/products/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getProduct",value:function(e,t){return fetch(o+"/api/products/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addProduct",value:function(e,t){return fetch(o+"/api/products/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"updateProduct",value:function(e,t,r){return fetch(o+"/api/products/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(r)})}},{key:"getStoreList",value:function(e){return fetch(o+"/api/stores/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getPurchasesList",value:function(e){return fetch(o+"/api/purchases/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getPurchase",value:function(e,t){return fetch(o+"/api/purchases/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addPurchase",value:function(e,t){return fetch(o+"/api/purchases/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"updatePurchase",value:function(e,t,r){return fetch(o+"/api/purchases/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(r)})}},{key:"getInventoryList",value:function(e){return fetch(o+"/api/inventory/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getOrderList",value:function(e){return fetch(o+"/api/orders/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getOrder",value:function(e,t){return fetch(o+"/api/orders/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addOrder",value:function(e,t){return fetch(o+"/api/orders/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"deleteOrder",value:function(e,t){return fetch(o+"/api/orders/"+t+"/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"updateOrder",value:function(e,t,r){return fetch(o+"/api/orders/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(r)})}},{key:"modifyOrder",value:function(e,t,r){return fetch(o+"/api/orders/"+t+"/",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(r)})}},{key:"uploadOrdersFile",value:function(e,t){return fetch(o+"/api/orders/import_ordersfile/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadShippingFile",value:function(e,t){return fetch(o+"/api/orders/import_shippingfile/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadPurchasesFile",value:function(e,t){return fetch(o+"/api/purchases/import_file/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadProductsFile",value:function(e,t){return fetch(o+"/api/products/import_file/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"signinUser",value:function(e){return fetch(o+"/auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}}]),e}()}}]);
//# sourceMappingURL=6.e432abe4.chunk.js.map