{"version":3,"sources":["components/logo.png","components/listItems.js","authentication-service.js","components/ProductForm.js","components/GridCellExpand.js","components/productDetails.js","components/StoreForm.js","components/StoreDetails.js","components/PurchaseForm.js","components/PurchaseList.js","components/InventoryList.js","components/OrderForm.js","components/OrderUpdateForm.js","components/OrderList.js","components/Printing.js","components/Dashboard.js","components/AccountDetails.js","components/Invoices.js","components/TheContent.js","components/TheLayout.js","api-service.js"],"names":["mainListItems","ListItem","button","component","Link","to","ListItemIcon","ListItemText","primary","PlaylistAddCheck","ImportantDevices","Store","HomeWork","ShoppingCart","ViewCarousel","Receipt","staffListItems","clientListItems","secondaryListItems","href","APIROOT","SettingsApplications","AuthenticationService","console","log","document","cookie","Date","toUTCString","window","location","reload","signout","username","password","useStyles","makeStyles","theme","form","width","marginTop","spacing","submit","margin","ProductForm","props","classes","useCookies","token","useState","errormsg","setErrormsg","data","setData","saved","setSaved","useEffect","mode","a","API","getProduct","id","resp","status","json","product","error","String","getproduct","updateProduct","dataObject","alert","setMode","errors","addProduct","Object","keys","length","style","display","justifyContent","Typography","variant","Button","color","onClick","e","className","onSubmit","preventDefault","formData","FormData","target","forEach","value","key","FormLabel","TextField","required","fullWidth","label","name","disabled","helperText","defaultValue","type","inputProps","step","root","alignItems","lineHeight","height","position","whiteSpace","overflow","textOverflow","GridCellExpand","limit","wrapper","useRef","cellDiv","cellValue","anchorEl","setAnchorEl","showFullCell","setShowFullCell","showPopper","setShowPopper","addEventListener","handleKeyDown","removeEventListener","nativeEvent","ref","onMouseEnter","isCurrentlyOverflown","element","innerHTML","isOverflown","current","onMouseLeave","top","Popper","open","marginLeft","Paper","elevation","minHeight","offsetHeight","padding","columns","field","headerName","renderCell","params","toString","hide","ProductDetails","products","setProducts","searchFilteredProducts","setSearchFilteredProducts","searchString","setSearchString","mySelectedRows","setMySelectedRows","setOpen","loading","setLoading","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","message","setMessage","usertype","restrictedColumns","fetchlist","getProductList","then","handleUnauthorized","catch","splice","setTitle","updateSearchFilteredProducts","theSearchString","rows","filter","r","str","toLowerCase","search","size","handleClose","handleDeleteConfirm","deleted","rowId","deleteProduct","p","find","x","push","flexDirection","flexWrap","IconButton","Dialog","onClose","DialogTitle","DialogActions","autoFocus","onChange","event","files","hidden","htmlFor","append","uploadProductsFile","response","result","marginRight","text","onKeyPress","minWidth","checkboxSelection","components","Toolbar","GridToolbar","onSelectionModelChange","items","selectionModel","disableColumnMenu","disableSelectionOnClick","StoreForm","getStore","store","updateStore","maxLength","max","StoreDetails","stores","setStores","selectedStore","setSelectedStore","getStoreList","item","i","s","storeCode","PurchaseForm","submittedData","setSubmittedData","availableStyles","setAvailableStyles","availableSizes","setAvailableSizes","availableColors","setAvailableColors","availableProducts","setAvailableProducts","badData","styles","map","d","Set","sizes","colors","sfmId","saveData","updatePurchase","addPurchase","handleGoBack","aria-labelledby","aria-describedby","select","MenuItem","Autocomplete","options","freeSolo","getOptionLabel","option","renderInput","InputLabelProps","shrink","formatDate","dt","dd","getDate","padStart","getMonth","getFullYear","substr","PurchaseList","purchases","setPurchases","recordDetails","setRecordDetails","totalcount","setTotalCount","page","setPage","data-pid","handleStatusChange","valueFormatter","pid","parseInt","currentTarget","dataset","rowdata","newRow","JSON","stringify","updatedRows","row","err","fetchList","urlparams","fromSearchBar","URLSearchParams","getPurchasesList","getPurchase","deleteRows","deletePurchase","uploadPurchasesFile","flexGrow","autoHeight","pagination","pageSize","rowsPerPageOptions","rowCount","paginationMode","onPageChange","InventoryList","productInventory","setproductInventory","searchFilteredInventory","setSearchFilteredInventory","getInventoryList","updateSearchFilteredInventory","productAvailability","marginBottom","uploadInventoryFile","OrderForm","setavailableProducts","setavailableStyles","setavailableSizes","setavailableColors","availableStores","setAvailableStores","styleref","sizeref","colorref","sortBy","prop","direction","sort","b","fromPrinting","updateOrder","addOrder","storeName","inputRef","newstyle","newsize","OrderUpdateForm","dataReturned","setDataReturned","getOrder","handleStyleChange","handleSizeChange","setMinutes","getMinutes","getTimezoneOffset","defaultShipDate","toISOString","toJSON","min","currencyFormatter","Intl","NumberFormat","currency","backgroundColor","searchInput","cellClassName","editable","headerClassName","getHours","formatDateTime","format","Number","OrderList","orders","setOrders","myEditedRows","setMyEditedRows","selectedShippingFile","setSelectedShippingFile","isShippingFilePicked","setIsShippingFilePicked","handleEditCellChangeCommitted","React","useCallback","obj","orderId","handleUpload","res","uploadOrdersFile","uploadShippingFile","handleUpdateClick","getOrderList","shipped","printed","processing","deleteOrder","updateErrors","updateOrdersAsync","updateTheOrders","labels","textContent","density","onRowSelected","api","getSelectedRows","values","onEditCellChangeCommitted","getRowClassName","table","headcell","fontWeight","fontSize","headcellCentered","textAlign","redbtn","background","greenbtn","tablecell","tablecellCentered","Printing","searchFilteredOrders","setSearchFilteredOrders","notesOpen","setNotesOpen","notesText","setNotesText","notesOrderId","setNotesOrderId","handleCheckboxClick","oid","checked","checkedRows","index","indexOf","handleSpecialButtonsClick","btype","o","handleNotesClose","handleNotesClick","sfmNotes","getPrintingList","updateSearchFilteredOrders","displayStatus","orderNo","recipientName","design","nextGroup","maxWidth","DialogContent","multiline","TableContainer","Table","aria-label","TableHead","TableRow","TableCell","Checkbox","TableBody","arr","newGroup","j","borderBottomColor","rowSpan","orderCount","giftMessages","data-oid","data-btype","substring","Dashboard","inventory","setInventory","setDate","offset","getTime","split","getDeafultStartDate","startDate","setStartDate","endDate","setEndDate","recievedData","setRecievedData","unshift","displaysummary","getOverview","total","fulfilled","unfulfilled","onhold","outofstock","inv","needToPurchase","AccountDetails","userInfo","setUsername","email","setEmail","old_password","setOldPassword","setPassword","password2","setPassword2","first_name","setFirstName","last_name","setLastName","changePassword","setChangePassword","userId","getAccountDetails","handleSave","updateProfile","handleChangePassword","redcolor","greencolor","inputbtn","Invoices","invoices","setInvoices","notesRowId","setNotesRowId","getDay","getDeafultEndDate","rel","handleReceiptUpload","updateInvoice","uploadReceipt","getInvoiceList","notes","generateInvoices","statusText","TheContent","exact","path","render","toolbar","paddingRight","paddingBottom","paddingTop","toolbarIcon","mixins","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","menuButtonHidden","title","drawerPaper","drawerPaperClose","overflowX","breakpoints","up","appBarSpacer","content","container","paddingLeft","paper","fixedHeight","TheLayout","handleSignOut","clsx","usercode","CssBaseline","AppBar","edge","noWrap","src","companylogo","alt","Drawer","Divider","List","Container","fetch","method","headers","body","credentials"],"mappings":"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","file":"static/js/6.6d079e5f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.2cf1827a.png\";","import React from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport LayersIcon from '@material-ui/icons/Layers';\r\nimport AssignmentIcon from '@material-ui/icons/Assignment';\r\nimport { Store, SettingsApplications, Receipt, ViewCarousel, HomeWork, ShoppingCart, PlaylistAddCheck, ImportantDevices} from '@material-ui/icons';\r\nimport {Link} from 'react-router-dom'\r\nimport {APIROOT} from '../api-service'\r\n\r\nexport const mainListItems = (\r\n  <div>\r\n    <ListItem button component={Link} to='/dashboard'>\r\n      <ListItemIcon>\r\n        <DashboardIcon />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Dashboard\" />\r\n    </ListItem>\r\n    <ListItem button button component={Link} to='/orders'>\r\n      <ListItemIcon>\r\n        <PlaylistAddCheck />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Orders\" />\r\n    </ListItem>\r\n    <ListItem button button component={Link} to='/printing'>\r\n      <ListItemIcon>\r\n        <ImportantDevices />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Printing\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/stores'>\r\n      <ListItemIcon>\r\n        <Store />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Stores\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/inventory'>\r\n      <ListItemIcon>\r\n        <HomeWork />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Inventory\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/purchases'>\r\n      <ListItemIcon>\r\n        <ShoppingCart />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Purchases\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/products'>\r\n      <ListItemIcon>\r\n        <ViewCarousel />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Products\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/invoices'>\r\n      <ListItemIcon>\r\n        <Receipt />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Invoices\" />\r\n    </ListItem>\r\n  </div>\r\n);\r\n\r\nexport const staffListItems = (\r\n  <div>\r\n    <ListItem button button component={Link} to='/orders'>\r\n      <ListItemIcon>\r\n        <PlaylistAddCheck />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Orders\" />\r\n    </ListItem>\r\n    <ListItem button button component={Link} to='/printing'>\r\n      <ListItemIcon>\r\n        <ImportantDevices />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Printing\" />\r\n    </ListItem>    \r\n    <ListItem button component={Link} to='/inventory'>\r\n      <ListItemIcon>\r\n        <HomeWork />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Inventory\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/purchases'>\r\n      <ListItemIcon>\r\n        <ShoppingCart />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Purchases\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/products'>\r\n      <ListItemIcon>\r\n        <ViewCarousel />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Products\" />\r\n    </ListItem>    \r\n  </div>\r\n);\r\n\r\nexport const clientListItems = (\r\n  <div>\r\n    <ListItem button component={Link} to='/dashboard'>\r\n      <ListItemIcon>\r\n        <DashboardIcon />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Dashboard\" />\r\n    </ListItem>\r\n    <ListItem button button component={Link} to='/orders'>\r\n      <ListItemIcon>\r\n        <PlaylistAddCheck />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Orders\" />\r\n    </ListItem>    \r\n    <ListItem button component={Link} to='/stores'>\r\n      <ListItemIcon>\r\n        <Store />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Stores\" />\r\n    </ListItem>    \r\n    <ListItem button component={Link} to='/products'>\r\n      <ListItemIcon>\r\n        <ViewCarousel />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Products\" />\r\n    </ListItem>\r\n    <ListItem button component={Link} to='/invoices'>\r\n      <ListItemIcon>\r\n        <Receipt />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Invoice\" />\r\n    </ListItem>\r\n  </div>\r\n);\r\n\r\nexport const secondaryListItems = (\r\n  <div>\r\n    <ListItem button component=\"a\" href={APIROOT+\"/admin\"}>\r\n      <ListItemIcon>\r\n        <SettingsApplications />\r\n      </ListItemIcon>\r\n      <ListItemText primary=\"Django Admin\" />\r\n    </ListItem>\r\n  </div>\r\n);","import API from './api-service'\r\nimport { useCookies, Cookies} from 'react-cookie';\r\n\r\n\r\nexport default class AuthenticationService{\r\n\r\n  static signout(){\r\n    console.log('Signing out');\r\n    document.cookie = \"mr-user=;expires=\" + new Date().toUTCString();\r\n    document.cookie = \"mr-token=;expires=\" + new Date().toUTCString();\r\n    window.location.reload();\r\n  }\r\n\r\n  static handleUnauthorized(){\r\n    console.log('User is not authorized. Logging out');\r\n    AuthenticationService.signout();\r\n  }\r\n\r\n  static login(username, password){\r\n   \r\n  }\r\n}","import API from '../api-service'\r\nimport React, {useState, useEffect} from 'react';\r\nimport {Button, TextField, FormLabel, Typography} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useCookies } from 'react-cookie'\r\n\r\nconst useStyles = makeStyles((theme) => ({    \r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function ProductForm(props){\r\n\r\n  const classes = useStyles();\r\n  const [token] = useCookies(['mr-token']);\r\n\r\n  const [errormsg, setErrormsg] = useState({});\r\n  const [data, setData] = useState({});\r\n  const [saved, setSaved, getSaved] = useState(false);\r\n  let badData = false;\r\n  console.log(\"opened form\");\r\n\r\n  useEffect(() => {\r\n    if(props.mode!='update')\r\n      return;\r\n\r\n    const getproduct = async () => {      \r\n      try{\r\n        const resp = await API.getProduct(token['mr-token'], props.id)\r\n        if(resp.status==200){\r\n          const product = await resp.json();\r\n          console.log(\"retreiving data\");\r\n          setData(product);\r\n        }\r\n        else throw 'Could not get the product details';        \r\n      }\r\n      catch(e){\r\n        console.log(\"api error\");\r\n        console.error(e);\r\n        setErrormsg({'form': String(e)});\r\n      }\r\n    }\r\n    getproduct();\r\n\r\n  }, []);\r\n\r\n  const updateProduct = async (id, dataObject) => {\r\n    try{\r\n      const resp = await API.updateProduct(token['mr-token'], id, dataObject);\r\n      console.log(\"response status \", resp.status);\r\n      if(resp.status==200){\r\n        setSaved(true);\r\n        alert('Saved Successfully');\r\n        props.setMode('none');\r\n      }\r\n        \r\n      else if(resp.status==400){\r\n        console.log(resp);\r\n        const errors = await resp.json();\r\n        setErrormsg(errors);\r\n      }\r\n      else throw 'Failed due to unknown reasons';\r\n    }\r\n    catch(error){\r\n      console.log(\"api error\");\r\n      console.error(error);\r\n      setErrormsg({'form': String(error)});\r\n    }\r\n  }\r\n\r\n  const addProduct = async (dataObject) => {    \r\n    try{\r\n      const resp = await API.addProduct(token['mr-token'], dataObject);\r\n      console.log(\"response status \", resp.status);\r\n      if(resp.status==201){\r\n        setSaved(true);\r\n        alert('Saved Successfully');\r\n        props.setMode('none');\r\n      }\r\n      else if(resp.status==400){\r\n        console.log(resp);\r\n        const errors = await resp.json();\r\n        setErrormsg(errors);\r\n      }\r\n      else throw 'Failed due to unknown reasons';\r\n    }\r\n    catch(error){\r\n      console.log(\"api error\");\r\n      console.error(error);\r\n      setErrormsg({'form': String(error)});\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);    \r\n    let dataObject = {};    \r\n    formData.forEach((value, key) => dataObject[key] = value);\r\n    console.log(\"sending data\");\r\n    dataObject = {...data, ...dataObject};\r\n    console.log(dataObject);\r\n    if(props.mode=='update')\r\n      updateProduct(props.id, dataObject);\r\n    else\r\n      addProduct(dataObject);\r\n  };\r\n\r\n  const handleGoBack = (e) => {\r\n    props.setMode('none');\r\n  }\r\n  \r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  if(saved)\r\n    return (<Redirect to='/products'></Redirect>);\r\n  if(props.mode=='update' && Object.keys(data).length === 0)\r\n    return (<div>Loading...</div>);\r\n  return(\r\n    <div>\r\n      <div style={{display:'flex', justifyContent: \"space-between\"}}>\r\n        <Typography variant=\"h4\">{props.mode=='update' ? 'Update':'Add'}</Typography>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleGoBack}>Go back</Button>\r\n      </div>\r\n    <form className={classes.form} onSubmit={handleSubmit} >\r\n      { Object.keys(errormsg).length!=0 && <FormLabel error={true} >Invalid data {errormsg['form']}</FormLabel>}\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"style\"\r\n        label=\"Style\"\r\n        name=\"style\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['style'] ? errormsg['style'][0]:''}\r\n        error = {errormsg['style'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['style']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"size\"\r\n        label=\"Size\"\r\n        name=\"size\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['size'] ? errormsg['size'][0]:''}\r\n        error = {errormsg['size'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['size']:''}\r\n      />\r\n      <TextField\r\n      variant=\"outlined\"\r\n      margin=\"normal\"\r\n      required\r\n      fullWidth\r\n      id=\"color\"\r\n      label=\"Color\"\r\n      name=\"color\"\r\n      disabled = {props.mode=='update' ? true:false}\r\n      helperText = {errormsg['color'] ? errormsg['color'][0]:''}\r\n      error = {errormsg['color'] ? true: false}\r\n      defaultValue = {props.mode=='update' ? data['color']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"sku\"\r\n        label=\"SKU\"\r\n        name=\"sku\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['sku'] ? errormsg['sku'][0]:''}\r\n        error = {errormsg['sku'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['sku']:''}\r\n      />\r\n      \r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"price\"\r\n        label=\"Price\"\r\n        name=\"price\"\r\n        type=\"number\"\r\n        inputProps={{step:0.01}}\r\n        helperText = {errormsg['price'] ? errormsg['price'][0]:''}\r\n        error = {errormsg['price'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['price']:''}\r\n      />\r\n      \r\n      <Button\r\n        type=\"submit\"\r\n        fullWidth\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        className={classes.submit}            \r\n      >\r\n        Submit\r\n      </Button>          \r\n    </form>\r\n    </div>); \r\n}","import '../App.css';\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    alignItems: 'center',\r\n    lineHeight: '24px',\r\n    width: '100%',\r\n    height: '100%',\r\n    position: 'relative',\r\n    display: 'flex',\r\n    '& .cellValue': {\r\n      whiteSpace: 'nowrap',\r\n      overflow: 'hidden',\r\n      textOverflow: 'ellipsis',\r\n    },\r\n  },\r\n}));\r\n\r\nfunction isOverflown(element, limit){\r\n  if(String(element.innerHTML).length > limit)\r\n    return true;\r\n  else return false;\r\n}\r\n\r\nexport default function GridCellExpand(props) {\r\n  const { width, value, limit } = props;\r\n  const wrapper = useRef(null);\r\n  const cellDiv = useRef(null);\r\n  const cellValue = useRef(null);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const classes = useStyles();\r\n  const [showFullCell, setShowFullCell] = useState(false);\r\n  const [showPopper, setShowPopper] = useState(false);\r\n\r\n  const handleMouseEnter = () => {\r\n    const isCurrentlyOverflown = isOverflown(cellValue.current, limit);\r\n    setShowPopper(isCurrentlyOverflown);\r\n    setAnchorEl(cellDiv.current);\r\n    setShowFullCell(true);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setShowFullCell(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!showFullCell) {\r\n      return undefined;\r\n    }\r\n\r\n    function handleKeyDown(nativeEvent) {\r\n      // IE11, Edge (prior to using Bink?) use 'Esc'\r\n      if (nativeEvent.key === 'Escape' || nativeEvent.key === 'Esc') {\r\n        setShowFullCell(false);\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [setShowFullCell, showFullCell]);\r\n\r\n  return (\r\n    <div\r\n      ref={wrapper}\r\n      className={classes.root}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      <div\r\n        ref={cellDiv}\r\n        style={{\r\n          height: 1,\r\n          width,\r\n          display: 'block',\r\n          position: 'absolute',\r\n          top: 0,\r\n        }}\r\n      />\r\n      <div ref={cellValue} className=\"cellValue\">\r\n        {value}\r\n      </div>\r\n      {showPopper && (\r\n        <Popper\r\n          open={showFullCell && anchorEl !== null}\r\n          anchorEl={anchorEl}\r\n          style={{ width, marginLeft: -17 }}\r\n        >\r\n          <Paper\r\n            elevation={1}\r\n            style={{ minHeight: wrapper.current.offsetHeight - 3 }}\r\n          >\r\n            <Typography variant=\"body2\" style={{ padding: 8 }}>\r\n              {value}\r\n            </Typography>\r\n          </Paper>\r\n        </Popper>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nGridCellExpand.propTypes = {\r\n  value: PropTypes.string.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n};","import '../App.css';\r\nimport React, {useState, useEffect} from 'react';\r\nimport { DataGrid, GridToolbar, GridRowsProp, GridColDef } from '@material-ui/data-grid';\r\nimport API from '../api-service';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Button, IconButton, Dialog, DialogActions, DialogTitle, TextField} from '@material-ui/core';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ProductForm from './ProductForm';\r\nimport GridCellExpand from './GridCellExpand';\r\nimport AuthenticationService from '../authentication-service';\r\n\r\n\r\nconst columns = [\r\n  { field: 'id', headerName: 'ID', width: 80},\r\n  { field: 'sfmId', headerName: 'SFM ID', width: 300, renderCell: (params) => (<GridCellExpand limit={29} value={params.value ? params.value.toString() : ''} width={300} />), hide: true},\r\n  { field: 'style', headerName: 'Style', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />)},\r\n  { field: 'size', headerName: 'Size', width: 100},\r\n  { field: 'color', headerName: 'Color', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />)},\r\n  { field: 'sku', headerName: 'SKU', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />)},\r\n  { field: 'price', headerName: 'Price', width: 100, type: 'number'},\r\n  { field: 'amountInStock', headerName: 'Amount In Stock', width: 150, type: 'number'}\r\n];\r\n\r\nfunction ProductDetails(props){\r\n  \r\n  // { id: 1, sfmId: 'dummy1', style: 'dummy style' },\r\n  // { id: 2,  sfmId: 'dummy2', style: 'dummy style' }\r\n  const [products, setProducts] = useState([]);\r\n  const [searchFilteredProducts, setSearchFilteredProducts] = useState([]);\r\n  const [searchString, setSearchString] = useState('');\r\n  const [token] = useCookies(['mr-token']);\r\n  const [mode, setMode] = useState('none');\r\n  const [mySelectedRows, setMySelectedRows] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\tconst [isFilePicked, setIsFilePicked] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const usertype = props.usertype;\r\n\r\n  const restrictedColumns = [\r\n    { field: 'style', headerName: 'Style', width: 150},\r\n    { field: 'size', headerName: 'Size', width: 150},\r\n    { field: 'color', headerName: 'Color', width: 150},\r\n    { field: 'sku', headerName: 'SKU', width: 150 },\r\n    { field: 'amountInStock', headerName: 'Amount In Stock', width: 150, type: 'number'}\r\n  ];\r\n\r\n  if(usertype==0) \r\n    restrictedColumns.splice(4, 0, { field: 'price', headerName: 'Price', width: 150});\r\n\r\n  const fileChangeHandler = (event) => {\r\n    if(event.target.files.length==1){\r\n      setSelectedFile(event.target.files[0]);\r\n      console.log(\"file is: \", event.target.files[0])\r\n      setIsFilePicked(true);\r\n    }\r\n    else{\r\n      setSelectedFile(null);\r\n      setIsFilePicked(false);\r\n    }\r\n\t};\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n\t\tformData.append('productsFile', selectedFile);\r\n\r\n    if(isFilePicked && selectedFile.name.search(/product/i) == -1){\r\n      setMessage('Please make sure you have selected products file. File name should contain the word product');\r\n      return;\r\n    }\r\n\r\n\t\tAPI.uploadProductsFile(token['mr-token'], formData)\r\n\t\t\t.then((response) => response.json())\r\n\t\t\t.then((result) => {\r\n        if(result['errors']){          \r\n          if(result['errors'].length==0){\r\n            setMessage(result['msg']);\r\n            console.log(result['msg']);\r\n          }\r\n          else{\r\n            setMessage(result['msg'] + ' (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)');\r\n            console.log('Following rows were not imported: ');\r\n            console.log(result['errors']);\r\n          }\r\n        }\r\n\t\t\t\telse setMessage('Failed import due to unknown reason');\r\n        console.log('setting mode');\r\n        setIsFilePicked(false);\r\n        setSelectedFile(null);\r\n        fetchlist();\r\n        setMode('none');\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error('Error:', error);\r\n        setIsFilePicked(false);\r\n        setSelectedFile(null);\r\n        setMessage('Failed import due to unknown reasons');\r\n\t\t\t});\r\n\t};\r\n\r\n  function fetchlist(){\r\n    setLoading(true);\r\n    API.getProductList(token['mr-token'])\r\n    .then(resp => {\r\n      if(resp.status==200) return resp.json();\r\n      if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n      throw 'Something went wrong';    \r\n    })\r\n    .then(data => {\r\n      console.log(data); \r\n      // data.forEach((item, i) => item.id = item.sfmId);\r\n      setLoading(false);\r\n      setProducts(data);\r\n    })    \r\n    .catch(e => {console.log(\"api error\"); console.error(e); setLoading(false);});\r\n  }\r\n  \r\n  useEffect(() => {\r\n    props.setTitle('Products');\r\n\r\n    if(mode=='none')\r\n      fetchlist();\r\n  }, [token, mode]\r\n  );\r\n\r\n  useEffect(() => {\r\n    updateSearchFilteredProducts(searchString);\r\n  }, [products]\r\n  );\r\n\r\n  const updateSearchFilteredProducts = (theSearchString) =>{\r\n    let rows = [...products];\r\n    if(theSearchString!='')\r\n        rows = rows.filter(r => {\r\n          const str = theSearchString.toLowerCase()\r\n          return r.style.toLowerCase().search(str)>=0 ||\r\n          r.size.toLowerCase().search(str)>=0 ||\r\n          r.color.toLowerCase().search(str)>=0;\r\n          \r\n        })\r\n    setMySelectedRows([]);\r\n    setSearchFilteredProducts(rows);\r\n  }\r\n\r\n  const updatebtnClicked = (e) => {\r\n    console.log(\"update clicked\");\r\n    if(mySelectedRows.length==1)\r\n      setMode('update');\r\n  };\r\n\r\n  const handleAddClick = (e) => {setMode('add')}\r\n\r\n  const handleSelection = (items) => {\r\n    console.log(items);    \r\n    setMySelectedRows(items.selectionModel);    \r\n  }\r\n\r\n  const handleDeleteClick = (e) => {setOpen(true)}\r\n  const handleClose = (e) => {setOpen(false)}\r\n  const handleDeleteConfirm = async (e) => { \r\n    console.log('u confirmed delete');\r\n    let deleted = 0;\r\n    const errors = [];\r\n    for(let rowId of mySelectedRows) {\r\n      try{\r\n        const resp = await API.deleteProduct(token['mr-token'], rowId);        \r\n        if(resp.status==200 || resp.status==204){\r\n          console.log(`deleted order with id ${rowId}`);\r\n          deleted++;\r\n        }            \r\n        else{\r\n          console.log(`Failed to delete product with id ${rowId}`);\r\n          const p = products.find(x => x.id==rowId)['sfmId'];\r\n          throw `Could not delete product ${p}`;\r\n        }           \r\n      }\r\n      catch(e){\r\n        console.error(`could not delete product id ${rowId}`, e);\r\n        errors.push(e.toString());\r\n      }\r\n    }\r\n    if(deleted < mySelectedRows.length)\r\n      setMessage('Could not delete products ' + errors.toString());\r\n    else\r\n      setMessage('Successfull');\r\n    setOpen(false);\r\n    fetchlist();\r\n  }\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  else\r\n  return(\r\n    <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n      {message && <div style={{color:\"red\"}}>{message}</div>}\r\n      { mode=='none' ?\r\n        <div>\r\n          { usertype==1 && \r\n          <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', flexDirection: 'row'}}>\r\n            <div>\r\n              <IconButton color='primary' variant='contained' onClick={handleAddClick}><AddCircleIcon /></IconButton>\r\n              <IconButton disabled={mySelectedRows.length == 1 ? false:true} onClick={updatebtnClicked} color='primary' variant='contained' ><EditIcon /></IconButton>\r\n              <IconButton variant=\"outlined\" color=\"secondary\" disabled={mySelectedRows.length>0 ? false:true} onClick={handleDeleteClick}><DeleteIcon /></IconButton>\r\n              <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                >\r\n                <DialogTitle id=\"alert-dialog-title\">\"Are you sure you want to delete the {mySelectedRows.length} items\"</DialogTitle>\r\n                \r\n                <DialogActions>\r\n                  <Button onClick={handleClose} color=\"primary\">Cancel</Button>\r\n                  <Button onClick={handleDeleteConfirm} color=\"primary\" autoFocus>Confirm</Button>\r\n                </DialogActions>\r\n              </Dialog>\r\n            </div>\r\n            <form ><input type=\"file\" name=\"myfile\" id=\"myfile\" onChange={fileChangeHandler} hidden></input><label htmlFor=\"myfile\" className=\"file-input-label\">Choose File</label><Button type=\"submit\" disabled={!isFilePicked} onClick={handleUpload} color='primary' variant='contained'>Import Products</Button></form>\r\n            <div>\r\n                <TextField variant=\"outlined\" size=\"small\" margin=\"none\" type=\"text\" style={{marginRight: '4px'}} value={searchString} text='Search' onChange={(e) => setSearchString(e.target.value)} onKeyPress={e => e.key==\"Enter\" && updateSearchFilteredProducts(e.target.value)}></TextField>\r\n                <Button color=\"primary\" variant=\"contained\" onClick={e => updateSearchFilteredProducts(searchString)}>Search</Button>\r\n            </div>\r\n          </div>}\r\n          <div style={{  width: '100%', minWidth:'600px', height: 'calc(100vh - 140px'}}>\r\n            <DataGrid rows={searchFilteredProducts} columns={usertype==1 ? columns : restrictedColumns} checkboxSelection components={{\r\n              Toolbar: GridToolbar,\r\n            }} onSelectionModelChange={handleSelection} disableColumnMenu={true} disableSelectionOnClick loading={loading}/>\r\n          </div>\r\n        </div>\r\n        :\r\n        <ProductForm id={ mode=='update' ? mySelectedRows[0] : null } mode={mode} setMode={setMode}></ProductForm>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductDetails;\r\n","import API from '../api-service'\r\nimport React, {useState, useEffect} from 'react';\r\nimport {Button, TextField, FormLabel, Typography} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useCookies } from 'react-cookie'\r\n\r\nconst useStyles = makeStyles((theme) => ({    \r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function StoreForm(props){\r\n\r\n  const classes = useStyles();\r\n  const [token] = useCookies(['mr-token']);\r\n\r\n  const [errormsg, setErrormsg] = useState({});\r\n  const [data, setData] = useState({});\r\n  const [saved, setSaved] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if(props.mode!='update')\r\n      return;\r\n\r\n    const getStore = async () => {      \r\n      try{\r\n        const resp = await API.getStore(token['mr-token'], props.id)\r\n        if(resp.status==200){\r\n          const store = await resp.json();\r\n          console.log(\"retreiving data\");\r\n          setData(store);\r\n        }\r\n        else throw 'Could not get the store details';        \r\n      }\r\n      catch(e){\r\n        console.log(\"api error\");\r\n        console.error(e);\r\n        setErrormsg({'form': String(e)});\r\n      }\r\n    }\r\n    getStore();\r\n\r\n  }, []);\r\n\r\n  const updateStore = async (id, dataObject) => {\r\n    try{\r\n      const resp = await API.updateStore(token['mr-token'], id, dataObject);\r\n      console.log(\"response status \", resp.status);\r\n      if(resp.status==200){\r\n        setSaved(true);\r\n        alert(\"Saved Succesfully\");\r\n        props.setMode('none');\r\n      }\r\n        \r\n      else if(resp.status==400){\r\n        console.log(resp);\r\n        const errors = await resp.json();\r\n        setErrormsg(errors);\r\n      }\r\n      else throw 'Failed due to unknown reasons';\r\n    }\r\n    catch(error){\r\n      console.log(\"api error\");\r\n      console.error(error);\r\n      setErrormsg({'form': String(error)});\r\n    }\r\n  }\r\n\r\n  \r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);    \r\n    let dataObject = {};    \r\n    formData.forEach((value, key) => dataObject[key] = value);\r\n    console.log(\"sending data\");\r\n    dataObject = {...data, ...dataObject};\r\n    console.log(dataObject);\r\n    if(props.mode=='update')\r\n      updateStore(props.id, dataObject);\r\n    else\r\n      console.error(\"only update available\");\r\n  };\r\n\r\n  const handleGoBack = (e) => {\r\n    props.setMode('none');\r\n  }\r\n  \r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  if(saved)\r\n    return (<Redirect to='/stores'></Redirect>);\r\n  if(props.mode=='update' && Object.keys(data).length === 0)\r\n    return (<div>Loading...</div>);\r\n  return(\r\n    <div>\r\n      <div style={{display:'flex', justifyContent: \"space-between\"}}>\r\n        <Typography variant=\"h4\">{props.mode=='update' ? 'Update':'Add'}</Typography>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleGoBack}>Go back</Button>\r\n      </div>\r\n    <form className={classes.form} onSubmit={handleSubmit} >\r\n      { Object.keys(errormsg).length!=0 && <FormLabel error={true} >Invalid data {errormsg['form']}</FormLabel>}\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"storeName\"\r\n        label=\"Store Name\"\r\n        name=\"storeName\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['storeName'] ? errormsg['storeName'][0]:''}\r\n        error = {errormsg['storeName'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['storeName']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        type=\"email\"\r\n        id=\"emailAddress\"\r\n        label=\"Email Address\"\r\n        name=\"emailAddress\"\r\n        helperText = {errormsg['emailAddress'] ? errormsg['emailAddress'][0]:''}\r\n        error = {errormsg['emailAddress'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['emailAddress']:''}\r\n      />\r\n      <TextField\r\n      variant=\"outlined\"\r\n      margin=\"normal\"\r\n      required\r\n      fullWidth\r\n      id=\"addressLine1\"\r\n      label=\"Address Line 1\"\r\n      name=\"addressLine1\"\r\n      inputProps={{maxLength:50}}\r\n      helperText = {errormsg['addressLine1'] ? errormsg['addressLine1'][0]:''}\r\n      error = {errormsg['addressLine1'] ? true: false}\r\n      defaultValue = {props.mode=='update' ? data['addressLine1']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"addressLine2\"\r\n        label=\"addressLine2\"\r\n        name=\"addressLine2\"\r\n        helperText = {errormsg['addressLine2'] ? errormsg['addressLine2'][0]:''}\r\n        error = {errormsg['addressLine2'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['addressLine2']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"city\"\r\n        label=\"City\"\r\n        name=\"city\"\r\n        helperText = {errormsg['city'] ? errormsg['city'][0]:''}\r\n        error = {errormsg['city'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['city']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"state\"\r\n        label=\"State\"\r\n        name=\"state\"\r\n        inputProps={{maxLength:2}}\r\n        helperText = {errormsg['state'] ? errormsg['state'][0]:''}\r\n        error = {errormsg['state'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['state']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"zipCode\"\r\n        label=\"Zip Code\"\r\n        name=\"zipCode\"\r\n        type=\"number\"\r\n        inputProps={{step:1, max:99999}}\r\n        helperText = {errormsg['zipCode'] ? errormsg['zipCode'][0]:''}\r\n        error = {errormsg['zipCode'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? data['zipCode']:''}\r\n      />\r\n      \r\n      <Button\r\n        type=\"submit\"\r\n        fullWidth\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        className={classes.submit}            \r\n      >\r\n        Submit\r\n      </Button>          \r\n    </form>\r\n    </div>); \r\n}","import '../App.css';\r\nimport React, {useState, useEffect} from 'react'\r\nimport { DataGrid, GridToolbar, GridRowsProp, GridColDef } from '@material-ui/data-grid';\r\nimport API from '../api-service';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Redirect } from 'react-router-dom';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport StoreForm from './StoreForm';\r\nimport GridCellExpand from './GridCellExpand';\r\nimport AuthenticationService from '../authentication-service';\r\n\r\n\r\n\r\nconst columns = [\r\n  { field: 'storeName', headerName: 'Store Name', width: 200,  renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />)},\r\n  { field: 'storeCode', headerName: 'Store Code', width: 110 },\r\n  { field: 'emailAddress', headerName: 'Email Address', width: 250,  renderCell: (params) => (<GridCellExpand limit={23} value={params.value ? params.value.toString() : ''} width={300} />) },\r\n  { field: 'addressLine1', headerName: 'Addres Line 1', width: 200,  renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />) },\r\n  { field: 'addressLine2', headerName: 'Adress Line 2', width: 200,  renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />) },\r\n  { field: 'city', headerName: 'City', width: 150,  renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />) },\r\n  { field: 'state', headerName: 'State', width: 80 },\r\n  { field: 'zipCode', headerName: 'Zip Code', width: 100 }\r\n];\r\n\r\nfunction StoreDetails(props){\r\n\r\n\r\n  //{ id: 1, storeCode: 'dummy1', storeName: 'dummy store' },\r\n  //{ id: 2, storeCode: 'dummy2', storeName: 'dummy store2' }\r\n  const [stores, setStores] = useState([]);\r\n  \r\n  const [token] = useCookies(['mr-token']);\r\n  const [mode, setMode] = useState('none');\r\n  const [selectedStore, setSelectedStore] = useState('');\r\n  const [mySelectedRows, setMySelectedRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n\r\n  const updatebtnClicked = (e) => {\r\n    console.log(\"update clicked\");\r\n    if(mySelectedRows.length==1){\r\n      setSelectedStore(stores.find(s => s.id==mySelectedRows[0]).storeCode);\r\n      setMode('update');\r\n    }\r\n      \r\n  };\r\n\r\n  const handleSelection = (items) => {\r\n    console.log(items);    \r\n    setMySelectedRows(items.selectionModel);    \r\n  }\r\n\r\n  useEffect(() => {\r\n    props.setTitle('Stores');\r\n    setLoading(true);\r\n    API.getStoreList(token['mr-token'])\r\n    .then(resp => {\r\n      if(resp.status==200) return resp.json();\r\n      if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n      throw 'Something went wrong';    \r\n    })\r\n    .then(data => {\r\n      console.log(data);\r\n      // client permission to filter only his store, is handled in api\r\n      data.forEach((item, i) => item.id = i+1);\r\n      setStores(data);\r\n      setLoading(false);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e); setLoading(false);});\r\n  }, [mode, token]\r\n  );\r\n\r\n  const usertype = props.usertype;\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  return(    \r\n    <div>\r\n    { mode=='none' ?\r\n      <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n        {usertype==1 && <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', alignItems: 'center', flexWrap: 'wrap', flexDirection: 'row'}}>\r\n          <IconButton disabled={mySelectedRows.length == 1 ? false:true} onClick={updatebtnClicked} color='primary' variant='contained' ><EditIcon /></IconButton>\r\n        </div>}\r\n        <div style={{  width: '100%', minWidth:'600px', height: \"calc(100vh - 100px\"}}>\r\n          <DataGrid rows={stores} columns={columns} components={{\r\n            Toolbar: GridToolbar,\r\n          }} checkboxSelection onSelectionModelChange={handleSelection} disableColumnMenu loading={loading}/>\r\n        </div>\r\n      </div>\r\n      :\r\n      <StoreForm id={ mode=='update' ? selectedStore : null } mode={mode} setMode={setMode}></StoreForm>\r\n    }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StoreDetails;\r\n","import API from '../api-service'\r\nimport React, {useState, useEffect} from 'react';\r\nimport {Button, TextField, FormLabel, Typography, MenuItem, Dialog, DialogTitle, DialogActions} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useCookies } from 'react-cookie'\r\nimport { setGridPageSizeStateUpdate } from '@material-ui/data-grid';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\n\r\nconst useStyles = makeStyles((theme) => ({    \r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function PurchaseForm(props){\r\n\r\n  const classes = useStyles();\r\n  const [token] = useCookies(['mr-token']);\r\n  const [errormsg, setErrormsg] = useState({});\r\n  const [saved, setSaved] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const [submittedData, setSubmittedData] = useState([]);\r\n  const [availableStyles, setAvailableStyles] = useState([]);\r\n  const [availableSizes, setAvailableSizes] = useState([]);\r\n  const [availableColors, setAvailableColors] = useState([]);\r\n  const [availableProducts, setAvailableProducts] = useState([]);\r\n  let badData = false;\r\n  console.log(\"opened form\");\r\n  console.log(availableStyles);\r\n  console.log(availableProducts);\r\n\r\n  useEffect(() => {\r\n    API.getProductList(token['mr-token'])\r\n    .then(resp => resp.json())\r\n    .then(data => {\r\n      const styles = data.map( d => d.style);\r\n      setAvailableStyles([...new Set(styles)]);\r\n      const sizes = data.map( d => d.size)\r\n      setAvailableSizes([...new Set(sizes)]);\r\n      const colors = data.map( d => d.color);\r\n      setAvailableColors([...new Set(colors)]);      \r\n      setAvailableProducts(data.map( d => d.sfmId));\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e)});    \r\n  }, []\r\n  );\r\n\r\n  const handleClose = (e) => {setOpen(false)}\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);    \r\n    let dataObject = {};    \r\n    console.log(formData);\r\n    formData.forEach((value, key) => dataObject[key] = value);\r\n    console.log(\"sending data\");\r\n    const sfmId = dataObject['style'] + '-' + dataObject['size'] + '-' + dataObject['color']\r\n    setSubmittedData(dataObject);\r\n    if(!availableProducts.find(x => x==sfmId)){\r\n      setOpen(true);\r\n      return;\r\n    }\r\n    saveData(dataObject);    \r\n  };\r\n\r\n  const handleConfirm = (e) => {\r\n    saveData(submittedData);\r\n  }\r\n\r\n  const saveData = (dataObject) => {\r\n    console.log(dataObject);\r\n    if(props.mode=='update')\r\n      API.updatePurchase(token['mr-token'], props.id, dataObject)\r\n      .then(resp => {\r\n        if(resp.status==400) {console.log(resp); setSaved(false); badData=true; } \r\n        if(resp.status==200) { setSaved(true); }\r\n        return resp.json()\r\n      })\r\n      .then(data => {if(badData) setErrormsg(data)})\r\n      .catch(error => {console.log(\"api error\"); console.error(error)});\r\n    else\r\n      API.addPurchase(token['mr-token'], dataObject)\r\n      .then(resp => {\r\n        console.log(\"saving\",resp.status);\r\n        if(resp.status==400) {console.log(resp); setSaved(false); badData=true; } \r\n        if(resp.status==201) { setSaved(true); }\r\n        return resp.json()\r\n      })\r\n      .then(data => {if(badData) setErrormsg(data)})\r\n      .catch(error => {console.log(\"api error\"); console.error(error)});      \r\n  }  \r\n\r\n  const handleGoBack = (e) => {\r\n    props.setMode('none');\r\n  }\r\n  \r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  if(saved)\r\n    return(<div>Saved Succcesfully <Button onClick={handleGoBack}>Go back to Purchases</Button></div>);\r\n  else\r\n  return(\r\n    <div>\r\n      <div style={{display:'flex'}}>\r\n        <Typography>{props.mode=='update' ? 'Update':'Add'}</Typography>\r\n        <Button onClick={handleGoBack}>Go back</Button>\r\n      </div>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\"The Product does not Exist. New Product will be created. Continue?\"</DialogTitle>\r\n        \r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">Cancel</Button>\r\n          <Button onClick={handleConfirm} color=\"primary\" autoFocus>Confirm</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <form className={classes.form} onSubmit={handleSubmit} >\r\n      { Object.keys(errormsg).length!=0 && <FormLabel error={true} >Invalid data</FormLabel>}\r\n      \r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        select\r\n        fullWidth\r\n        id=\"status\"\r\n        label=\"Status\"\r\n        name=\"status\"\r\n        helperText = {errormsg['status'] ? errormsg['status'][0]:''}\r\n        error = {errormsg['status'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? props.data['status']:'In Transit'}\r\n      >\r\n        <MenuItem key={0} value={'In Transit'}>In Transit</MenuItem>\r\n        <MenuItem key={1} value={'Received'}>Received</MenuItem>\r\n      </TextField>\r\n      <Autocomplete\r\n      id=\"styleCombo\"\r\n      options={availableStyles}\r\n      freeSolo\r\n      getOptionLabel={(option) => option}\r\n      fullWidth      \r\n      renderInput={(params) => \r\n        <TextField {...params} \r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        id=\"style\"\r\n        label=\"Style\"\r\n        name=\"style\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['style'] ? errormsg['style'][0]:''}\r\n        error = {errormsg['style'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? props.data['style']:''}\r\n        />}\r\n      />\r\n\r\n      <Autocomplete\r\n      id=\"sizeCombo\"\r\n      options={availableSizes}\r\n      freeSolo\r\n      getOptionLabel={(option) => option}\r\n      renderInput={(params) => \r\n        <TextField {...params} \r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"size\"\r\n        label=\"Size\"\r\n        name=\"size\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['size'] ? errormsg['size'][0]:''}\r\n        error = {errormsg['size'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? props.data['size']:''}\r\n        />}\r\n      />\r\n      <Autocomplete\r\n      id=\"colorCombo\"\r\n      options={availableColors}\r\n      freeSolo\r\n      getOptionLabel={(option) => option}\r\n      renderInput={(params) => \r\n        <TextField {...params} \r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        id=\"color\"\r\n        label=\"Color\"\r\n        name=\"color\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['color'] ? errormsg['color'][0]:''}\r\n        error = {errormsg['color'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? props.data['color']:''}\r\n        />}\r\n      />\r\n      \r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"company\"\r\n        label=\"Company\"\r\n        name=\"company\"\r\n        helperText = {errormsg['company'] ? errormsg['company'][0]:''}\r\n        error = {errormsg['company'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? props.data['company']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"warehouse\"\r\n        label=\"Warehouse\"\r\n        name=\"warehouse\"\r\n        helperText = {errormsg['warehouse'] ? errormsg['warehouse'][0]:''}\r\n        error = {errormsg['warehouse'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? props.data['warehouse']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"ordered\"\r\n        label=\"Ordered\"\r\n        name=\"ordered\"\r\n        type=\"number\"\r\n        helperText = {errormsg['ordered'] ? errormsg['ordered'][0]:''}\r\n        error = {errormsg['ordered'] ? true: false}\r\n        defaultValue = {props.mode=='update' ? props.data['ordered']:''}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"orderDate\"\r\n        label=\"order Date\"\r\n        name=\"orderDate\"\r\n        type=\"date\"\r\n        helperText = {errormsg['orderDate'] ? errormsg['orderDate'][0]:''}\r\n        error = {errormsg['orderDate'] ? true: false}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n        defaultValue = {props.mode=='update' ? props.data['orderDate']:''}\r\n      />\r\n      <Button\r\n        type=\"submit\"\r\n        fullWidth\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        className={classes.submit}            \r\n      >\r\n        Submit\r\n      </Button>          \r\n      </form>\r\n    </div>); \r\n}","import '../App.css';\r\nimport React, {useState, useEffect} from 'react';\r\nimport { DataGrid, GridToolbar, GridRowsProp, GridColDef } from '@material-ui/data-grid';\r\nimport API from '../api-service';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Divider, Button, TextField, Dialog, DialogTitle, DialogActions, IconButton } from '@material-ui/core';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport PurchaseForm from './PurchaseForm';\r\nimport GridCellExpand from './GridCellExpand';\r\nimport AuthenticationService from '../authentication-service';\r\n\r\nconst formatDate = (dt) => {\r\n  const dd = String(dt.getDate()).padStart(2, '0');\r\n  const mm = String(dt.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n  const yy = String(dt.getFullYear()).substr(2,2);\r\n  return mm + '/' + dd + '/' + yy;\r\n}\r\n\r\n\r\nfunction PurchaseList(props){\r\n\r\n  //{ id: 1, sfmId: 'dummy1', style: 'dummy style' },\r\n  //{ id: 2,  sfmId: 'dummy2', style: 'dummy style' }\r\n  const [purchases, setPurchases] = useState([]);\r\n  const [searchFilteredPurchases, setSearchFilteredPurchases] = useState([]);\r\n  const [searchString, setSearchString] = useState('');\r\n  const [token] = useCookies(['mr-token']);\r\n  const [mode, setMode] = useState('none');\r\n  const [mySelectedRows, setMySelectedRows] = useState([]);\r\n  const [recordDetails, setRecordDetails] = useState({});\r\n  const [totalcount, setTotalCount] = useState(0);\r\n  const [page, setPage] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\tconst [isFilePicked, setIsFilePicked] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [open, setOpen] = useState(false);\r\n\r\n\tconst fileChangeHandler = (event) => {\r\n    if(event.target.files.length==1){\r\n      setSelectedFile(event.target.files[0]);\r\n      console.log(\"file is: \", event.target.files[0]);\r\n      setIsFilePicked(true);\r\n    }\r\n    else{\r\n      setSelectedFile(null);\r\n      setIsFilePicked(false);\r\n    }\r\n\t};\r\n\r\n  const handleDeleteClick = (e) => {setOpen(true)}\r\n  const handleClose = (e) => {setOpen(false)}\r\n\r\n  const handleDeleteConfirm = (e) => {\r\n    console.log('u confirmed delete');\r\n    let errors = [];\r\n    const deleteRows = async () => {\r\n      for(let rowId of mySelectedRows) {\r\n        try{\r\n          const resp = await API.deletePurchase(token['mr-token'], rowId);\r\n          if(resp.status==200 || resp.status==204){\r\n            console.log(`deleted purchase with id ${rowId}`);\r\n          }          \r\n          else{\r\n            console.log(`Failed to delete purchase with id ${rowId}`);\r\n            throw `Failed to delete purchase with id ${rowId}`;\r\n          }\r\n        }\r\n        catch(e){\r\n          console.error(`could not delete purchase id ${rowId}`, e);\r\n          errors.push(`could not delete purchase id ${rowId}`);\r\n        }\r\n      }\r\n\r\n      if(errors.length>0)\r\n        setMessage('Some rows were not deleted\\n' + errors.toString() + ' Please refresh');\r\n      else\r\n        setMessage('Deleted successfully. Please refresh');\r\n\r\n    }\r\n    setOpen(false);\r\n    deleteRows();\r\n\r\n  }\r\n\r\n  const columns = [\r\n    { field: 'id', headerName: 'Id', width: 70, hide:true },\r\n    { field: 'status', headerName: 'Status', width: 150,\r\n      renderCell: (params) => {\r\n          return(\r\n          <Button\r\n            variant=\"contained\"\r\n            color= { params.value==\"In Transit\" ? \"secondary\":\"primary\" }\r\n            size=\"small\"\r\n            data-pid={params.id}\r\n            onClick={handleStatusChange}\r\n            style={{ marginLeft: 16 }}\r\n          >\r\n            {params.value}\r\n          </Button>);\r\n      },\r\n      },\r\n    { field: 'style', headerName: 'Style', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />)  },\r\n    { field: 'size', headerName: 'Size', width: 80 },\r\n    { field: 'color', headerName: 'Color', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />)  },\r\n    { field: 'company', headerName: 'Company', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />)  },\r\n    { field: 'warehouse', headerName: 'Warehouse', width: 150 },\r\n    { field: 'ordered', headerName: 'Ordered', width: 150 },\r\n    { field: 'orderDate', headerName: 'Order Date', width: 150,\r\n      valueFormatter: (params) => { if(params.value) return formatDate(new Date(params.value))}\r\n    },\r\n    { field: 'arrivalDate', headerName: 'Arrival Date', width: 150,\r\n      valueFormatter: (params) => { if(params.value) return formatDate(new Date(params.value))}\r\n    },\r\n    { field: 'sfmId', headerName: 'SFM ID', hide: true, width: 300, renderCell: (params) => (<GridCellExpand limit={28} value={params.value ? params.value.toString() : ''} width={400} />)  }\r\n  ];\r\n\r\n  const handleStatusChange = (e) => {\r\n    const pid = parseInt(e.currentTarget.dataset.pid);\r\n    let rowdata = purchases.find(p => p.id == pid);\r\n    const status = rowdata.status=='In Transit' ? 'Received': 'In Transit'\r\n    const newRow = {...rowdata, status}\r\n    console.log(newRow);\r\n    API.updatePurchase(token['mr-token'], pid, newRow)\r\n      .then(resp => {\r\n        if(resp.status==200) return resp.json();\r\n        if(resp.status==400) throw JSON.stringify(resp.json());\r\n        else throw 'Unknown reason. Please refresh';\r\n      })\r\n      .then(data => {\r\n        const updatedRows = purchases.map((row) => {\r\n          if (row.id == data.id)\r\n            return data;          \r\n          return row;\r\n        });\r\n        setMessage('updated purchase');\r\n        console.log(updatedRows.map(x => x.id));\r\n        setPurchases(updatedRows);\r\n      })\r\n      .catch(err => {console.log('api error');console.error(err); setMessage('Something went wrong, ' + String(err))});\r\n    \r\n  }\r\n\r\n\tconst handleUpload = (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n\t\tformData.append('purchaseFile', selectedFile);\r\n\r\n    if(isFilePicked && selectedFile.name.search(/purchase/i) == -1){\r\n      setMessage('Please make sure you have selected purchase file. File name should contain the word purchase');\r\n      return;\r\n    }\r\n\r\n\t\tAPI.uploadPurchasesFile(token['mr-token'], formData)\r\n\t\t\t.then((response) => response.json())\r\n\t\t\t.then((result) => {\r\n        if(result['errors']){          \r\n          if(result['errors'].length==0){\r\n            setMessage(result['msg']);\r\n            console.log(result['msg']);\r\n          }\r\n          else{\r\n            setMessage(result['msg'] + ' (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)');\r\n            console.log('Following rows were not imported: ');\r\n            console.log(result['errors']);\r\n          }\r\n        }\r\n\t\t\t\telse setMessage('Failed import due to unknown reason');\r\n        console.log('setting mode');\r\n        fetchList();\r\n        setMode('none');\r\n        setIsFilePicked(false);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error('Error:', error);\r\n        setMessage('Failed import due to unknown reasons');\r\n\t\t\t});\r\n\t};\r\n\r\n  const updatebtnClicked = (e) => {\r\n    console.log(\"update clicked\");\r\n    if(mySelectedRows.length==1)    \r\n      API.getPurchase(token['mr-token'], mySelectedRows[0])\r\n        .then(resp => resp.json())\r\n        .then(data => {\r\n        console.log(\"filling formdata\");\r\n        setRecordDetails(data);\r\n        setMode('update');\r\n        })\r\n        .catch(e =>{console.log(\"api error\");console.error(e)});\r\n  };\r\n\r\n  const handleAddClick = (e) => {setMode('add')}\r\n\r\n  const handleSelection = (items) => {\r\n    console.log(items);    \r\n    setMySelectedRows(items.selectionModel);    \r\n  }\r\n\r\n  useEffect(() => {\r\n    props.setTitle('Purchases');\r\n    console.log('useeffect called');\r\n    if(mode=='none')\r\n      fetchList();    \r\n  }, [token, mode, page]\r\n  );\r\n\r\n  // useEffect(() => {\r\n  //   updateSearchFilteredPurchases(searchString);\r\n  // }, [purchases]\r\n  // );\r\n\r\n  // const updateSearchFilteredPurchases = (theSearchString) =>{\r\n  //   let rows = [...purchases];\r\n  //   if(theSearchString!='')\r\n  //       rows = rows.filter(r => {\r\n  //         const str = theSearchString.toLowerCase()\r\n  //         return r.style.toLowerCase().search(str)>=0 ||\r\n  //         r.size.toLowerCase().search(str)>=0 ||\r\n  //         r.color.toLowerCase().search(str)>=0 ||\r\n  //         r.warehouse.toLowerCase().search(str)>=0 ||\r\n  //         r.company.toLowerCase().search(str)>=0;\r\n          \r\n  //       })\r\n  //   setMySelectedRows([]);\r\n  //   console.log('filtered rows');\r\n  //   console.log(rows);\r\n  //   setSearchFilteredPurchases(rows);\r\n  // }\r\n\r\n  function fetchList(fromSearchBar=false){\r\n    if(fromSearchBar && page!=0){\r\n      setPage(0);\r\n      return;\r\n    }      \r\n    console.log(\"fetching data\");\r\n    let urlparams;\r\n    if(searchString){\r\n      urlparams = new URLSearchParams({page: page+1, search: searchString});\r\n    }        \r\n    else\r\n      urlparams = new URLSearchParams({page: page+1});\r\n    \r\n    setLoading(true);\r\n    API.getPurchasesList(token['mr-token'], urlparams)\r\n    .then(resp => {\r\n      if(resp.status==200) return resp.json();\r\n      if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n      throw 'Something went wrong';    \r\n    })\r\n    .then(data => {\r\n      console.log(data);\r\n      // not needed as purchases object already contains field called id\r\n      // data.forEach((item, i) => item.id = i+1);\r\n      setMySelectedRows([]);\r\n      \r\n      if(data['results']){\r\n        if(totalcount != data['count'])\r\n          setPage(0);\r\n        console.log('setting count', data['count'])\r\n        setTotalCount(data['count']);\r\n        setPurchases(data['results']);    \r\n      }\r\n      else{\r\n        console.error('error getting data')\r\n        console.error(data['detail'])\r\n        console.log('setting count', data['count'])\r\n        setPage(0);\r\n        setTotalCount(0);\r\n        setPurchases([]);\r\n      }\r\n      setLoading(false);      \r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e); setMessage(String(e)); setLoading(false);});    \r\n  }\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  return(\r\n    <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n      {message=='' ? '' : <div style={{color:'red'}}>{message}</div>}\r\n      { mode=='none' ?\r\n        <div>\r\n          <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', flexDirection: 'row'}}>\r\n            <div>\r\n            <IconButton  color='primary' variant='contained' onClick={handleAddClick}><AddCircleIcon /></IconButton>\r\n            <IconButton disabled={mySelectedRows.length == 1 ? false:true} onClick={updatebtnClicked} color='primary' variant='contained' ><EditIcon /></IconButton>\r\n            <IconButton variant=\"contained\" color=\"secondary\" disabled={mySelectedRows.length>0 ? false:true} onClick={handleDeleteClick}><DeleteIcon /></IconButton>\r\n            <Dialog\r\n              open={open}\r\n              onClose={handleClose}                \r\n            >\r\n              <DialogTitle id=\"alert-dialog-title\">\"Are you sure you want to delete the {mySelectedRows.length} items\"</DialogTitle>\r\n              \r\n              <DialogActions>\r\n                <Button onClick={handleClose} color=\"primary\">Cancel</Button>\r\n                <Button onClick={handleDeleteConfirm} color=\"primary\" autoFocus>Confirm</Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n            </div>\r\n            <form ><input type=\"file\" name=\"myfile\" id=\"myfile\" onChange={fileChangeHandler} hidden></input><label htmlFor=\"myfile\" className=\"file-input-label\">Choose File</label><Button type=\"submit\" disabled={!isFilePicked} onClick={handleUpload} color='primary' variant='contained'>Import</Button></form>\r\n            <div>\r\n                <TextField variant=\"outlined\" size=\"small\" margin=\"none\" type=\"text\" value={searchString} text='Search' style={{marginRight: '4px'}} onChange={(e) => setSearchString(e.target.value)} onKeyPress={e => e.key==\"Enter\" && fetchList(true)}></TextField>\r\n                <Button color=\"primary\" variant=\"contained\" onClick={e => fetchList(true)}>Search</Button>\r\n            </div>\r\n          </div>\r\n          <div style={{  width: '100%', minWidth:'600px', flexGrow: 1}}>\r\n            <DataGrid rows={purchases} columns={columns} checkboxSelection onSelectionModelChange={handleSelection} disableSelectionOnClick={true} disableColumnMenu\r\n            autoHeight\r\n            components={{ Toolbar: GridToolbar}}\r\n            loading={loading}\r\n            pagination\r\n            page={page}\r\n            pageSize = {50}\r\n            rowsPerPageOptions={[]}\r\n            rowCount = {totalcount}\r\n            paginationMode=\"server\"\r\n            onPageChange={(params) => {\r\n              setPage(params.page);\r\n\r\n            }}/>\r\n          </div>\r\n        </div>\r\n        :\r\n        <PurchaseForm id={ mode=='update' ? mySelectedRows : null }  data={ mode=='update' ? recordDetails : null} mode={mode} setMode={setMode}></PurchaseForm>\r\n      }           \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PurchaseList;\r\n","import '../App.css';\r\nimport React, {useState, useEffect} from 'react'\r\nimport { DataGrid, GridToolbar, GridRowsProp, GridColDef } from '@material-ui/data-grid';\r\nimport { Button, TextField} from '@material-ui/core';\r\nimport API from '../api-service';\r\nimport AuthenticationService from '../authentication-service';\r\nimport { useCookies } from 'react-cookie'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Divider } from '@material-ui/core';\r\nimport GridCellExpand from './GridCellExpand';\r\n\r\nconst formatDate = (dt) => {\r\n  const dd = String(dt.getDate()).padStart(2, '0');\r\n  const mm = String(dt.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n  const yy = String(dt.getFullYear()).substr(2,2);\r\n  return mm + '/' + dd + '/' + yy;\r\n}\r\n\r\nconst columns = [\r\n  { field: 'style', headerName: 'Style', width: 200, renderCell: (params) => (<GridCellExpand limit={20} value={params.value ? params.value.toString() : ''} width={300} />) },\r\n  { field: 'size', headerName: 'Size', width: 80 },\r\n  { field: 'color', headerName: 'Color', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />) },\r\n  { field: 'productAvailability', headerName: 'Product Availabity', width: 150 },\r\n  { field: 'inStock', headerName: 'In Stock', width: 80 },\r\n  { field: 'unfulfilledCount', headerName: 'Unfulfilled Count', width: 80 },\r\n  { field: 'inTransit', headerName: 'In Transit', width: 90 },\r\n  { field: 'arrivalDate', headerName: 'ArrivaL Date', width: 120,\r\n    valueFormatter: (params) => { if(params.value) return formatDate(new Date(params.value))}\r\n  },\r\n  { field: 'trueCount', headerName: 'True Count', width: 80 },\r\n  { field: 'minimum', headerName: 'Minimum', width: 80 },\r\n  { field: 'maximum', headerName: 'Maximum', width: 80 },\r\n  { field: 'shortCount', headerName: 'Short Count', width: 80 },\r\n  { field: 'needToPurchase', headerName: 'Need to Purchase', width: 90 }\r\n];\r\n\r\nfunction InventoryList(props){\r\n  \r\n  //{ id: 1, style: 'dummy1', size: 'dummy ' },\r\n  //{ id: 2, style: 'dummy2', size: 'dummy ' }\r\n  const [productInventory, setproductInventory] = useState([]);\r\n  const [searchFilteredInventory, setSearchFilteredInventory] = useState([]);\r\n  const [searchString, setSearchString] = useState('');\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\tconst [isFilePicked, setIsFilePicked] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [token] = useCookies(['mr-token']);\r\n\r\n  useEffect(() => {\r\n    props.setTitle('Inventory');\r\n    fetchlist();\r\n    \r\n  }, [token]\r\n  );\r\n\r\n  const fetchlist = () => {\r\n    setLoading(true);\r\n    API.getInventoryList(token['mr-token'])\r\n    .then(resp => {\r\n      if(resp.status==200) return resp.json();\r\n      if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n      throw 'Something went wrong';\r\n    })\r\n    .then(data => {\r\n      console.log(data); \r\n      // data.forEach((item, i) => item.id = item.sfmId);\r\n      \r\n      setproductInventory(data);\r\n      setLoading(false);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); setMessage('Something went wrong');console.error(e); setLoading(false);});\r\n  }\r\n\r\n  useEffect(() => {\r\n    updateSearchFilteredInventory(searchString);\r\n  }, [productInventory]\r\n  );\r\n\r\n  const updateSearchFilteredInventory = (theSearchString) =>{\r\n    let rows = [...productInventory];\r\n    if(theSearchString!='')\r\n        rows = rows.filter(r => {\r\n          const str = theSearchString.toLowerCase()\r\n          return r.style.toLowerCase().search(str)>=0 ||\r\n          r.size.toLowerCase().search(str)>=0 ||\r\n          r.color.toLowerCase().search(str)>=0 ||\r\n          r.productAvailability.toLowerCase().search(str)>=0;\r\n        })\r\n    setSearchFilteredInventory(rows);\r\n  }\r\n\r\n  const fileChangeHandler = (event) => {\r\n    if(event.target.files.length==1){\r\n      setSelectedFile(event.target.files[0]);\r\n      console.log(\"file is: \", event.target.files[0])\r\n      setIsFilePicked(true);\r\n    }\r\n    else{\r\n      setSelectedFile(null);\r\n      setIsFilePicked(false);\r\n    }\r\n\t};\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n\r\n\t\tformData.append('inventoryFile', selectedFile);\r\n\r\n    if(isFilePicked && selectedFile.name.search(/inventory/i) == -1){\r\n      setMessage('Please make sure you have selected inventory file. File name should contain the word inventory');\r\n      return;\r\n    }\r\n\r\n\t\tAPI.uploadInventoryFile(token['mr-token'], formData)\r\n\t\t\t.then((response) => response.json())\r\n\t\t\t.then((result) => {\r\n        if(result['errors']){          \r\n          if(result['errors'].length==0){\r\n            setMessage(result['msg']);\r\n            console.log(result['msg']);\r\n          }\r\n          else{\r\n            setMessage(result['msg'] + ' (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)');\r\n            console.log('Following rows were not imported: ');\r\n            console.log(result['errors']);\r\n          }\r\n        }\r\n\t\t\t\telse setMessage('Failed import due to unknown reason');\r\n        setIsFilePicked(false);\r\n        setSelectedFile(null);\r\n        fetchlist();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error('Error:', error);\r\n        setIsFilePicked(false);\r\n        setSelectedFile(null);\r\n        setMessage('Failed import due to unknown reasons');\r\n\t\t\t});\r\n\t};\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  return(\r\n    <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n      {message && <div style={{color:\"red\"}}>{message}</div>}\r\n      <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', flexDirection: 'row', marginBottom: \"5px\"}}>\r\n        <form ><input type=\"file\" name=\"myfile\" id=\"myfile\" onChange={fileChangeHandler} hidden></input><label htmlFor=\"myfile\" className=\"file-input-label\">Choose File</label><Button type=\"submit\" disabled={!isFilePicked} onClick={handleUpload} color='primary' variant='contained'>Import Inventory</Button></form>\r\n        <div>\r\n            <TextField variant=\"outlined\" size=\"small\" margin=\"none\" type=\"text\" value={searchString} text='Search' style={{marginRight: '4px'}} onChange={(e) => setSearchString(e.target.value)} onKeyPress={e => e.key==\"Enter\" && updateSearchFilteredInventory(e.target.value)}></TextField>\r\n            <Button color=\"primary\" variant=\"contained\" onClick={e => updateSearchFilteredInventory(searchString)}>Search</Button>\r\n        </div>\r\n      </div>\r\n      <div style={{  width: '100%', minWidth:'600px', height:'calc(100vh - 100px)'}}>        \r\n        <DataGrid rows={searchFilteredInventory} columns={columns} components={{\r\n          Toolbar: GridToolbar,\r\n        }} disableColumnMenu loading={loading}/>\r\n      </div>\r\n    </div>      \r\n  );\r\n}\r\n\r\nexport default InventoryList;\r\n","import API from '../api-service'\r\nimport React, {useState, useEffect, useRef} from 'react';\r\nimport {Button, TextField, FormLabel, Typography, MenuItem, FormControl, InputLabel, Input, FormHelperText} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useCookies } from 'react-cookie'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({    \r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function OrderForm(props){\r\n\r\n  const classes = useStyles();\r\n  const [token] = useCookies(['mr-token']);\r\n  const [errormsg, setErrormsg] = useState({});\r\n  const [saved, setSaved, getSaved] = useState(false);\r\n  const [availableProducts, setavailableProducts] = useState([]);\r\n  const [availableStyles, setavailableStyles] = useState([]);\r\n  const [availableSizes, setavailableSizes] = useState([]);\r\n  const [availableColors, setavailableColors] = useState([]);\r\n  const [availableStores, setAvailableStores] = useState([]);\r\n  const styleref = useRef(null);\r\n  const sizeref = useRef(null);\r\n  const colorref = useRef(null);\r\n  const statuses = ['Unfulfilled', 'Processed', 'Printed', 'Shipped'];\r\n  let badData = false;\r\n  console.log(\"opened form\");\r\n\r\n  useEffect(() => {\r\n    API.getProductList(token['mr-token'])\r\n    .then(resp => resp.json())\r\n    .then(data => {\r\n      //console.log(data); \r\n      const sortBy = [ \r\n        {prop:'style', direction: 1}, \r\n        {prop:'size', direction: 1}, \r\n        {prop:'color', direction: 1},\r\n      ];\r\n\r\n      data.sort(function(a,b){\r\n        let i = 0, result = 0;\r\n        while(i < sortBy.length && result === 0) {\r\n          result = sortBy[i].direction*(a[ sortBy[i].prop ].toString() < b[ sortBy[i].prop ].toString() ? -1 : (a[ sortBy[i].prop ].toString() > b[ sortBy[i].prop ].toString() ? 1 : 0));\r\n          i++;\r\n        }\r\n        return result;\r\n      })\r\n      setavailableStyles([...new Set(data.map(i => i.style))]);\r\n      setavailableSizes([...new Set(data.map(i => i.size))]);\r\n      setavailableColors([...new Set(data.map(i => i.color))]);\r\n      setavailableProducts(data);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e)});\r\n\r\n    API.getStoreList(token['mr-token'])\r\n    .then(resp => resp.json())\r\n    .then(data => {\r\n      console.log(data); \r\n      \r\n      return setAvailableStores(data);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e)});\r\n  }, []\r\n  );\r\n\r\n  const handleStyleChange = (e) => {\r\n    console.log(styleref, sizeref, colorref);\r\n    const newstyle = e.target.value;\r\n    //sizeref.current.value = '';\r\n    //colorref.current.value = '';\r\n    console.log('style changed', newstyle);\r\n    setavailableSizes([...new Set(availableProducts.filter(p => p.style==newstyle).map(x => x.size))]);\r\n    setavailableColors([...new Set(availableProducts.filter(p => p.style==newstyle).map(x => x.color))]);\r\n  }\r\n\r\n  const handleSizeChange = (e) => {\r\n    console.log(styleref.current.value, sizeref.current.value, colorref.current.value);\r\n    const newstyle = styleref.current.value;\r\n    const newsize = e.target.value;\r\n    //colorref.current.value = '';\r\n    console.log('size changed', newsize);\r\n    setavailableColors([...new Set(availableProducts.filter(p => p.style==newstyle && p.size==newsize).map(x => x.color))]);\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log('submit clicked');\r\n    const formData = new FormData(e.target);    \r\n    let dataObject = {};    \r\n    formData.forEach((value, key) => dataObject[key] = value);\r\n    // let splitArray = dataObject['sfmId'].split(\"-\");\r\n    // dataObject['style'] = splitArray.slice(0, splitArray.length-2).join('-');\r\n    // dataObject['size'] = splitArray[splitArray.length-2];\r\n    // dataObject['color'] = splitArray[splitArray.length-1];\r\n    dataObject['sfmId'] = dataObject['style'] + '-' + dataObject['size'] + '-' + dataObject['color']\r\n    if(availableProducts.filter(p => p.sfmId==dataObject['sfmId']).length==0){\r\n      setErrormsg({'style': ['The style size color combination does not exist']});\r\n      return;\r\n    }\r\n    if(dataObject['saleDate'] == \"\")\r\n      dataObject['saleDate'] = null;\r\n    // if(dataObject['shipDate'] == \"\")\r\n    //   dataObject['shipDate'] = null;\r\n    // else\r\n    //   dataObject['shipDate'] = new Date(dataObject['shipDate']).toJSON();\r\n\r\n    // removed shipping fields from add order, providing defaults\r\n    dataObject['shipDate'] = null;\r\n    dataObject['customerPaidShipping'] = 0.0;\r\n    dataObject['trackingNumber'] = '';\r\n\r\n    console.log(\"sending data\");\r\n    console.log(dataObject);\r\n\r\n    if(props.mode=='update')\r\n      API.updateOrder(token['mr-token'], props.id, dataObject)\r\n      .then(resp => {\r\n        if(resp.status==400) {console.log(resp); setSaved(false); badData=true; } \r\n        if(resp.status==200) { setSaved(true); alert(\"Saved Successfully\"); props.setMode('none');}\r\n        return resp.json()\r\n      })\r\n      .then(data => {if(badData) setErrormsg(data)})\r\n      .catch(error => {console.log(\"api error\"); console.error(error)});\r\n    else\r\n      API.addOrder(token['mr-token'], dataObject)\r\n      .then(resp => {\r\n        console.log(\"saving\",resp.status);\r\n        if(resp.status==400) {console.log(resp); setSaved(false); badData=true; } \r\n        if(resp.status==201) { setSaved(true); alert(\"Saved Successfully\"); props.setMode('none');}\r\n        return resp.json()\r\n      })\r\n      .then(data => {if(badData) setErrormsg(data)})\r\n      .catch(error => {console.log(\"api error\"); console.error(error)});      \r\n  };\r\n\r\n  const handleGoBack = (e) => {\r\n    props.setMode('none');\r\n  }\r\n  \r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  if(saved)\r\n    return(props.fromPrinting ? <Redirect to='/printing'></Redirect> : <Redirect to='/orders'></Redirect>);\r\n  return(\r\n    <div>\r\n      <div style={{display:'flex', justifyContent: \"space-between\"}}>\r\n        <Typography variant=\"h4\">{props.mode=='update' ? 'Update':'Add'}</Typography>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleGoBack}>Go back</Button>\r\n      </div>\r\n    <form className={classes.form} onSubmit={handleSubmit} >\r\n      { Object.keys(errormsg).length!=0 && <FormLabel error={true} >Invalid data {errormsg['form']}</FormLabel>}      \r\n      \r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        select\r\n        fullWidth\r\n        id=\"store\"\r\n        label=\"Store Name\"\r\n        name=\"store\"\r\n        inputProps={{maxLength:50}}\r\n        helperText = {errormsg['store'] ? errormsg['store'][0]:''}\r\n        error = {errormsg['store'] ? true: false}\r\n        >\r\n        {availableStores.map((option) => (\r\n          <MenuItem key={option.storeCode} value={option.storeCode}>\r\n            {option.storeName}\r\n          </MenuItem>\r\n        ))}\r\n      </TextField>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        select\r\n        id=\"orderStatus\"\r\n        label=\"Order Status\"\r\n        name=\"orderStatus\"\r\n        inputProps={{maxLength:50}}\r\n        helperText = {errormsg['orderStatus'] ? errormsg['orderStatus'][0]:''}\r\n        error = {errormsg['orderStatus'] ? true: false}\r\n        defaultValue = 'Unfulfilled'\r\n        disabled = {true}\r\n      >\r\n      {statuses.map((option) => (\r\n        <MenuItem key={option} value={option}>\r\n          {option}\r\n        </MenuItem>\r\n      ))}\r\n      </TextField>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        fullWidth\r\n        id=\"saleDate\"\r\n        label=\"Sale Date\"\r\n        name=\"saleDate\"\r\n        type=\"date\"\r\n        helperText = {errormsg['saleDate'] ? errormsg['saleDate'][0]:''}\r\n        error = {errormsg['saleDate'] ? true: false}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"orderNo\"\r\n        label=\"Order No\"\r\n        name=\"orderNo\"\r\n        inputProps={{maxLength:20}}\r\n        helperText = {errormsg['orderNo'] ? errormsg['orderNo'][0]:''}\r\n        error = {errormsg['orderNo'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        id=\"recipientName\"\r\n        label=\"Recipient Name\"\r\n        name=\"recipientName\"\r\n        inputProps={{maxLength:50}}\r\n        helperText = {errormsg['recipientName'] ? errormsg['recipientName'][0]:''}\r\n        error = {errormsg['recipientName'] ? true: false}\r\n      />\r\n      \r\n\r\n      \r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        select\r\n        id=\"style\"\r\n        label=\"Style\"\r\n        name=\"style\"\r\n        inputRef={styleref}\r\n        onChange={handleStyleChange}\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['style'] ? errormsg['style'][0]:''}\r\n        error = {errormsg['style'] ? true: false}\r\n      >\r\n      {availableStyles.map((option) => (\r\n        <MenuItem key={option} value={option}>\r\n          {option}\r\n        </MenuItem>\r\n      ))}\r\n      </TextField>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        select\r\n        inputRef={sizeref}\r\n        id=\"size\"\r\n        label=\"Size\"\r\n        name=\"size\"\r\n        onChange={handleSizeChange}\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['size'] ? errormsg['size'][0]:''}\r\n        error = {errormsg['size'] ? true: false}\r\n        >\r\n        {availableSizes.map((option) => (\r\n          <MenuItem key={option} value={option}>\r\n            {option}\r\n          </MenuItem>\r\n        ))}\r\n      </TextField>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        required\r\n        fullWidth\r\n        select\r\n        inputRef={colorref}\r\n        id=\"color\"\r\n        label=\"Color\"\r\n        name=\"color\"\r\n        disabled = {props.mode=='update' ? true:false}\r\n        helperText = {errormsg['color'] ? errormsg['color'][0]:''}\r\n        error = {errormsg['color'] ? true: false}\r\n      >\r\n      {availableColors.map((option) => (\r\n        <MenuItem key={option} value={option}>\r\n          {option}\r\n        </MenuItem>\r\n      ))}\r\n      </TextField>\r\n      {/*<TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        select\r\n        required\r\n        id=\"sfmId\"\r\n        label=\"Style - Size - Color\"\r\n        name=\"sfmId\"\r\n        helperText = {errormsg['sfmId'] ? errormsg['sfmId'][0]:''}\r\n        error = {errormsg['sfmId'] ? true: false}\r\n      >\r\n      {availableProducts.map((option) => (\r\n        <MenuItem key={option.sfmId} value={option.sfmId}>\r\n          {option.sfmId}\r\n        </MenuItem>\r\n      ))}\r\n      </TextField>\r\n      */}\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"\r\n        fullWidth\r\n        id=\"design\"\r\n        label=\"design\"\r\n        name=\"design\"\r\n        inputProps={{maxLength:50}}\r\n        helperText = {errormsg['design'] ? errormsg['design'][0]:''}\r\n        error = {errormsg['design'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        required\r\n        select\r\n        id=\"processing\"\r\n        label=\"Processing\"\r\n        name=\"processing\"\r\n        inputProps={{maxLength:1}}\r\n        helperText = {errormsg['processing'] ? errormsg['processing'][0]:''}\r\n        error = {errormsg['processing'] ? true: false}\r\n        defaultValue = 'N'\r\n      >\r\n        <MenuItem key={0} value={'N'}>No</MenuItem>\r\n        <MenuItem key={1} value={'Y'}>Yes</MenuItem>\r\n      </TextField>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        select\r\n        id=\"printed\"\r\n        label=\"Printed\"\r\n        name=\"printed\"\r\n        inputProps={{maxLength:1}}\r\n        helperText = {errormsg['printed'] ? errormsg['printed'][0]:''}\r\n        error = {errormsg['printed'] ? true: false}\r\n        defaultValue = 'N'\r\n      >\r\n        <MenuItem key={0} value={'N'}>No</MenuItem>\r\n        <MenuItem key={1} value={'Y'}>Yes</MenuItem>\r\n      </TextField>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        required\r\n        select\r\n        id=\"shipped\"\r\n        label=\"Shipped\"\r\n        name=\"shipped\"\r\n        inputProps={{maxLength:1}}\r\n        helperText = {errormsg['shipped'] ? errormsg['shipped'][0]:''}\r\n        error = {errormsg['shipped'] ? true: false}\r\n        defaultValue = 'N'\r\n      >\r\n        <MenuItem key={0} value={'N'}>No</MenuItem>\r\n        <MenuItem key={1} value={'Y'}>Yes</MenuItem>\r\n      </TextField>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"sfmNotes\"\r\n        label=\"SFM Notes\"\r\n        name=\"sfmNotes\"\r\n        inputProps={{maxLength:5000}}\r\n        helperText = {errormsg['sfmNotes'] ? errormsg['sfmNotes'][0]:''}\r\n        error = {errormsg['sfmNotes'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"Buyer Name\"\r\n        label=\"buyerName\"\r\n        name=\"buyerName\"\r\n        inputProps={{maxLength:50}}\r\n        helperText = {errormsg['buyerName'] ? errormsg['buyerName'][0]:''}\r\n        error = {errormsg['buyerName'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        type=\"email\"\r\n        id=\"buyerEmail\"\r\n        label=\"Buyer Email\"\r\n        name=\"buyerEmail\"\r\n        inputProps={{maxLength:50}}\r\n        helperText = {errormsg['buyerEmail'] ? errormsg['buyerEmail'][0]:''}\r\n        error = {errormsg['buyerEmail'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"buyerComments\"\r\n        label=\"Buyer Comments\"\r\n        name=\"buyerComments\"\r\n        inputProps={{maxLength:5000}}\r\n        helperText = {errormsg['buyerComments'] ? errormsg['buyerComments'][0]:''}\r\n        error = {errormsg['buyerComments'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"giftMessages\"\r\n        label=\"Gift Messages\"\r\n        name=\"giftMessages\"\r\n        inputProps={{maxLength:5000}}\r\n        helperText = {errormsg['giftMessages'] ? errormsg['giftMessages'][0]:''}\r\n        error = {errormsg['giftMessages'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"sku\"\r\n        label=\"SKU\"\r\n        name=\"sku\"\r\n        inputProps={{maxLength:20}}\r\n        helperText = {errormsg['sku'] ? errormsg['sku'][0]:''}\r\n        error = {errormsg['sku'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"priorityShip\"\r\n        label=\"Priority Ship\"\r\n        name=\"priorityShip\"\r\n        inputProps={{maxLength:50}}\r\n        helperText = {errormsg['priorityShip'] ? errormsg['priorityShip'][0]:''}\r\n        error = {errormsg['priorityShip'] ? true: false}\r\n      />\r\n      {/*<TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"shipDate\"\r\n        label=\"shipDate\"\r\n        name=\"shipDate\"\r\n        type=\"datetime-local\"\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n        helperText = {errormsg['shipDate'] ? errormsg['shipDate'][0]:''}\r\n        error = {errormsg['shipDate'] ? true: false}\r\n      />\r\n      \r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"customerPaidShipping\"\r\n        label=\"Customer Paid Shipping $\"\r\n        name=\"customerPaidShipping\"\r\n        type=\"number\"\r\n        inputProps={{step:0.01, min:0, max:99999}}\r\n        helperText = {errormsg['customerPaidShipping'] ? errormsg['customerPaidShipping'][0]:''}\r\n        error = {errormsg['customerPaidShipping'] ? true: false}\r\n      />\r\n      <TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"trackingNumber\"\r\n        label=\"Tracking Number\"\r\n        name=\"trackingNumber\"\r\n        inputProps={{maxLength:30}}\r\n        helperText = {errormsg['trackingNumber'] ? errormsg['trackingNumber'][0]:''}\r\n        error = {errormsg['trackingNumber'] ? true: false}\r\n      />*/}\r\n      {/*<TextField\r\n        variant=\"outlined\"\r\n        margin=\"normal\"        \r\n        fullWidth\r\n        id=\"productAvailability\"\r\n        label=\"Product Availability\"\r\n        name=\"productAvailability\"\r\n        helperText = {errormsg['productAvailability'] ? errormsg['productAvailability'][0]:''}\r\n        error = {errormsg['productAvailability'] ? true: false}\r\n      />*/}\r\n      \r\n      <Button\r\n        type=\"submit\"\r\n        fullWidth\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        className={classes.submit}\r\n      >\r\n        Submit\r\n      </Button>\r\n    </form>\r\n    </div>); \r\n}","import API from '../api-service'\r\nimport React, {useState, useEffect, useRef} from 'react';\r\nimport {Button, TextField, FormLabel, Typography, MenuItem, FormControl, InputLabel, Input, FormHelperText} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useCookies } from 'react-cookie'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({    \r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function OrderUpdateForm(props){\r\n\r\n  const classes = useStyles();\r\n  const [token] = useCookies(['mr-token']);\r\n  const [errormsg, setErrormsg] = useState({});\r\n  const [saved, setSaved, getSaved] = useState(false);\r\n  const [data, setData] = useState({});\r\n  const [dataReturned, setDataReturned] = useState(false);\r\n  const [availableProducts, setavailableProducts] = useState([]);\r\n  const [availableStores, setAvailableStores] = useState([]);\r\n  const [availableStyles, setavailableStyles] = useState([]);\r\n  const [availableSizes, setavailableSizes] = useState([]);\r\n  const [availableColors, setavailableColors] = useState([]);\r\n  const styleref = useRef(null);\r\n  const sizeref = useRef(null);\r\n  const colorref = useRef(null);\r\n  const statuses = ['Unfulfilled', 'Processed', 'Printed', 'Shipped', 'Cancelled', 'On Hold'];\r\n\r\n\r\n  let badData = false;\r\n  console.log(\"opened form\");\r\n  const usertype = props.usertype;\r\n\r\n  useEffect(() => {\r\n    API.getOrder(token['mr-token'], props.id)\r\n    .then(resp => resp.json())\r\n    .then(result => {\r\n      console.log(\"initializing formdata\");\r\n      setData(result);\r\n      setDataReturned(true);\r\n    })\r\n    .catch(e =>{console.log(\"api error\");console.error(e)});\r\n\r\n    API.getProductList(token['mr-token'])\r\n    .then(resp => resp.json())\r\n    .then(data => {\r\n      //console.log(data); \r\n      const sortBy = [ \r\n        {prop:'style', direction: 1}, \r\n        {prop:'size', direction: 1}, \r\n        {prop:'color', direction: 1},\r\n      ];\r\n\r\n      data.sort(function(a,b){\r\n        let i = 0, result = 0;\r\n        while(i < sortBy.length && result === 0) {\r\n          result = sortBy[i].direction*(a[ sortBy[i].prop ].toString() < b[ sortBy[i].prop ].toString() ? -1 : (a[ sortBy[i].prop ].toString() > b[ sortBy[i].prop ].toString() ? 1 : 0));\r\n          i++;\r\n        }\r\n        return result;\r\n      })\r\n      setavailableStyles([...new Set(data.map(i => i.style))]);\r\n      setavailableSizes([...new Set(data.map(i => i.size))]);\r\n      setavailableColors([...new Set(data.map(i => i.color))]);\r\n      setavailableProducts(data);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e)});\r\n\r\n    API.getStoreList(token['mr-token'])\r\n    .then(resp => resp.json())\r\n    .then(data => {\r\n      //console.log(data); \r\n      \r\n      setAvailableStores(data);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e)});\r\n  }, []\r\n  );\r\n\r\n\r\n  const handleClientFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);    \r\n    let dataObject = {};    \r\n    formData.forEach((value, key) => dataObject[key] = value);\r\n    // let splitArray = dataObject['sfmId'].split(\"-\");\r\n    // dataObject['style'] = splitArray.slice(0, splitArray.length-2).join('-');\r\n    // dataObject['size'] = splitArray[splitArray.length-2];\r\n    // dataObject['color'] = splitArray[splitArray.length-1];\r\n    dataObject['sfmId'] = dataObject['style'] + '-' + dataObject['size'] + '-' + dataObject['color']\r\n    if(availableProducts.filter(p => p.sfmId==dataObject['sfmId']).length==0){\r\n      setErrormsg({'style': ['The style size color combination does not exist']});\r\n      return;\r\n    }\r\n    if(dataObject['shipDate']!='')\r\n      dataObject['shipDate'] = new Date(dataObject['shipDate']).toJSON();\r\n    dataObject = {...data, ...dataObject}\r\n    console.log(dataObject);\r\n    API.updateOrder(token['mr-token'], props.id, dataObject)\r\n    .then(resp => {\r\n      if(resp.status==400) {console.log(resp); setSaved(false); badData=true; } \r\n      if(resp.status==200) { setSaved(true); alert(\"Saved Successfully\"); props.setMode('none');}\r\n      return resp.json()\r\n    })\r\n    .then(data => {if(badData) setErrormsg(data)})\r\n    .catch(error => {console.log(\"api error\"); console.error(error)});\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);    \r\n    let dataObject = {};    \r\n    formData.forEach((value, key) => dataObject[key] = value);\r\n    // let splitArray = dataObject['sfmId'].split(\"-\");\r\n    // dataObject['style'] = splitArray.slice(0, splitArray.length-2).join('-');\r\n    // dataObject['size'] = splitArray[splitArray.length-2];\r\n    // dataObject['color'] = splitArray[splitArray.length-1];\r\n    dataObject['sfmId'] = dataObject['style'] + '-' + dataObject['size'] + '-' + dataObject['color']\r\n    if(availableProducts.filter(p => p.sfmId==dataObject['sfmId']).length==0){\r\n      setErrormsg({'style': ['The style size color combination does not exist']});\r\n      return;\r\n    }\r\n    if(dataObject['saleDate'] == \"\")\r\n      dataObject['saleDate'] = null;\r\n    if(dataObject['shipDate'] == \"\")\r\n      dataObject['shipDate'] = null;\r\n    else\r\n      dataObject['shipDate'] = new Date(dataObject['shipDate']).toJSON();// tojson converts to utc string\r\n    console.log(\"sending data\");\r\n    console.log(dataObject);\r\n\r\n    API.updateOrder(token['mr-token'], props.id, dataObject)\r\n    .then(resp => {\r\n      if(resp.status==400) {console.log(resp); setSaved(false); badData=true; } \r\n      if(resp.status==200) { setSaved(true); alert(\"Saved Successfully\"); props.setMode('none');}\r\n      return resp.json()\r\n    })\r\n    .then(data => {if(badData) setErrormsg(data)})\r\n    .catch(error => {console.log(\"api error\");\r\n      console.error(error);\r\n      setErrormsg({'form': 'Something went wrong. Please refresh.'})\r\n    });\r\n  };\r\n\r\n  const handleGoBack = (e) => {\r\n    props.setMode('none');\r\n  }\r\n\r\n  const handleStyleChange = (e) => {\r\n    console.log(styleref, sizeref, colorref);\r\n    const newstyle = e.target.value;\r\n    //sizeref.current.value = '';\r\n    //colorref.current.value = '';\r\n    console.log('style changed', newstyle);\r\n    setavailableSizes([...new Set(availableProducts.filter(p => p.style==newstyle).map(x => x.size))]);\r\n    setavailableColors([...new Set(availableProducts.filter(p => p.style==newstyle).map(x => x.color))]);\r\n  }\r\n\r\n  const handleSizeChange = (e) => {\r\n    console.log(styleref.current.value, sizeref.current.value, colorref.current.value);\r\n    const newstyle = styleref.current.value;\r\n    const newsize = e.target.value;\r\n    //colorref.current.value = '';\r\n    console.log('size changed', newsize);\r\n    setavailableColors([...new Set(availableProducts.filter(p => p.style==newstyle && p.size==newsize).map(x => x.color))]);\r\n  }\r\n\r\n  let dt\r\n  if(data['shipDate']!=null){\r\n    dt = new Date(data['shipDate']);\r\n    dt.setMinutes(dt.getMinutes() - dt.getTimezoneOffset());\r\n  }    \r\n  const defaultShipDate = data['shipDate']==null ? '': dt.toISOString().substr(0,16);\r\n\r\n  console.log('rendering');\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  if(saved)\r\n    return(props.fromPrinting ? <Redirect to='/printing'></Redirect> : <Redirect to='/orders'></Redirect>);\r\n  if(!dataReturned)\r\n    return (<div>Loading</div>)\r\n  return(\r\n    <div>\r\n      <div style={{display:'flex', justifyContent: \"space-between\"}}>\r\n        <Typography variant=\"h4\" >Update</Typography>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleGoBack}>Go back</Button>\r\n      </div>\r\n      {usertype!=0 ?\r\n        <form className={classes.form} onSubmit={handleSubmit} >\r\n          <FormLabel>Order Id: {data['orderId']} ------ Order No: {data['orderNo']}</FormLabel>\r\n          { Object.keys(errormsg).length!=0 && <FormLabel error={true} >Invalid data {errormsg['form']}</FormLabel>}      \r\n          \r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            select\r\n            fullWidth\r\n            id=\"store\"\r\n            label=\"Store Name\"\r\n            name=\"store\"\r\n            inputProps={{maxLength:50}}\r\n            helperText = {errormsg['store'] ? errormsg['store'][0]:''}\r\n            error = {errormsg['store'] ? true: false}\r\n            defaultValue = {data['store']}\r\n            >\r\n            {availableStores.map((option) => (\r\n              <MenuItem key={option.storeCode} value={option.storeCode}>\r\n                {option.storeName}\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            select\r\n            id=\"orderStatus\"\r\n            label=\"Order Status\"\r\n            name=\"orderStatus\"\r\n            inputProps={{maxLength:15}}\r\n            helperText = {errormsg['orderStatus'] ? errormsg['orderStatus'][0]:''}\r\n            error = {errormsg['orderStatus'] ? true: false}\r\n            defaultValue = {data['orderStatus']}\r\n          >\r\n          {statuses.map((option) => (\r\n            <MenuItem key={option} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            id=\"saleDate\"\r\n            label=\"Sale Date\"\r\n            name=\"saleDate\"\r\n            type=\"date\"\r\n            helperText = {errormsg['saleDate'] ? errormsg['saleDate'][0]:''}\r\n            error = {errormsg['saleDate'] ? true: false}\r\n            defaultValue = {data['saleDate']}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"orderNo\"\r\n            label=\"Order No\"\r\n            name=\"orderNo\"\r\n            inputProps={{maxLength:20}}\r\n            helperText = {errormsg['orderNo'] ? errormsg['orderNo'][0]:''}\r\n            error = {errormsg['orderNo'] ? true: false}\r\n            defaultValue = {data['orderNo']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"recipientName\"\r\n            label=\"Recipient Name\"\r\n            name=\"recipientName\"\r\n            inputProps={{maxLength:50}}\r\n            helperText = {errormsg['recipientName'] ? errormsg['recipientName'][0]:''}\r\n            error = {errormsg['recipientName'] ? true: false}\r\n            defaultValue = {data['recipientName']}\r\n          />\r\n          \r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            select\r\n            inputRef={styleref}\r\n            id=\"style\"\r\n            label=\"Style\"\r\n            name=\"style\"\r\n            onChange={handleStyleChange}\r\n            helperText = {errormsg['style'] ? errormsg['style'][0]:''}\r\n            error = {errormsg['style'] ? true: false}\r\n            defaultValue = {data['style']}\r\n          >\r\n          {availableStyles.map((option) => (\r\n            <MenuItem key={option} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            select\r\n            inputRef={sizeref}\r\n            onChange={handleSizeChange}\r\n            id=\"size\"\r\n            label=\"Size\"\r\n            name=\"size\"\r\n            helperText = {errormsg['size'] ? errormsg['size'][0]:''}\r\n            error = {errormsg['size'] ? true: false}\r\n            defaultValue = {data['size']}\r\n            >\r\n            {availableSizes.map((option) => (\r\n              <MenuItem key={option} value={option}>\r\n                {option}\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            select\r\n            inputRef={colorref}\r\n            id=\"color\"\r\n            label=\"Color\"\r\n            name=\"color\"\r\n            helperText = {errormsg['color'] ? errormsg['color'][0]:''}\r\n            error = {errormsg['color'] ? true: false}\r\n            defaultValue = {data['color']}\r\n          >\r\n          {availableColors.map((option) => (\r\n            <MenuItem key={option} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n          </TextField>\r\n          {/*<TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            select\r\n            required\r\n            id=\"sfmId\"\r\n            label=\"Style - Size - Color\"\r\n            name=\"sfmId\"\r\n            helperText = {errormsg['sfmId'] ? errormsg['sfmId'][0]:''}\r\n            error = {errormsg['sfmId'] ? true: false}\r\n            defaultValue = {data['sfmId']}\r\n          >\r\n          {availableProducts.map((option) => (\r\n            <MenuItem key={option.sfmId} value={option.sfmId}>\r\n              {option.sfmId}\r\n            </MenuItem>\r\n          ))}\r\n          </TextField>*/}\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            id=\"design\"\r\n            label=\"design\"\r\n            name=\"design\"\r\n            inputProps={{maxLength:50}}\r\n            helperText = {errormsg['design'] ? errormsg['design'][0]:''}\r\n            error = {errormsg['design'] ? true: false}\r\n            defaultValue = {data['design']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            required\r\n            select\r\n            id=\"processing\"\r\n            label=\"Processing\"\r\n            name=\"processing\"\r\n            inputProps={{maxLength:1}}\r\n            helperText = {errormsg['processing'] ? errormsg['processing'][0]:''}\r\n            error = {errormsg['processing'] ? true: false}\r\n            defaultValue = {data['processing']}\r\n          >\r\n            <MenuItem key={0} value={'N'}>No</MenuItem>\r\n            <MenuItem key={1} value={'Y'}>Yes</MenuItem>\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            select\r\n            id=\"printed\"\r\n            label=\"Printed\"\r\n            name=\"printed\"\r\n            inputProps={{maxLength:1}}\r\n            helperText = {errormsg['printed'] ? errormsg['printed'][0]:''}\r\n            error = {errormsg['printed'] ? true: false}\r\n            defaultValue = {data['printed']}\r\n          >\r\n            <MenuItem key={0} value={'N'}>No</MenuItem>\r\n            <MenuItem key={1} value={'Y'}>Yes</MenuItem>\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            required\r\n            select\r\n            id=\"shipped\"\r\n            label=\"Shipped\"\r\n            name=\"shipped\"\r\n            inputProps={{maxLength:1}}\r\n            helperText = {errormsg['shipped'] ? errormsg['shipped'][0]:''}\r\n            error = {errormsg['shipped'] ? true: false}\r\n            defaultValue = {data['shipped']}\r\n          >\r\n            <MenuItem key={0} value={'N'}>No</MenuItem>\r\n            <MenuItem key={1} value={'Y'}>Yes</MenuItem>\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"sfmNotes\"\r\n            label=\"SFM Notes\"\r\n            name=\"sfmNotes\"\r\n            inputProps={{maxLength:5000}}\r\n            helperText = {errormsg['sfmNotes'] ? errormsg['sfmNotes'][0]:''}\r\n            error = {errormsg['sfmNotes'] ? true: false}\r\n            defaultValue = {data['sfmNotes']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"Buyer Name\"\r\n            label=\"buyerName\"\r\n            name=\"buyerName\"\r\n            inputProps={{maxLength:50}}\r\n            helperText = {errormsg['buyerName'] ? errormsg['buyerName'][0]:''}\r\n            error = {errormsg['buyerName'] ? true: false}\r\n            defaultValue = {data['buyerName']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            type=\"email\"\r\n            id=\"buyerEmail\"\r\n            label=\"Buyer Email\"\r\n            name=\"buyerEmail\"\r\n            inputProps={{maxLength:50}}\r\n            helperText = {errormsg['buyerEmail'] ? errormsg['buyerEmail'][0]:''}\r\n            error = {errormsg['buyerEmail'] ? true: false}\r\n            defaultValue = {data['buyerEmail']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"buyerComments\"\r\n            label=\"Buyer Comments\"\r\n            name=\"buyerComments\"\r\n            inputProps={{maxLength:5000}}\r\n            helperText = {errormsg['buyerComments'] ? errormsg['buyerComments'][0]:''}\r\n            error = {errormsg['buyerComments'] ? true: false}\r\n            defaultValue = {data['buyerComments']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"giftMessages\"\r\n            label=\"Gift Messages\"\r\n            name=\"giftMessages\"\r\n            inputProps={{maxLength:5000}}\r\n            helperText = {errormsg['giftMessages'] ? errormsg['giftMessages'][0]:''}\r\n            error = {errormsg['giftMessages'] ? true: false}\r\n            defaultValue = {data['giftMessages']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"sku\"\r\n            label=\"SKU\"\r\n            name=\"sku\"\r\n            inputProps={{maxLength:20}}\r\n            helperText = {errormsg['sku'] ? errormsg['sku'][0]:''}\r\n            error = {errormsg['sku'] ? true: false}\r\n            defaultValue = {data['sku']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"shipDate\"\r\n            label=\"shipDate\"\r\n            name=\"shipDate\"\r\n            type=\"datetime-local\"\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n            helperText = {errormsg['shipDate'] ? errormsg['shipDate'][0]:''}\r\n            error = {errormsg['shipDate'] ? true: false}\r\n            defaultValue = {defaultShipDate}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"priorityShip\"\r\n            label=\"priorityShip\"\r\n            name=\"priorityShip\"\r\n            inputProps={{maxLength:50}}\r\n            helperText = {errormsg['priorityShip'] ? errormsg['priorityShip'][0]:''}\r\n            error = {errormsg['priorityShip'] ? true: false}\r\n            defaultValue = {data['priorityShip']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"customerPaidShipping\"\r\n            label=\"Customer Paid Shipping $\"\r\n            name=\"customerPaidShipping\"\r\n            type=\"number\"\r\n            inputProps={{step:0.01, min:0, max: 99999}}\r\n            helperText = {errormsg['customerPaidShipping'] ? errormsg['customerPaidShipping'][0]:''}\r\n            error = {errormsg['customerPaidShipping'] ? true: false}\r\n            defaultValue = {data['customerPaidShipping']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"trackingNumber\"\r\n            label=\"Tracking Number\"\r\n            name=\"trackingNumber\"\r\n            inputProps={{maxLength:30}}\r\n            helperText = {errormsg['trackingNumber'] ? errormsg['trackingNumber'][0]:''}\r\n            error = {errormsg['trackingNumber'] ? true: false}\r\n            defaultValue = {data['trackingNumber']}\r\n          />\r\n          {/*<TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            id=\"productAvailability\"\r\n            label=\"Product Availability\"\r\n            name=\"productAvailability\"\r\n            helperText = {errormsg['productAvailability'] ? errormsg['productAvailability'][0]:''}\r\n            error = {errormsg['productAvailability'] ? true: false}\r\n          />*/}\r\n          \r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            Submit\r\n          </Button>\r\n        </form>\r\n        :\r\n        <form className={classes.form} onSubmit={handleClientFormSubmit} >\r\n          { Object.keys(errormsg).length!=0 && <FormLabel error={true} >Invalid data {errormsg['form']}</FormLabel>}      \r\n          <FormLabel>Order Id: {data['orderId']} ------ Order No: {data['orderNo']}</FormLabel>\r\n          {/*<TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"        \r\n            fullWidth\r\n            select\r\n            required\r\n            id=\"sfmId\"\r\n            label=\"Style - Size - Color\"\r\n            name=\"sfmId\"\r\n            helperText = {errormsg['sfmId'] ? errormsg['sfmId'][0]:''}\r\n            error = {errormsg['sfmId'] ? true: false}\r\n            defaultValue = {data['sfmId']}\r\n          >\r\n          {availableProducts.map((option) => (\r\n            <MenuItem key={option.sfmId} value={option.sfmId}>\r\n              {option.sfmId}\r\n            </MenuItem>\r\n          ))}\r\n          </TextField>*/}\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            id=\"saleDate\"\r\n            label=\"Sale Date\"\r\n            name=\"saleDate\"\r\n            type=\"date\"\r\n            helperText = {errormsg['saleDate'] ? errormsg['saleDate'][0]:''}\r\n            error = {errormsg['saleDate'] ? true: false}\r\n            defaultValue = {data['saleDate']}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"orderNo\"\r\n            label=\"Order No\"\r\n            name=\"orderNo\"\r\n            inputProps={{maxLength:20}}\r\n            helperText = {errormsg['orderNo'] ? errormsg['orderNo'][0]:''}\r\n            error = {errormsg['orderNo'] ? true: false}\r\n            defaultValue = {data['orderNo']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"recipientName\"\r\n            label=\"Recipient Name\"\r\n            name=\"recipientName\"\r\n            inputProps={{maxLength:50}}\r\n            helperText = {errormsg['recipientName'] ? errormsg['recipientName'][0]:''}\r\n            error = {errormsg['recipientName'] ? true: false}\r\n            defaultValue = {data['recipientName']}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            select\r\n            inputRef={styleref}\r\n            id=\"style\"\r\n            label=\"Style\"\r\n            name=\"style\"\r\n            onChange={handleStyleChange}\r\n            helperText = {errormsg['style'] ? errormsg['style'][0]:''}\r\n            error = {errormsg['style'] ? true: false}\r\n            defaultValue = {data['style']}\r\n          >\r\n          {availableStyles.map((option) => (\r\n            <MenuItem key={option} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            select\r\n            inputRef={sizeref}\r\n            id=\"size\"\r\n            label=\"Size\"\r\n            name=\"size\"\r\n            onChange={handleSizeChange}\r\n            helperText = {errormsg['size'] ? errormsg['size'][0]:''}\r\n            error = {errormsg['size'] ? true: false}\r\n            defaultValue = {data['size']}\r\n            >\r\n            {availableSizes.map((option) => (\r\n              <MenuItem key={option} value={option}>\r\n                {option}\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            select\r\n            inputRef={colorref}\r\n            id=\"color\"\r\n            label=\"Color\"\r\n            name=\"color\"\r\n            helperText = {errormsg['color'] ? errormsg['color'][0]:''}\r\n            error = {errormsg['color'] ? true: false}\r\n            defaultValue = {data['color']}\r\n          >\r\n          {availableColors.map((option) => (\r\n            <MenuItem key={option} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n          </TextField>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            id=\"design\"\r\n            label=\"design\"\r\n            name=\"design\"\r\n            helperText = {errormsg['design'] ? errormsg['design'][0]:''}\r\n            error = {errormsg['design'] ? true: false}\r\n            defaultValue = {data['design']}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            Submit\r\n          </Button>\r\n        </form>\r\n      }\r\n    </div>); \r\n}","import '../App.css';\r\nimport React, {useState, useEffect} from 'react'\r\nimport { DataGrid, GridToolbar, GridRowsProp, GridColDef } from '@material-ui/data-grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport API from '../api-service'\r\nimport { useCookies } from 'react-cookie'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Divider, MenuItem, Button, TextField, Dialog, DialogActions, DialogContent, DialogTitle, DialogContentText, createChainedFunction, IconButton } from '@material-ui/core';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport OrderForm from './OrderForm';\r\nimport OrderUpdateForm from './OrderUpdateForm';\r\nimport GridCellExpand from './GridCellExpand';\r\nimport AuthenticationService from '../authentication-service';\r\n\r\n\r\nconst formatDate = (dt) => {\r\n  const dd = String(dt.getDate()).padStart(2, '0');\r\n  const mm = String(dt.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n  const yy = String(dt.getFullYear()).substr(2,2);\r\n  return mm + '/' + dd + '/' + yy;\r\n}\r\n\r\nconst formatDateTime = (dt) => {\r\n  const dd = String(dt.getDate()).padStart(2, '0');\r\n  const mm = String(dt.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n  const yy = String(dt.getFullYear()).substr(2,2);\r\n  const hh = String(dt.getHours()).padStart(2, '0');\r\n  const minutes = String(dt.getMinutes()).padStart(2, '0');\r\n  return mm + '/' + dd + '/' + yy + ' ' + hh + ':' + minutes;\r\n}\r\n\r\nconst currencyFormatter = new Intl.NumberFormat('en-US', {\r\n  style: 'currency',\r\n  currency: 'USD',\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    '& .cold': {\r\n      backgroundColor: '#b9d5ff91',\r\n      color: '#1a3e72',\r\n    },\r\n    '& .hot': {\r\n      backgroundColor: '#ff943975',\r\n      color: '#1a3e72',\r\n    },\r\n    '& .compactcell': {\r\n      padding: '0px 8px'\r\n    },\r\n  },\r\n  searchInput: {\r\n    marginRight: '4px'\r\n  }\r\n});\r\n\r\n// function renderCellExpand(params) {\r\n//   return (\r\n//     <GridCellExpand\r\n//       value={params.value ? params.value.toString() : ''}\r\n//       width={300}\r\n//     />\r\n//   );\r\n// }\r\n\r\nconst columns = [\r\n  { field: 'orderId', headerName: 'Id', width: 60, cellClassName: 'compactcell', },\r\n  { field: 'storeName', headerName: 'Store Name', width: 150, cellClassName: 'compactcell',\r\n    renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />)},\r\n  { field: 'orderStatus', headerName: 'Status', cellClassName: 'compactcell', width: 110 },\r\n  { field: 'saleDate', headerName: 'Sale Date', cellClassName: 'compactcell', type: 'date', editable:true, width: 120,\r\n      valueFormatter: (params) => { if(params.value) return formatDate(new Date(params.value))}},\r\n  { field: 'orderNo', headerName: 'Order No', cellClassName: 'compactcell', width: 150 },\r\n  { field: 'orderCount', headerName: 'Count', cellClassName: 'compactcell', width: 60, headerClassName: 'compactcell', },\r\n  { field: 'recipientName', headerName: 'Recipient Name', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />), cellClassName: 'compactcell' },\r\n  { field: 'style', headerName: 'Style', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />), cellClassName: 'compactcell'},\r\n  { field: 'size', headerName: 'Size', width: 80, cellClassName: 'compactcell' },\r\n  { field: 'color', headerName: 'Color', width: 110, renderCell: (params) => (<GridCellExpand limit={10} value={params.value ? params.value.toString() : ''} width={300} />), cellClassName: 'compactcell' },\r\n  { field: 'design', headerName: 'Design', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />), cellClassName: 'compactcell' },\r\n  { field: 'productAvailability', headerName: 'Product Availability', width: 120, cellClassName: 'compactcell' },\r\n  { field: 'processing', headerName: 'Processing', width: 80 , cellClassName: 'compactcell'},\r\n  { field: 'printed', headerName: 'Printed', width: 80, cellClassName: 'compactcell' },\r\n  { field: 'shipped', headerName: 'Shipped', width: 90, cellClassName: 'compactcell' },\r\n  { field: 'sfmNotes', headerName: 'SFM Notes', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={500} />), cellClassName: 'compactcell' },\r\n  { field: 'buyerName', headerName: 'Buyer Name', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />), cellClassName: 'compactcell'},\r\n  { field: 'buyerEmail', headerName: 'Buyer Email', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={500} />), cellClassName: 'compactcell' },\r\n  { field: 'buyerComments', headerName: 'Buyer Comments', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={500} />), cellClassName: 'compactcell' },\r\n  { field: 'giftMessages', headerName: 'Gift Messages', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />), cellClassName: 'compactcell' },\r\n  { field: 'sfmId', headerName: 'SFM ID', width: 300, renderCell: (params) => (<GridCellExpand limit={28} value={params.value ? params.value.toString() : ''} width={400} />), cellClassName: 'compactcell' },\r\n  { field: 'sku', headerName: 'SKU', width: 200, renderCell: (params) => (<GridCellExpand limit={19} value={params.value ? params.value.toString() : ''} width={300} />), cellClassName: 'compactcell' },\r\n  { field: 'shipDate', headerName: 'Ship Date', type: 'datetime', editable:true, width: 150, cellClassName: 'compactcell',\r\n    valueFormatter: (params) => { if(params.value) return formatDateTime(new Date(params.value))} },\r\n  { field: 'priorityShip', headerName: 'Priority Ship', width: 110, editable:true, cellClassName: 'compactcell'  },\r\n  { field: 'customerPaidShipping', headerName: 'Customer Paid Shipping', width: 150, type: 'number', cellClassName: 'compactcell',\r\n    editable:true,\r\n    valueFormatter: ({ value }) => currencyFormatter.format(Number(value))\r\n  },\r\n  { field: 'trackingNumber', headerName: 'Tracking Number', width: 200, editable:true, cellClassName: 'compactcell'}\r\n];\r\n\r\nfunction OrderList(props){\r\n  const classes = useStyles();\r\n\r\n  const [orders, setOrders] = useState([]);\r\n  const [searchString, setSearchString] = useState('');\r\n  const [token] = useCookies(['mr-token']);\r\n  const [mode, setMode] = useState('none');\r\n  const [open, setOpen] = useState(false);\r\n  const [totalcount, setTotalCount] = useState(0);\r\n  const [page, setPage] = useState(0);\r\n  const [mySelectedRows, setMySelectedRows] = useState([]);\r\n  const [myEditedRows, setMyEditedRows] = useState([]);\r\n\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\tconst [isFilePicked, setIsFilePicked] = useState(false);\r\n  const [selectedShippingFile, setSelectedShippingFile] = useState(null);\r\n  const [isShippingFilePicked, setIsShippingFilePicked] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const usertype = props.usertype;\r\n\r\n\tconst fileChangeHandler = (event) => {\r\n    console.log(event);\r\n    if(event.target.files.length==1){\r\n      setSelectedFile(event.target.files[0]);\r\n      console.log(\"order file is: \", event.target.files[0]);\r\n      event.target.labels[0].textContent = event.target.files[0].name\r\n      setIsFilePicked(true);\r\n    }\r\n    else{\r\n      setSelectedFile(null);\r\n      setIsFilePicked(false);\r\n    }\r\n\t\t\r\n\t};\r\n\r\n  const shippingFileChangeHandler = (event) => {\r\n    if(event.target.files.length==1){\r\n      setSelectedShippingFile(event.target.files[0]);\r\n      console.log(\"ship file is: \", event.target.files[0]);\r\n      event.target.labels[0].textContent = event.target.files[0].name\r\n      setIsShippingFilePicked(true);\r\n    }\r\n    else{\r\n      setSelectedShippingFile(null);\r\n      setIsShippingFilePicked(false);\r\n    }\r\n\t};\r\n\r\n  const handleRowSelected = (s) => {\r\n    console.log(s);\r\n    let rows = [...s.api.current.getSelectedRows().values()];\r\n    console.log('selected rows ere : ', rows);\r\n    setMyEditedRows(rows);\r\n  }\r\n\r\n  const handleMassUpdate = (e) => {\r\n    console.log('updating the orders', myEditedRows);\r\n\r\n    async function updateTheOrders(){\r\n      let updateErrors = []\r\n      for(let row of myEditedRows){\r\n        try{\r\n          const updateOrdersAsync = async () => { return API.updateOrder(token['mr-token'], row.orderId, row)}\r\n          let resp = await updateOrdersAsync();\r\n          if(resp.status==200){\r\n            console.log(`updated order with id ${row.orderId}`);\r\n          }\r\n          else if(resp.status==400){\r\n            console.log(`Invalid Update for order with id ${row.orderId}`);\r\n            let result = await resp.json()\r\n            let orderId = row.orderId\r\n            updateErrors.push({orderId, result});\r\n          }\r\n          else\r\n            throw \"server error\";\r\n        }\r\n        catch(err){\r\n          console.log(`Something went wrong for order id ${row.orderId}`);\r\n          console.error(err);\r\n          updateErrors.push(`Something went wrong for order id ${row.orderId}`);\r\n        }\r\n      }\r\n\r\n      if(updateErrors.length>0)\r\n        setMessage('Some rows were not updated\\n' + JSON.stringify(updateErrors));\r\n      else\r\n        setMessage('Updated successfully');\r\n    }\r\n\r\n    updateTheOrders();\r\n      \r\n      //fetchlist();\r\n  }\r\n\r\n  // needed to update myEditedRows if cell value changed after selection\r\n  const handleEditCellChangeCommitted = React.useCallback(\r\n    ({ id, field, props }) => {\r\n        console.log('cell commit', myEditedRows, props);\r\n        const data = props; // Fix eslint value is missing in prop-types for JS files\r\n        const updatedRows = myEditedRows.map((row) => {\r\n          const obj = {};\r\n          obj[field] = data.value;\r\n          if (row.orderId === id) {\r\n            return { ...row, ...obj};\r\n          }\r\n          return row;\r\n        });\r\n        setMyEditedRows(updatedRows);\r\n        console.log('cell commit after ', updatedRows);\r\n    },\r\n    [myEditedRows],\r\n  );\r\n\r\n\tconst handleUpload = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    if(isFilePicked && selectedFile.name.search(/order/i) == -1){\r\n      setMessage('Please make sure you have selected orders file. File name should contain the word order');\r\n      return;\r\n    }\r\n\r\n    if(isShippingFilePicked && selectedShippingFile.name.search(/ship/i) == -1){\r\n      setMessage('Please make sure you have selected shipping file. File name should contain the word ship');\r\n      return;\r\n    }\r\n\r\n    let res\r\n\r\n    if(isFilePicked){\r\n      formData.append('ordersFile', selectedFile);\r\n\t\t  res = API.uploadOrdersFile(token['mr-token'], formData)\r\n    }\r\n\r\n    else if(isShippingFilePicked){\r\n      formData.append('shippingFile', selectedShippingFile);\r\n\t\t  res = API.uploadShippingFile(token['mr-token'], formData)\r\n    }\r\n\r\n    else{\r\n      setMessage('Please select a file');\r\n      return;\r\n    }\r\n\t\t\r\n\t\t\tres.then((response) => response.json())\r\n\t\t\t.then((result) => {\r\n        if(result['errors']){          \r\n          if(result['errors'].length==0){\r\n            setMessage(result['msg']);\r\n            console.log(result['msg']);\r\n          }\r\n          else{\r\n            setMessage(result['msg'] + ' (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)');\r\n            console.log('Following rows were not imported: ');\r\n            console.log(result['errors']);\r\n          }\r\n        }\r\n\t\t\t\telse setMessage('Failed import due to unknown reason');\r\n        setIsFilePicked(false);\r\n        setSelectedFile(null);\r\n        setIsShippingFilePicked(false);\r\n        setSelectedShippingFile(null);\r\n        fetchlist();\r\n        setMode('none');\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error('Error:', error);\r\n        setIsFilePicked(false);\r\n        setSelectedFile(null);\r\n        setIsShippingFilePicked(false);\r\n        setSelectedShippingFile(null);\r\n        setMessage('Failed import due to unknown reasons');\r\n\t\t\t});\r\n\t};\r\n\r\n  const handleAddClick = (e) => {setMode('add')}\r\n  const handleUpdateClick = (e) => {setMode('update')}\r\n  const handleDeleteClick = (e) => {setOpen(true)}\r\n  const handleClose = (e) => {setOpen(false)}\r\n  const handleDeleteConfirm = (e) => {\r\n    console.log('u confirmed delete');\r\n      mySelectedRows.forEach( rowId => {\r\n        API.deleteOrder(token['mr-token'], rowId)\r\n        .then( resp => {\r\n          if(resp.status==200 || resp.status==204)\r\n            console.log(`deleted order with id ${rowId}`);\r\n          else\r\n            console.log(`Failed to delete order with id ${rowId}`);\r\n        })\r\n        .catch(e => console.error(`could not delete order id ${rowId}`, e))\r\n      });\r\n      setOpen(false);\r\n  }\r\n\r\n  const handleSelection = (items) => {\r\n    console.log(items);    \r\n    setMySelectedRows(items.selectionModel);    \r\n  }\r\n\r\n  useEffect(() => {\r\n    props.setTitle('Orders');\r\n    if(mode=='none'){\r\n      setMySelectedRows([]);\r\n      setMyEditedRows([]);\r\n      console.log('inside useeffect');\r\n      fetchlist()\r\n    }\r\n      \r\n  }, [mode, token, page]\r\n  );\r\n\r\n  // useEffect(() => {\r\n  //   updateSearchFilteredOrders(searchString);      \r\n  // }, [orders]\r\n  // );\r\n\r\n  function fetchlist(fromSearchBar=false){\r\n    if(fromSearchBar && page!=0){\r\n      setPage(0);\r\n      return;\r\n    }\r\n    console.log('fetching details');\r\n    let urlparams;\r\n    if(searchString){\r\n      urlparams = new URLSearchParams({page: page+1, search: searchString});\r\n    }        \r\n    else\r\n      urlparams = new URLSearchParams({page: page+1});\r\n    setLoading(true);\r\n    API.getOrderList(token['mr-token'], urlparams)\r\n    .then(resp => {\r\n      if(resp.status==200) return resp.json();\r\n      if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n      throw 'Something went wrong';    \r\n    })\r\n    .then(data => {\r\n      //console.log(data); \r\n      \r\n      \r\n      if(data['results']){\r\n        if(totalcount != data['count'])\r\n          setPage(0);\r\n        console.log('setting count', data['count'])\r\n        setTotalCount(data['count']);\r\n        data['results'].forEach((item, i) => item.id = item.orderId);\r\n        setOrders(data['results']);    \r\n      }\r\n      else{\r\n        console.error('error getting data')\r\n        console.error(data['detail'])\r\n        console.log('setting count', data['count'])\r\n        setPage(0);\r\n        setTotalCount(0);\r\n        setOrders([]);        \r\n      }\r\n      setLoading(false);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e); setLoading(false);});\r\n  }\r\n\r\n  // const updateSearchFilteredOrders = (theSearchString) =>{\r\n  //   let rows = [...orders];\r\n  //   if(theSearchString!='')\r\n  //       rows = rows.filter(r => {\r\n  //         const str = theSearchString.toLowerCase()\r\n  //         return r.orderStatus.toLowerCase().search(str)>=0 ||\r\n  //         r.style.toLowerCase().search(str)>=0 ||\r\n  //         r.orderNo.toLowerCase().search(str)>=0 ||\r\n  //         r.storeName.toLowerCase().search(str)>=0 ||\r\n  //         r.recipientName.toLowerCase().search(str)>=0 ||\r\n  //         r.design.toLowerCase().search(str)>=0 ||\r\n  //         r.size.toLowerCase().search(str)>=0 ||\r\n  //         r.color.toLowerCase().search(str)>=0;\r\n  //       })\r\n  //   setMySelectedRows([]);\r\n  //   setMyEditedRows([]);\r\n  //   setSearchFilteredOrders(rows);\r\n  // }\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  else\r\n  return(\r\n    <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n      {message=='' ? '' : <div style={{color:\"red\"}}>{message}</div>}\r\n      { mode=='none' ?\r\n        <div>\r\n          {usertype==0 && <IconButton style={{ marginBottom:'10px'}} color='primary' variant='contained' disabled={mySelectedRows.length==1 && (myEditedRows[0].shipped=='N' || myEditedRows[0].printed=='N' || myEditedRows[0].processing=='N') ? false:true} onClick={handleUpdateClick}><EditIcon /></IconButton>}\r\n          {usertype!=0 && <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', flexDirection: 'row'}}>\r\n            <IconButton style={{ width: '60px'}} color='primary' variant='contained' onClick={handleAddClick}><AddCircleIcon /></IconButton>\r\n            <IconButton color='primary' variant='contained' disabled={mySelectedRows.length==1 ? false:true} onClick={handleUpdateClick}><EditIcon /></IconButton>\r\n            <div>\r\n              <IconButton variant=\"outlined\" color=\"secondary\" disabled={mySelectedRows.length>0 ? false:true} onClick={handleDeleteClick}><DeleteIcon /></IconButton>\r\n              <Dialog\r\n                open={open}\r\n                onClose={handleClose}                \r\n              >\r\n                <DialogTitle id=\"alert-dialog-title\">\"Are you sure you want to delete the {mySelectedRows.length} items\"</DialogTitle>\r\n                \r\n                <DialogActions>\r\n                  <Button onClick={handleClose} color=\"primary\">Cancel</Button>\r\n                  <Button onClick={handleDeleteConfirm} color=\"primary\" autoFocus>Confirm</Button>\r\n                </DialogActions>\r\n              </Dialog>\r\n            </div>\r\n            <Button variant=\"contained\" color=\"primary\" disabled={myEditedRows.length>0 ? false:true} onClick={handleMassUpdate}>Mass Update</Button>\r\n            <form ><input type=\"file\" name=\"myfile\" id=\"myfile\" onChange={fileChangeHandler} hidden></input><label htmlFor=\"myfile\" className=\"file-input-label\">Choose File</label><Button type=\"submit\" disabled={!isFilePicked} onClick={handleUpload} color='primary' variant='contained'>Import Orders</Button></form>\r\n            <form ><input type=\"file\" name=\"myShippingfile\" id=\"myShippingfile\" onChange={shippingFileChangeHandler} hidden></input><label htmlFor=\"myShippingfile\" className=\"file-input-label\">Choose File</label><Button type=\"submit\" disabled={!isShippingFilePicked} onClick={handleUpload} color='primary' variant='contained'>Import Shipping Info</Button></form>\r\n            <div>\r\n                <TextField variant=\"outlined\" size=\"small\" margin=\"none\" type=\"text\" value={searchString} className={classes.searchInput} text='Search' onChange={(e) => setSearchString(e.target.value)} onKeyPress={e => e.key==\"Enter\" && fetchlist(true)}></TextField>\r\n                <Button color=\"primary\" variant=\"contained\" onClick={e => fetchlist(true)}>Search</Button>\r\n            </div>\r\n            </div>}\r\n          <div style={{ width: '100%', padding: \"5px\",  height: \"calc(100vh - 110px)\", minWidth:'600px'}} className={classes.root}>        \r\n            <DataGrid\r\n              rows={orders} columns={columns}\r\n              loading={loading}\r\n              checkboxSelection \r\n              components={{ Toolbar: GridToolbar,}}\r\n              density='compact'\r\n              disableSelectionOnClick={true}\r\n              onSelectionModelChange={handleSelection}\r\n              onRowSelected={handleRowSelected}\r\n              onEditCellChangeCommitted={handleEditCellChangeCommitted}\r\n              disableColumnMenu={true}\r\n              pagination\r\n              page={page}\r\n              pageSize = {50}\r\n              rowsPerPageOptions={[]}\r\n              rowCount = {totalcount}\r\n              paginationMode=\"server\"\r\n              onPageChange={(params) => {\r\n                setPage(params.page);\r\n              }}\r\n              getRowClassName={(params) =>{\r\n                if(params.row.productAvailability==\"Short\" || params.row.productAvailability==\"Out Of Stock\")\r\n                return 'hot'\r\n              }                \r\n              }\r\n            />\r\n          </div>\r\n        </div>\r\n        :\r\n        (mode=='add' ? \r\n          <OrderForm mode={mode} setMode={setMode}></OrderForm>\r\n          :\r\n          <OrderUpdateForm id={mySelectedRows[0]} mode={mode} setMode={setMode} usertype={usertype}></OrderUpdateForm>\r\n        )\r\n        \r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderList;\r\n","import '../App.css';\r\nimport API from '../api-service'\r\nimport OrderForm from './OrderForm';\r\nimport OrderUpdateForm from './OrderUpdateForm';\r\nimport AuthenticationService from '../authentication-service';\r\nimport GridCellExpand from './GridCellExpand';\r\nimport React, {useState, useEffect} from 'react';\r\nimport {isOverflown, DataGrid, GridToolbar, GridRowsProp, GridColDef, useGridContainerProps } from '@material-ui/data-grid';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Divider, Button, Checkbox, Dialog, DialogActions, DialogTitle, TextField, IconButton, DialogContent } from '@material-ui/core';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 700,\r\n  },\r\n  headcell: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"1rem\",\r\n    padding: \"6px\"\r\n  },\r\n  headcellCentered: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"1rem\",\r\n    padding: \"6px\",\r\n    textAlign: \"center\"\r\n  },\r\n  redbtn: {\r\n    color: \"white\",\r\n    background: \"red\",\r\n  },\r\n  greenbtn: {\r\n    color: \"white\",\r\n    background: \"green\",\r\n  },\r\n  tablecell: {\r\n    padding: \"6px\"\r\n  },\r\n  searchInput: {\r\n    marginRight: '4px'\r\n  },\r\n  tablecellCentered: {\r\n    padding: \"6px\",\r\n    textAlign: \"center\"\r\n  },\r\n\r\n\r\n});\r\n\r\n//const getDetails = (params) => \r\n\r\nconst columns = [\r\n  { field: 'orderId', headerName: 'Id', width: 150, hide:true },\r\n  { field: 'storeName', headerName: 'Store Name', width: 150 },\r\n  { field: 'displayStatus', headerName: 'Status', width: 150 },\r\n  // { field: 'details', headerName: 'Recipient|Order No|#', width: 150,\r\n  //     valueGetter: getDetails,\r\n  //     sortComparator: (v1, v2, cellParams1, cellParams2) =>\r\n  //       getFullName(cellParams1).localeCompare(getFullName(cellParams2)),},\r\n  { field: 'orderNo', headerName: 'Order No', width: 150 },\r\n  { field: 'orderCount', headerName: 'Order Count', width: 150},\r\n  { field: 'recipientName', headerName: 'Recipent Name', width: 150},\r\n  { field: 'style', headerName: 'Style', width: 350 },\r\n  { field: 'size', headerName: 'Size', width: 150 },\r\n  { field: 'color', headerName: 'Color', width: 150 },\r\n  { field: 'design', headerName: 'Design', width: 150 },\r\n  { field: 'processing', headerName: 'Processing', width: 150 },\r\n  { field: 'printed', headerName: 'Printed', width: 150 },\r\n  { field: 'shipped', headerName: 'Shipped', width: 150 },\r\n  { field: 'sfmNotes', headerName: 'SFM Notes', width: 150 },\r\n  { field: 'giftMessages', headerName: 'Gift Messages', width: 150 },\r\n  { field: 'productAvailability', headerName: 'Product Availability', width: 150 }\r\n];\r\n\r\nfunction Printing(props){\r\n\r\n  const classes = useStyles();\r\n  \r\n  // { id: 1, style: 'dummy1', size: 'dummy ' },\r\n  // { id: 2, style: 'dummy2', size: 'dummy ' }\r\n  const [orders, setOrders] = useState([]);\r\n  const [searchFilteredOrders, setSearchFilteredOrders] = useState([]);\r\n  const [token] = useCookies(['mr-token']);\r\n  const [mode, setMode] = useState('none');\r\n  const [open, setOpen] = useState(false);\r\n  const [notesOpen, setNotesOpen] = useState(false);\r\n  const [notesText, setNotesText] = useState('');\r\n  const [notesOrderId, setNotesOrderId] = useState(null);\r\n  const [searchString, setSearchString] = useState('');\r\n  const [mySelectedRows, setMySelectedRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  //const [myEditedRows, setMyEditedRows] = useState([]);\r\n  \r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleCheckboxClick = (e) =>{\r\n    const oid = parseInt(e.target.dataset.oid)\r\n    console.log(oid);\r\n    console.log(e.target.checked);\r\n    let checkedRows = [];\r\n    if(e.target.checked) \r\n      checkedRows = [...mySelectedRows, oid]\r\n    else{\r\n      const index = mySelectedRows.indexOf(oid);\r\n      if (index > -1)\r\n        mySelectedRows.splice(index, 1);\r\n      checkedRows = [...mySelectedRows];\r\n    }\r\n    console.log(checkedRows);\r\n    setMySelectedRows(checkedRows)\r\n  }\r\n\r\n  // const handleRowSelected = (s) => {\r\n  //   console.log(s);\r\n  //   let rows = [...s.api.current.getSelectedRows().values()];\r\n  //   console.log('selected rows ere : ', rows);\r\n  //   setMyEditedRows(rows);\r\n  // }\r\n\r\n  const handleSpecialButtonsClick = (e) =>{\r\n    console.log(e.currentTarget, e.currentTarget.dataset.oid);\r\n    const oid = parseInt(e.currentTarget.dataset.oid);\r\n    const btype = String(e.currentTarget.dataset.btype);\r\n    let rowdata = orders.find(o => o.orderId == oid);\r\n    let newRow ={};\r\n    console.log(btype);\r\n    if(btype==\"processing\"){\r\n      const processing = rowdata.processing=='Y' ? 'N' : 'Y'\r\n      console.log(processing);\r\n      newRow = {...rowdata, processing}\r\n    }\r\n    if(btype==\"printed\"){\r\n      const printed = rowdata.printed=='Y' ? 'N' : 'Y'\r\n      console.log(printed);\r\n      newRow = {...rowdata, printed}\r\n    }\r\n    if(btype==\"shipped\"){\r\n      const shipped = rowdata.shipped=='Y' ? 'N' : 'Y'\r\n      console.log(shipped);\r\n      newRow = {...rowdata, shipped}\r\n    }\r\n      \r\n    API.updateOrder(token['mr-token'], oid, newRow)\r\n      .then(resp => {\r\n        if(resp.status==200) return resp.json()\r\n        else throw 'Something went wrong';\r\n      })\r\n      .then(data => {\r\n        const updatedRows = orders.map((row) => {\r\n          if (row.orderId == data.orderId)\r\n            return data;          \r\n          return row;\r\n        });\r\n        setMessage('updated order');\r\n        console.log(updatedRows.map(x => x.orderId));\r\n        setOrders(updatedRows)\r\n      })\r\n      .catch(err => {console.log('api error');console.error(err); setMessage('Something went wrong')})\r\n  }\r\n\r\n  // needed to update myEditedRows if cell value changed after selection\r\n  // const handleEditCellChangeCommitted = React.useCallback(\r\n  //   ({ id, field, props }) => {\r\n  //       console.log('cell commit', myEditedRows, props);\r\n  //       const data = props; // Fix eslint value is missing in prop-types for JS files\r\n  //       const updatedRows = myEditedRows.map((row) => {\r\n  //         const obj = {};\r\n  //         obj[field] = data.value;\r\n  //         if (row.orderId === id) {\r\n  //           return { ...row, ...obj};\r\n  //         }\r\n  //         return row;\r\n  //       });\r\n  //       setMyEditedRows(updatedRows);\r\n  //       console.log('cell commit after ', updatedRows);\r\n  //   },\r\n  //   [myEditedRows],\r\n  // );\r\n\r\n  const handleAddClick = (e) => {setMode('add')}\r\n  const handleEditClick = (e) => {setMode('update')}\r\n  const handleDeleteClick = (e) => {setOpen(true)}\r\n  const handleClose = (e) => {setOpen(false)}  \r\n\r\n  const handleDeleteConfirm = (e) => {\r\n    console.log('u confirmed delete');\r\n    let errors = [];\r\n    const deleteRows = async () => {\r\n      for(let rowId of mySelectedRows) {\r\n        try{\r\n          const resp = await API.deleteOrder(token['mr-token'], rowId);\r\n          if(resp.status==200 || resp.status==204){\r\n            console.log(`deleted order with id ${rowId}`);\r\n          }          \r\n          else{\r\n            console.log(`Failed to delete order with id ${rowId}`);\r\n            throw `Failed to delete order with id ${rowId}`;\r\n          }\r\n        }\r\n        catch(e){\r\n          console.error(`could not delete order id ${rowId}`, e);\r\n          errors.push(`could not delete order id ${rowId}`);\r\n        }\r\n      }\r\n\r\n      if(errors.length>0)\r\n        setMessage('Some rows were not deleted\\n' + errors.toString() + ' Pleae refresh');\r\n      else\r\n        setMessage('Deleted successfully. Please refresh');\r\n\r\n    }\r\n    setOpen(false);\r\n    deleteRows();\r\n\r\n  }\r\n\r\n  const handleNotesClose = (e) => {setNotesOpen(false)};\r\n\r\n  const handleNotesClick = (e) => {\r\n    const oid = parseInt(e.currentTarget.dataset.oid);\r\n    setNotesOrderId(oid);\r\n    const rowdata = orders.find(o => o.orderId == oid);\r\n    setNotesText(rowdata.sfmNotes);\r\n    setNotesOpen(true);\r\n  }\r\n\r\n  const handleNotesSave = (e) => {\r\n    const oid = notesOrderId;\r\n    const rowdata = orders.find(o => o.orderId == oid);\r\n    const sfmNotes = notesText;\r\n    const newRow = {...rowdata, sfmNotes}\r\n    API.updateOrder(token['mr-token'], oid, newRow)\r\n      .then(resp => {\r\n        if(resp.status==200) return resp.json()\r\n        else throw 'Something went wrong';\r\n      })\r\n      .then(data => {\r\n        const updatedRows = orders.map((row) => {\r\n          if (row.orderId == data.orderId)\r\n            return data;          \r\n          return row;\r\n        });\r\n        setMessage('updated Order');\r\n        setOrders(updatedRows)\r\n      })\r\n      .catch(err => {console.log('api error');console.error(err); setMessage('Something went wrong')})\r\n    \r\n      setNotesOpen(false);\r\n  }\r\n\r\n  // const handleSelection = (items) => {\r\n  //   console.log(items);    \r\n  //   setMySelectedRows(items.selectionModel);    \r\n  // }\r\n\r\n  useEffect(() => {\r\n    console.log('cookies');\r\n    props.setTitle('Printing');\r\n    if(mode=='none')\r\n      fetchlist()\r\n  }, [mode, token]\r\n  );\r\n\r\n  useEffect( () => {\r\n    updateSearchFilteredOrders(searchString);\r\n  }, [orders]);\r\n\r\n  function fetchlist(){\r\n    setLoading(true);\r\n    setMySelectedRows([]);\r\n    API.getPrintingList(token['mr-token'])\r\n    .then(resp => {\r\n      if(resp.status==200) return resp.json();\r\n      if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n      throw 'Something went wrong';    \r\n    })\r\n    .then(data => {\r\n      let rows = data;\r\n      console.log('fetching orders');\r\n      //console.log(rows.map(r => r.orderId))\r\n      //filter\r\n      \r\n      \r\n      rows.forEach((item, i) => item.id = item.orderId);\r\n\r\n      const sortBy = [ \r\n        {prop:'storeName', direction: 1}, \r\n        {prop:'recipientName', direction: 1}, \r\n        {prop:'orderNo', direction: 1},\r\n        {prop:'orderStatus', direction: 1}\r\n      ];\r\n\r\n      rows.sort(function(a,b){\r\n        let i = 0, result = 0;\r\n        while(i < sortBy.length && result === 0) {\r\n          result = sortBy[i].direction*(a[ sortBy[i].prop ].toString() < b[ sortBy[i].prop ].toString() ? -1 : (a[ sortBy[i].prop ].toString() > b[ sortBy[i].prop ].toString() ? 1 : 0));\r\n          i++;\r\n        }\r\n        return result;\r\n      })\r\n      console.log(rows.map(r => r.orderId));\r\n      setOrders(rows);\r\n      setLoading(false);\r\n    })\r\n    .catch(e => {console.log(\"api error\"); console.error(e); setLoading(false)});\r\n  }  \r\n\r\n  const updateSearchFilteredOrders = (theSearchString) =>{\r\n    let rows = [...orders];\r\n    if(theSearchString!='')\r\n        rows = rows.filter(r => {\r\n          const str = theSearchString.toLowerCase()\r\n          return r.displayStatus.toLowerCase().search(str)>=0 ||\r\n          r.style.toLowerCase().search(str)>=0 ||\r\n          r.orderNo.toLowerCase().search(str)>=0 ||\r\n          r.storeName.toLowerCase().search(str)>=0 ||\r\n          r.recipientName.toLowerCase().search(str)>=0 ||\r\n          r.design.toLowerCase().search(str)>=0 ||\r\n          r.size.toLowerCase().search(str)>=0 ||\r\n          r.color.toLowerCase().search(str)>=0 ||\r\n          r.productAvailability.toLowerCase().search(str)>=0;\r\n        })\r\n    setMySelectedRows([]);\r\n    setSearchFilteredOrders(rows);\r\n  }\r\n\r\n  let nextGroup = 0;\r\n  \r\n  return(\r\n    <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n      <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'baseline'}}>\r\n        <div>\r\n          \r\n        </div>\r\n      </div>      \r\n      {message!='' && <div style={{color:\"red\"}}>{message}</div>}\r\n      { mode=='none' ?\r\n        <div>          \r\n          <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', flexDirection: 'row'}}>\r\n              \r\n            <div>\r\n              <IconButton color='primary' variant='contained' onClick={handleAddClick}><AddCircleIcon /></IconButton>\r\n              <IconButton variant=\"contained\" color=\"primary\" disabled={mySelectedRows.length==1 ? false:true} onClick={handleEditClick}><EditIcon /></IconButton>\r\n              <IconButton variant=\"contained\" color=\"secondary\" disabled={mySelectedRows.length>0 ? false:true} onClick={handleDeleteClick}><DeleteIcon /></IconButton>\r\n              <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n              >\r\n                <DialogTitle>\"Are you sure you want to delete the {mySelectedRows.length} items\"</DialogTitle>\r\n                \r\n                <DialogActions>\r\n                  <Button onClick={handleClose} color=\"primary\">Cancel</Button>\r\n                  <Button onClick={handleDeleteConfirm} color=\"primary\" autoFocus>Confirm</Button>\r\n                </DialogActions>\r\n              </Dialog>\r\n              \r\n              <Dialog\r\n                open={notesOpen}\r\n                maxWidth='lg'\r\n                fullWidth={true}\r\n                onClose={handleNotesClose}\r\n              >\r\n                <DialogTitle>Notes</DialogTitle>\r\n                <DialogContent>\r\n                <TextField multiline value={notesText} text='Notes' variant='outlined' rows={4} fullWidth={true}\r\n                  onChange={(e) => setNotesText(e.target.value)}></TextField>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                  <Button onClick={handleNotesClose} color=\"primary\">Cancel</Button>\r\n                  <Button onClick={handleNotesSave} color=\"primary\" autoFocus>Save</Button>\r\n                </DialogActions>\r\n              </Dialog>\r\n            </div>\r\n            <div>\r\n                <TextField variant=\"outlined\" size=\"small\" margin=\"none\" type=\"text\" value={searchString} text='Search' className={classes.searchInput} onChange={(e) => setSearchString(e.target.value)} onKeyPress={e => e.key==\"Enter\" && updateSearchFilteredOrders(e.target.value)}></TextField>\r\n                <Button color=\"primary\" variant=\"contained\" onClick={e => updateSearchFilteredOrders(searchString)}>Search</Button>\r\n              </div>            \r\n          </div>\r\n          \r\n          {/*<div style={{  width: '100%', height: '450px', minWidth:'600px'}}>        \r\n            <DataGrid rows={orders} columns={columns} checkboxSelection  components={{\r\n              Toolbar: GridToolbar,\r\n            }} disableSelectionOnClick={true} onSelectionModelChange={handleSelection} onRowSelected={handleRowSelected} onEditCellChangeCommitted={handleEditCellChangeCommitted} />\r\n          </div>*/}\r\n          {loading ? <h2>Loading...  Please wait</h2>\r\n          :\r\n          <TableContainer component={Paper} style={{height: 'calc(100vh - 140px)'}}>\r\n            <Table className={classes.table} size=\"small\" aria-label=\"spanning table\">\r\n              <TableHead>                \r\n                <TableRow>\r\n                  <TableCell className={classes.tablecell}>\r\n                    <Checkbox\r\n                      disabled={true}\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell className={classes.headcell} >Status</TableCell>\r\n                  <TableCell className={classes.headcell} >Shop</TableCell>\r\n                  <TableCell className={classes.headcell} >Recipient/Order/#</TableCell>\r\n                  <TableCell className={classes.headcell} >Style</TableCell>\r\n                  <TableCell className={classes.headcell} >Size</TableCell>\r\n                  <TableCell className={classes.headcell} >Color</TableCell>\r\n                  <TableCell className={classes.headcell} >Design</TableCell>\r\n                  <TableCell className={classes.headcell} >Msg</TableCell>\r\n                  <TableCell className={classes.headcellCentered} >Processed</TableCell>\r\n                  <TableCell className={classes.headcellCentered} >Printed</TableCell>\r\n                  <TableCell className={classes.headcellCentered} >Shipped</TableCell>\r\n                  <TableCell className={classes.headcell} >Product Availability</TableCell>\r\n                  <TableCell className={classes.headcell} >Notes</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                { searchFilteredOrders.map((row, i, arr) => {\r\n                  let newGroup = false;\r\n                  if(i==nextGroup){\r\n                    newGroup = true;\r\n                    for(let j=i+1;j<arr.length; j++){\r\n                      if(row.orderNo!=arr[j].orderNo || row.storeName!=arr[j].storeName \r\n                        || row.recipientName!=arr[j].recipientName){\r\n                          nextGroup = j;\r\n                          break;\r\n                        }                        \r\n                    }\r\n                  }\r\n                  return (\r\n                    <TableRow key={row.orderId}>\r\n                    <TableCell className={classes.tablecell} style= {nextGroup!=i+1 ? {borderBottomColor: 'white'}: {}}>\r\n                      <Checkbox\r\n                        inputProps={{ 'data-oid' : row.orderId }}\r\n                        onChange={handleCheckboxClick}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell style={ nextGroup!=i+1 ? { whiteSpace : 'nowrap', borderBottomColor: 'white'}: { whiteSpace : 'nowrap'}} className={classes.tablecell}>{row.displayStatus}</TableCell>\r\n                    {newGroup && <TableCell style={{ whiteSpace : 'nowrap'}} rowSpan={nextGroup-i} className={classes.tablecell}>{row.storeName}</TableCell>}\r\n                    {newGroup && <TableCell style={{ whiteSpace : 'nowrap'}} rowSpan={nextGroup-i} className={classes.tablecell}><div >{row.recipientName}</div><div>{row.orderNo}</div><div>{row.orderCount}</div></TableCell>}\r\n                    <TableCell style={{ whiteSpace : 'nowrap'}} className={classes.tablecell}>{row.style}</TableCell>\r\n                    <TableCell style={{ whiteSpace : 'nowrap'}} className={classes.tablecell}>{row.size}</TableCell>\r\n                    <TableCell style={{ whiteSpace : 'nowrap'}} className={classes.tablecell}>{row.color}</TableCell>\r\n                    <TableCell style={{ whiteSpace : 'nowrap'}} className={classes.tablecell}>{row.design}</TableCell>\r\n                    <TableCell style={{  maxWidth: '50px'}} className={classes.tablecell}>{row.giftMessages && <EmailIcon />}</TableCell>\r\n                    <TableCell className={classes.tablecellCentered}><Button onClick={handleSpecialButtonsClick} data-oid={row.orderId} data-btype={\"processing\"} className={row.processing=='Y' ? classes.greenbtn : classes.redbtn} variant=\"contained\">{row.processing}</Button></TableCell>\r\n                    <TableCell className={classes.tablecellCentered}><Button onClick={handleSpecialButtonsClick} data-oid={row.orderId} data-btype={\"printed\"} className={row.printed=='Y' ? classes.greenbtn : classes.redbtn} variant=\"contained\">{row.printed}</Button></TableCell>\r\n                    <TableCell className={classes.tablecellCentered}><Button onClick={handleSpecialButtonsClick} data-oid={row.orderId} data-btype={\"shipped\"} className={row.shipped=='Y' ? classes.greenbtn : classes.redbtn} variant=\"contained\">{row.shipped}</Button></TableCell>\r\n                    <TableCell className={classes.tablecell}>{row.productAvailability}</TableCell>\r\n                    <TableCell className={classes.tablecell} style={{ maxWidth : '150px', whiteSpace: \"nowrap\", overflow: \"hidden\", textOverflow: \"ellipsis\"}}>\r\n                      {row.sfmNotes ? <Button onClick={handleNotesClick} data-oid={row.orderId}>{row.sfmNotes.substring(0,13) + '...'}</Button>\r\n                      :\r\n                      <IconButton color='primary' variant='contained' onClick={handleNotesClick} data-oid={row.orderId}><AddCircleIcon /></IconButton>\r\n                      }\r\n                    </TableCell>\r\n                  </TableRow>);\r\n                  })\r\n                }                \r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          }\r\n          </div>\r\n        :\r\n        (mode==\"add\" ?\r\n          <OrderForm mode={mode} setMode={setMode} fromPrinting={true}></OrderForm>\r\n          :\r\n          <OrderUpdateForm id={mySelectedRows[0]} mode={mode} setMode={setMode} fromPrinting={true}></OrderUpdateForm>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Printing;\r\n","import API from '../api-service';\r\nimport AuthenticationService from '../authentication-service';\r\nimport React, {useState, useEffect} from 'react';\r\nimport {Button, TextField, MenuItem, Typography, Divider, Paper } from '@material-ui/core';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst getDeafultStartDate = () => {\r\n  const d = new Date();\r\n  d.setDate(d.getDate() - 30);\r\n  //d.toISOString().split('T')[0];\r\n  const offset = d.getTimezoneOffset()\r\n  const d2 = new Date(d.getTime() - (offset*60*1000))\r\n  return d2.toISOString().split('T')[0]\r\n}\r\n\r\nfunction Dashboard(props){\r\n\r\n  const [token] = useCookies(['mr-token']);\r\n  const usertype = props.usertype;\r\n\r\n  const [errormsg, setErrormsg] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [availableStores, setAvailableStores] = useState([]);\r\n  const [inventory, setInventory] = useState([]);\r\n  const [selectedStore, setSelectedStore] = useState('All');\r\n  \r\n  const [startDate, setStartDate] = useState(getDeafultStartDate());\r\n  const [endDate, setEndDate] = useState('');\r\n  const [recievedData, setRecievedData] = useState({});\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      props.setTitle('Dashboard');\r\n      try{\r\n        const resp = await API.getStoreList(token['mr-token']);\r\n        if(resp.status==200){\r\n          let stores = await resp.json();\r\n          if(stores.length==0){\r\n            throw 'No stores available';\r\n          }\r\n          else\r\n            stores.unshift({storeName:'All', storeCode:'All'});\r\n          setAvailableStores(stores);\r\n          displaysummary(selectedStore, startDate, endDate);\r\n        }\r\n        else if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n        else throw 'Something went wrong';\r\n      }catch(e){\r\n        console.log(\"api error\");\r\n        console.error(e);\r\n        setErrormsg('Something went wrong. Please refresh');\r\n      }\r\n\r\n      if(usertype==1){\r\n        try{\r\n          const resp = await API.getInventoryList(token['mr-token']);\r\n          console.log('fetch inventory list status', resp.status);\r\n          if(resp.status==200) setInventory(await resp.json());\r\n          else if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n          else throw 'Something went wrong';          \r\n        }      \r\n        catch(e){\r\n          console.log(\"api error\");\r\n          console.error(e);\r\n          setErrormsg('Something went wrong. Please refresh');\r\n        }\r\n      }\r\n      setLoading(false);\r\n    })();\r\n  }, []\r\n  );\r\n\r\n  const storeChanged = (e) => {\r\n    console.log(e.target.value);\r\n    setSelectedStore(e.target.value);\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(startDate, endDate);\r\n    console.log(selectedStore, typeof(startDate))\r\n    displaysummary(selectedStore, startDate, endDate);    \r\n  }\r\n\r\n  const displaysummary = (store, startDate, endDate) =>{\r\n    console.log(store);\r\n    if(store==''){\r\n      setErrormsg('Please choose a store');\r\n      return;\r\n    }\r\n    const params = {store, startDate, endDate}\r\n    API.getOverview(token['mr-token'], params)\r\n    .then(resp => {\r\n      if(resp.status==200)\r\n        return resp.json();\r\n      else\r\n        throw 'Something went wrong. Please make sure store is selected.';\r\n    })\r\n    .then(data => {setRecievedData(data)})\r\n    .catch(err => {\r\n      console.log(err);\r\n      setErrormsg(String(err));\r\n    });\r\n  }\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  if(loading)\r\n    return (<div>Loading. Please wait</div>);\r\n  return (\r\n        <div>\r\n          {errormsg && <h3 style={{color:\"red\"}}>{errormsg}</h3>}\r\n          <div style={{ width: '100%', display: 'flex', justifyContent: 'space-around', alignItems: \"center\"}}>\r\n            <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            select\r\n            style={{minWidth: \"250px\"}}\r\n            label=\"Store\"\r\n            name=\"store\"\r\n            value={selectedStore}\r\n            onChange={storeChanged}\r\n            >\r\n              {availableStores.map((option) => (\r\n                <MenuItem key={option.storeCode} value={option.storeCode}>\r\n                  {option.storeName}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              label=\"Start Date\"\r\n              name=\"startDate\"\r\n              type=\"date\"\r\n              value = {startDate}\r\n              onChange={(e) => setStartDate(e.target.value)}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              label=\"End Date\"\r\n              name=\"endtDate\"\r\n              type=\"date\"\r\n              value = {endDate}\r\n              onChange={(e) => setEndDate(e.target.value)}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleSubmit}\r\n            >\r\n            Submit\r\n            </Button>\r\n          </div>\r\n          <Paper style={{padding:\"10px\", margin: \"5px\", marginTop: \"15px\"}}>\r\n            <Typography variant=\"h4\">\r\n              <strong>Orders Summary</strong>\r\n            </Typography>\r\n            <Typography>\r\n            <strong>Total Orders &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </strong>{recievedData.total}\r\n            </Typography>\r\n            <Typography>\r\n            <strong>Fulfilled &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </strong>{recievedData.fulfilled}\r\n            </Typography>\r\n            <Typography>\r\n            <strong>Unfulfilled &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </strong>{recievedData.unfulfilled}\r\n            </Typography>\r\n            <Typography>\r\n            <strong>OnHold &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </strong>{recievedData.onhold}\r\n            </Typography>\r\n            <Typography>\r\n            <strong>Out Of Stock &nbsp;&nbsp;&nbsp;&nbsp;: </strong>{recievedData.outofstock}\r\n            </Typography>\r\n          </Paper>\r\n          { usertype==1 &&\r\n          <div>\r\n            <Paper style={{padding:\"10px\", margin: \"5px\", marginTop: \"15px\"}}>\r\n            <Typography variant=\"h4\">\r\n              <strong>General</strong>\r\n            </Typography>\r\n              <Typography>\r\n                <strong>Products &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </strong>\r\n                {inventory.length>0 && [...new Set(inventory.map(i => i.style))].length}\r\n              </Typography>\r\n              <Typography>\r\n              <strong>Store Count &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </strong>{availableStores.length}\r\n              </Typography>\r\n            </Paper>\r\n            <Paper style={{padding:\"10px\", margin: \"5px\", marginTop: \"15px\"}}>\r\n              <Typography variant=\"h4\">\r\n                <strong>Inventory Needs</strong>\r\n              </Typography>\r\n              <table style={{padding: \"20px\"}}>\r\n              <tbody>\r\n              {inventory.length>0 && inventory.filter(inv => inv.needToPurchase>0).map( (i) => (\r\n                  <tr key={i.sfmId}>\r\n                    <td><strong>{i.style} - {i.size} - {i.color} {}</strong></td>\r\n                    <td><strong>: </strong>{i.needToPurchase}</td>\r\n                  </tr>\r\n              ))}\r\n              </tbody>\r\n              </table>\r\n            </Paper>\r\n          </div>\r\n          }\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","import API from '../api-service';\r\nimport React, {useState, useEffect} from 'react';\r\nimport {Button, TextField} from '@material-ui/core';\r\nimport { useCookies } from 'react-cookie';\r\nimport {Redirect} from 'react-router-dom';\r\nimport AuthenticationService from '../authentication-service';\r\n\r\nexport default function AccountDetails(props){\r\n\r\n  const [token] = useCookies(['mr-token']);\r\n  const [userInfo, setUserInfo] = useCookies(['mr-user']);\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [old_password, setOldPassword] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [password2, setPassword2] = useState('');\r\n  const [first_name, setFirstName] = useState('');\r\n  const [last_name, setLastName] = useState('');\r\n  const [changePassword, setChangePassword] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [errormsg, setErrormsg] = useState({});\r\n\r\n  const userId = parseInt(userInfo['mr-user'].split('-')[0]);\r\n  \r\n  useEffect(() => {\r\n    (async () => {\r\n      props.setTitle('My Account');\r\n      try{\r\n        const resp = await API.getAccountDetails(token['mr-token'], userId)\r\n        if(resp.status==200){\r\n          const data = await resp.json();\r\n          console.log('got data', data)\r\n          setUsername(data['username']);\r\n          setEmail(data['email']);\r\n          setLastName(data['last_name']);\r\n          setFirstName(data['first_name']);\r\n        }\r\n        else if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n        else throw 'Something went wrong';\r\n        \r\n      }\r\n      catch(e){\r\n        console.log(\"api error\");\r\n        console.log('ee', e);\r\n      }\r\n    })();\r\n  }, [])\r\n\r\n  const handleSave = async (e) => {\r\n    try{\r\n      const resp = await API.updateProfile(token['mr-token'], userId, {email, first_name, last_name})\r\n      if(resp.status==200){\r\n        setErrormsg('');\r\n        setMessage('Updated Successfully');\r\n      }\r\n        \r\n      if(resp.status==400){\r\n        console.log('dddd');\r\n        setMessage('Invalid Data');\r\n        setErrormsg(await resp.json());\r\n      }      \r\n    }\r\n    catch(e){\r\n      setMessage('Something went wrong');\r\n      console.log(\"api error\");\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const handleChangePassword = async (e) => {\r\n    try{\r\n      const resp = await API.changePassword(token['mr-token'], userId, {password, password2, old_password})\r\n      if(resp.status==200){\r\n        setErrormsg('');\r\n        setMessage('Password Changed Successfully');\r\n      }\r\n        \r\n      if(resp.status==400){\r\n        setMessage('Invalid Data');\r\n        setErrormsg(resp.json());\r\n      }      \r\n    }\r\n    catch(e){\r\n      setMessage('Something went wrong');\r\n      console.log(\"api error\");\r\n      console.error(e);\r\n    }\r\n  }\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  return(\r\n    <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n      <div>\r\n        {changePassword===false ? <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={(e) => setChangePassword(true)}\r\n        >\r\n        Change Password\r\n        </Button>\r\n        :\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={(e) => setChangePassword(false)}\r\n        >\r\n        Back\r\n        </Button>\r\n      }\r\n      </div>\r\n      {message && <h3 style={{color:\"red\"}}>{message}</h3>}\r\n      {changePassword==false ?\r\n        <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          disabled\r\n          id=\"username\"\r\n          label=\"Username\"\r\n          name=\"username\"\r\n          value={username}\r\n          inputProps={{maxLength:20}}\r\n          helperText = {errormsg['username'] ? errormsg['orderNo'][0]:''}\r\n          error = {errormsg['username'] ? true: false}\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          id=\"email\"\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          value={email}\r\n          onChange={ (e) => setEmail(e.target.value) }\r\n          inputProps={{maxLength:50}}\r\n          helperText = {errormsg['email'] ? errormsg['email'][0]:''}\r\n          error = {errormsg['email'] ? true: false}\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          id=\"first_name\"\r\n          label=\"First Name\"\r\n          name=\"first_name\"\r\n          value={first_name}\r\n          onChange={ (e) => setFirstName(e.target.value) }\r\n          inputProps={{maxLength:20}}\r\n          helperText = {errormsg['first_name'] ? errormsg['first_name'][0]:''}\r\n          error = {errormsg['first_name'] ? true: false}\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          id=\"last_name\"\r\n          label=\"Last Name\"\r\n          name=\"last_name\"\r\n          value={last_name}\r\n          onChange={ (e) => setLastName(e.target.value) }\r\n          inputProps={{maxLength:20}}\r\n          helperText = {errormsg['last_name'] ? errormsg['last_name'][0]:''}\r\n          error = {errormsg['last_name'] ? true: false}\r\n        />\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handleSave}\r\n        >\r\n        Save Changes\r\n        </Button>\r\n        </div>\r\n        :\r\n        <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            id=\"old_password\"\r\n            label=\"old_password\"\r\n            name=\"old_password\"\r\n            type=\"password\"\r\n            value={old_password}\r\n            onChange={ (e) => setOldPassword(e.target.value) }\r\n            inputProps={{maxLength:20}}\r\n            helperText = {errormsg['old_password'] ? errormsg['old_password'][0]:''}\r\n            error = {errormsg['old_password'] ? true: false}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            id=\"password\"\r\n            label=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={ (e) => setPassword(e.target.value) }\r\n            inputProps={{maxLength:20}}\r\n            helperText = {errormsg['password'] ? errormsg['password'][0]:''}\r\n            error = {errormsg['password'] ? true: false}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            id=\"password2\"\r\n            label=\"password2\"\r\n            name=\"password2\"\r\n            type=\"password\"\r\n            value={password2}\r\n            onChange={ (e) => setPassword2(e.target.value) }\r\n            inputProps={{maxLength:20}}\r\n            helperText = {errormsg['password2'] ? errormsg['password2'][0]:''}\r\n            error = {errormsg['password2'] ? true: false}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleChangePassword}\r\n          >\r\n          Confirm\r\n          </Button>\r\n        </div>\r\n      }\r\n    </div>\r\n    \r\n  );\r\n}","import API from '../api-service';\r\nimport React, {useState, useEffect} from 'react'\r\nimport { DataGrid, GridToolbar} from '@material-ui/data-grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {Dialog, DialogActions, DialogTitle, DialogContent } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport CloudUploadOutlinedIcon from '@material-ui/icons/CloudUploadOutlined';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Redirect } from 'react-router-dom';\r\nimport GridCellExpand from './GridCellExpand';\r\nimport AuthenticationService from '../authentication-service';\r\n\r\nconst formatDate = (dt) => {\r\n  const dd = String(dt.getDate()).padStart(2, '0');\r\n  const mm = String(dt.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n  const yy = String(dt.getFullYear()).substr(2,2);\r\n  return mm + '/' + dd + '/' + yy;\r\n}\r\n\r\nconst getDeafultStartDate = () => {\r\n  const d = new Date();\r\n  d.setDate(d.getDate() - d.getDay() - 7);\r\n  const offset = d.getTimezoneOffset();\r\n  const d2 = new Date(d.getTime() - (offset*60*1000));\r\n  return d2.toISOString().split('T')[0];\r\n}\r\n\r\nconst getDeafultEndDate = () => {\r\n  const d = new Date();\r\n  d.setDate(d.getDate() - d.getDay() - 1);\r\n  const offset = d.getTimezoneOffset();\r\n  const d2 = new Date(d.getTime() - (offset*60*1000));\r\n  return d2.toISOString().split('T')[0];\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    '& .compactcell': {\r\n      padding: '0px 8px'\r\n    },\r\n  },\r\n  \r\n  redcolor: {\r\n    background: 'red',\r\n    color: 'white'\r\n  },\r\n  greencolor: {\r\n    background: 'green',\r\n    color: 'white'\r\n  },\r\n  inputbtn: {\r\n    display: 'none',\r\n  },\r\n  searchInput: {\r\n    marginRight: '4px'\r\n  }\r\n\r\n});\r\n\r\nexport default function Invoices(props){\r\n  const classes = useStyles();\r\n\r\n  //{ id: 1, style: 'dummy1', size: 'dummy ' },\r\n  //{ id: 2, style: 'dummy2', size: 'dummy ' }\r\n  const [invoices, setInvoices] = useState([]);\r\n  const [token] = useCookies(['mr-token']);\r\n  const [message, setMessage] = useState('');\r\n  const [searchString, setSearchString] = useState('');\r\n  const [totalcount, setTotalCount] = useState(0);\r\n  const [page, setPage] = useState(0);\r\n  const [notesOpen, setNotesOpen] = useState(false);\r\n  const [notesText, setNotesText] = useState('');\r\n  const [notesRowId, setNotesRowId] = useState(null);\r\n  const [startDate, setStartDate] = useState(getDeafultStartDate());\r\n  const [endDate, setEndDate] = useState(getDeafultEndDate());\r\n  const [loading, setLoading] = useState(false);\r\n  const usertype = props.usertype;\r\n\r\n  const columns = [\r\n    { field: 'id', headerName: 'Id', width: 100, hide: true },\r\n    // { field: 'receipt', headerName: 'Receipt', width: 110,\r\n    //     renderCell: (params) => {\r\n    //         return(\r\n    //         <Button\r\n    //           variant=\"contained\"\r\n    //           color=\"primary\"\r\n    //           size=\"small\"\r\n    //           data-pid={params.id}\r\n    //           onClick={handleOpenReceipt}\r\n    //         >\r\n    //           Open\r\n    //         </Button>);\r\n    //     },\r\n    // },\r\n    { field: 'attachment', headerName: 'View Invoice', width: 110,\r\n        renderCell: (params) => {\r\n            return(\r\n            <Link\r\n              size=\"small\"\r\n              href={params.value}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Open\r\n            </Link>);\r\n        },\r\n    },\r\n    \r\n    \r\n    { field: 'startDate', headerName: 'Start Date', width: 110,\r\n        valueFormatter: (params) => { if(params.value) return formatDate(new Date(params.value))}\r\n    },\r\n    { field: 'endDate', headerName: 'End Date', width: 110,\r\n      valueFormatter: (params) => { if(params.value) return formatDate(new Date(params.value))}\r\n    },\r\n    { field: 'storeName', headerName: 'Store', width: 150, renderCell: (params) => (<GridCellExpand limit={14} value={params.value ? params.value.toString() : ''} width={300} />) },\r\n    { field: 'invoiceNo', headerName: 'Invoice Number', width: 200 },\r\n    { field: 'status', headerName: 'Status', width: 110,\r\n      renderCell: (params) => {\r\n          return(\r\n          <Button\r\n            variant=\"contained\"\r\n            className={params.value==\"Paid\" ? classes.greencolor : classes.redcolor}\r\n            size=\"small\"\r\n            data-pid={params.id}\r\n            onClick={handleStatusChange}\r\n          >\r\n            {params.value}\r\n          </Button>);\r\n      },\r\n    },\r\n    { field: 'total', headerName: 'Total', width: 110 },\r\n    { field: 'notes', headerName: 'Notes', width: 200,\r\n      renderCell: (params) => (params.value ? <Button onClick={handleNotesClick} data-oid={params.id}>{params.value.substring(0,14) + '...'}</Button>: <IconButton color='primary' variant='contained' onClick={handleNotesClick} data-oid={params.id}><AddCircleIcon /></IconButton>)\r\n    },  \r\n    { field: 'uploadbtn', headerName: 'Upload Attachment', width: 70, cellClassName: 'compactcell', headerClassName: 'compactcell',\r\n        renderCell: (params) => {\r\n          return(\r\n            <div>\r\n            <input type=\"file\" name={\"myfile\"+params.id} id={\"myfile\"+params.id} onChange={handleReceiptUpload} className={classes.inputbtn} data-pid={params.id}/>\r\n            <label htmlFor={\"myfile\"+params.id}>\r\n              <IconButton color=\"primary\" aria-label=\"upload file\" component=\"span\" >\r\n                <CloudUploadOutlinedIcon/>\r\n              </IconButton>\r\n            </label>\r\n            </div>);\r\n        },\r\n    },\r\n    { field: 'receipt', headerName: 'View Attachment', width: 70, cellClassName: 'compactcell', headerClassName: 'compactcell',\r\n        renderCell: (params) => {\r\n            return( params.value ?\r\n            <Link\r\n              size=\"small\"\r\n              href={params.value}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Open\r\n            </Link>: <div></div>);\r\n        },\r\n    },\r\n      \r\n  ];\r\n\r\n  const handleStatusChange = (e) => {\r\n    const pid = parseInt(e.currentTarget.dataset.pid);\r\n    let rowdata = invoices.find(p => p.id == pid);\r\n    const status = rowdata.status=='Paid' ? 'UnPaid': 'Paid'\r\n    const newRow = {...rowdata, status}\r\n    API.updateInvoice(token['mr-token'], pid, newRow)\r\n      .then(resp => {\r\n        if(resp.status==200) return resp.json();\r\n        if(resp.status==400) throw JSON.stringify('Invalid data');\r\n        else throw 'Unknown reason. Please refresh';\r\n      })\r\n      .then(data => {\r\n        console.log(data);\r\n        //alert(\"Status Changed Successfully\");\r\n        setMessage(\"Status Changed Successfully\");\r\n        fetchList();\r\n      })\r\n      .catch(err => {console.log('api error');console.error(err); alert('Something went wrong, ' + String(err)); setMessage('Something went wrong, ' + String(err))});\r\n\r\n    console.log(e.target.value);\r\n  }\r\n\r\n  const handleReceiptUpload = (e) => {\r\n    if(e.target.files.length==1){\r\n      const selectedFile = e.target.files[0];\r\n      console.log(\"file is: \", selectedFile)\r\n      \r\n      const pid = parseInt(e.currentTarget.dataset.pid);\r\n      const formData = new FormData();\r\n\r\n\t\t  formData.append('receipt', selectedFile);\r\n\r\n      API.uploadReceipt(token['mr-token'], pid, formData)\r\n      .then(resp => {\r\n        if(resp.status==200) return resp.json();\r\n        if(resp.status==400) throw JSON.stringify(resp.json());\r\n        else throw 'Unknown reason. Please refresh';\r\n      })\r\n      .then(data => {\r\n        console.log(data);\r\n        alert(\"File Uploaded Successfully\");\r\n        setMessage('File Uploaded Successfully');\r\n        fetchList();\r\n      })\r\n      .catch(err => {console.log('api error');console.error(err); setMessage('Something went wrong, ' + String(err))});\r\n    }\r\n    \r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(startDate, endDate);\r\n    (async () => {\r\n      try{\r\n        const resp = await API.generateInvoices(token['mr-token'], {startDate, endDate})\r\n        if(resp.status!=200)\r\n          throw `invalid status ${resp.status} ${resp.statusText}`;\r\n        const result = await resp.json();\r\n        setMessage(`${result['count']} invoices created `, String(result['errors']));\r\n      }\r\n      catch(e){\r\n        console.log(\"api error\");\r\n        console.error(e);\r\n        setMessage('Something went wrong. See logs in admin panel. Please refresh.');\r\n      }\r\n    })();\r\n  }\r\n\r\n  useEffect(() => {\r\n    props.setTitle('Invoices');\r\n    fetchList();\r\n  }, [token, page]);\r\n\r\n  const fetchList = async (fromSearchBar = false) => {\r\n    if(fromSearchBar && page!=0){\r\n      setPage(0);\r\n      return;\r\n    }\r\n\r\n    console.log('fetching details', page);\r\n    let urlparams;\r\n    if(searchString){\r\n      urlparams = new URLSearchParams({page: page+1, search: searchString});\r\n    }        \r\n    else\r\n      urlparams = new URLSearchParams({page: page+1});\r\n\r\n    try{\r\n      setLoading(true);\r\n      const resp = await API.getInvoiceList(token['mr-token'], urlparams)\r\n      if(resp.status==200){\r\n        const data = await resp.json()\r\n        if(data['results']){\r\n          if(totalcount != data['count'])\r\n            setPage(0);\r\n          console.log('setting count', data['count'])\r\n          setTotalCount(data['count']);\r\n          setLoading(false);\r\n          setInvoices(data['results']);    \r\n        }        \r\n      }\r\n      else if(resp.status==401) AuthenticationService.handleUnauthorized();\r\n      else throw 'Something went wrong';  \r\n    }\r\n    catch(e){\r\n      console.log(\"api error\");\r\n      console.error(e);\r\n      setMessage('Something went wrong. Please refresh.');\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const handleNotesClose = (e) => {setNotesOpen(false)};\r\n\r\n  const handleNotesClick = (e) => {\r\n    const oid = parseInt(e.currentTarget.dataset.oid);\r\n    setNotesRowId(oid);\r\n    const rowdata = invoices.find(o => o.id == oid);\r\n    setNotesText(rowdata.notes);\r\n    setNotesOpen(true);\r\n  }\r\n\r\n  const handleNotesSave = (e) => {\r\n\r\n    const notes = notesText;\r\n    const pid = notesRowId;\r\n    const rowdata = invoices.find(i => i.id == pid);\r\n    const newRow = {...rowdata, notes}\r\n    let badData = false;\r\n    API.updateInvoice(token['mr-token'], pid, newRow)\r\n      .then(resp => {\r\n        if(resp.status==200) return resp.json();\r\n        if(resp.status==400) { badData=true; return resp.json();}\r\n        else throw 'Unknown reason. Please refresh';\r\n      })\r\n      .then(data => {\r\n        if(badData)\r\n          throw JSON.stringify(data);\r\n        console.log(data);\r\n        //alert(\"Notes Updated Successfully\");\r\n        setMessage(\"Notes Updated Successfully\");\r\n        fetchList();\r\n      })\r\n      .catch(err => {console.log('api error');console.error(err); setMessage('Something went wrong, ' + String(err))});\r\n    \r\n      setNotesOpen(false);\r\n  }\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n  return(\r\n    <div style={{ width: '100%', display: 'flex', justifyContent: 'flex-start', flexDirection: 'column'}}>\r\n      {message!='' && <div style={{color:\"red\"}}>{message}</div>}\r\n      {usertype==1 && \r\n        <div style={{ width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'baseline', flexWrap: 'wrap', flexDirection: 'row', marginBottom: '8px'}}>\r\n          <div>\r\n            <TextField variant=\"outlined\" size=\"small\" margin=\"none\" type=\"text\" value={searchString} className={classes.searchInput} text='Search' onChange={(e) => setSearchString(e.target.value)} onKeyPress={e => e.key==\"Enter\" && fetchList(true)}></TextField>\r\n            <Button color=\"primary\" variant=\"contained\" onClick={e => fetchList(true)}>Search</Button>\r\n          </div>\r\n          <div>  \r\n        <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            label=\"Start Date\"\r\n            name=\"startDate\"\r\n            type=\"date\"\r\n            margin=\"none\"\r\n            size=\"small\"\r\n            style={{marginRight: '4px'}}\r\n            value = {startDate}\r\n            onChange={(e) => setStartDate(e.target.value)}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            label=\"End Date\"\r\n            name=\"endtDate\"\r\n            type=\"date\"\r\n            margin=\"none\"\r\n            size=\"small\"\r\n            style={{marginRight: '4px'}}\r\n            value = {endDate}\r\n            onChange={(e) => setEndDate(e.target.value)}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n          <Button color=\"primary\" variant=\"contained\" onClick={handleSubmit}>Generate Invoices</Button>\r\n          </div>\r\n          <Dialog\r\n            open={notesOpen}\r\n            maxWidth='lg'\r\n            fullWidth={true}\r\n            onClose={handleNotesClose}\r\n          >\r\n            <DialogTitle>Notes</DialogTitle>\r\n            <DialogContent>\r\n            <TextField multiline value={notesText} text='Notes' variant='outlined' rows={4} fullWidth={true}\r\n              onChange={(e) => setNotesText(e.target.value)}></TextField>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleNotesClose} color=\"primary\">Cancel</Button>\r\n              <Button onClick={handleNotesSave} color=\"primary\" autoFocus>Save</Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </div>\r\n      }\r\n      <div style={{ width: '100%', minWidth:'600px', height:'calc(100vh - 110px)'}} className={classes.root}>\r\n        <DataGrid rows={invoices} columns={columns}\r\n          components={{\r\n            Toolbar: GridToolbar,\r\n          }}\r\n          loading={loading}\r\n          pagination\r\n          page={page}\r\n          pageSize = {50}\r\n          rowsPerPageOptions={[]}\r\n          rowCount = {totalcount}\r\n          paginationMode=\"server\"\r\n          onPageChange={(params) => {\r\n            setPage(params.page);\r\n          }} \r\n          disableColumnMenu\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}","import {Switch, Route} from 'react-router-dom'\r\nimport React from 'react'\r\nimport ProductDetails from './productDetails';\r\nimport StoreDetails from './StoreDetails';\r\nimport PurchaseList from './PurchaseList';\r\nimport InventoryList from './InventoryList';\r\nimport OrderList from './OrderList';\r\nimport Printing from './Printing';\r\nimport Dashboard from './Dashboard';\r\nimport AccountDetails from './AccountDetails';\r\nimport Invoices from './Invoices';\r\n\r\nfunction TheContent(props){\r\n  const setTitle = props.setTitle;\r\n  const usertype = props.usertype;\r\n\r\n  return (    \r\n        <Switch>\r\n        <Route exact path='/' render={ props => <div >Welcome To SFM Dropshipping</div>} />\r\n        {usertype!=2 && <Route exact path='/dashboard' render={(props) => (<Dashboard  setTitle={setTitle} usertype={usertype}/>)} />}\r\n        <Route exact path='/products' render={(props) => (<ProductDetails  setTitle={setTitle} usertype={usertype}/>)} />\r\n        {usertype!=2 && <Route exact path='/stores' render={(props) => (<StoreDetails setTitle={setTitle} usertype={usertype}/>)} />}\r\n        {usertype!=0 && <Route exact path='/purchases' render={(props) => (<PurchaseList  setTitle={setTitle}/>)} />}\r\n        {usertype!=0 && <Route exact path='/inventory' render={(props) => (<InventoryList setTitle={setTitle}/>)} />}\r\n        <Route exact path='/orders' render={(props) => (<OrderList setTitle={setTitle} usertype={usertype}/>)} />\r\n        {usertype!=0 && <Route exact path='/printing' render={(props) => (<Printing setTitle={setTitle} usertype={usertype}/>)} />}\r\n        <Route exact path='/accountdetails' render={(props) => (<AccountDetails setTitle={setTitle} usertype={usertype}/>)} />\r\n        {usertype!=2 &&<Route exact path='/invoices' render={(props) => (<Invoices setTitle={setTitle} usertype={usertype}/>)} />}\r\n          {/* <Route exact path=\"/register\" name=\"Register Page\" render={props => <Register {...props}/>} />\r\n          <Route exact path=\"/404\" name=\"Page 404\" render={props => <Page404 {...props}/>} />\r\n          <Route exact path=\"/500\" name=\"Page 500\" render={props => <Page500 {...props}/>} />\r\n          <Route path=\"/\" name=\"Home\" render={props => <TheLayout {...props}/>} /> */}\r\n        </Switch>\r\n  );\r\n}\r\n\r\nexport default TheContent;","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Box from '@material-ui/core/Box';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Container from '@material-ui/core/Container';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport Button from '@material-ui/core/Button';\r\nimport AccountCircleRoundedIcon from '@material-ui/icons/AccountCircleRounded';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { mainListItems, staffListItems, clientListItems , secondaryListItems } from './listItems';\r\nimport companylogo from './logo.png';\r\n// import Chart from './Chart';\r\n// import Deposits from './Deposits';\r\n\r\nimport {Route, BrowserRouter, Redirect} from 'react-router-dom';\r\nimport {Link} from 'react-router-dom';\r\nimport { useCookies } from 'react-cookie';\r\nimport AuthenticationService from '../authentication-service';\r\nimport TheContent from './TheContent';\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  toolbar: {\r\n    backgroundColor: \"rgb(47,83,149)\",\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n    paddingBottom: \"5px\",\r\n    paddingTop: \"10px\",\r\n  },\r\n  toolbarIcon: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: '0 8px',\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: 'none',\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    textAlign: 'center'\r\n  },\r\n  drawerPaper: {\r\n    position: 'relative',\r\n    whiteSpace: 'nowrap',\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: 'hidden',\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(9),\r\n    },\r\n  },\r\n  appBarSpacer: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    height: '100vh',\r\n    overflow: 'auto',\r\n    padding: '5px',\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(0),\r\n    paddingLeft: '0px',\r\n    paddingRight: '0px',\r\n    },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    flexDirection: 'column',\r\n  },\r\n  fixedHeight: {\r\n    height: 240,\r\n  },\r\n}));\r\n\r\nexport default function TheLayout() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(true);\r\n  const [title, setTitle] = React.useState('Home');\r\n  const [token] = useCookies(['mr-token']);\r\n  const [userInfo] = useCookies(['mr-user']);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleSignOut = (e) => {\r\n    console.log('sign out clicked');\r\n    AuthenticationService.signout();\r\n  }\r\n\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  if(!token['mr-token'])\r\n    return (<Redirect to='/signin'></Redirect>);\r\n\r\n  let usertype=0;\r\n  if(userInfo['mr-user']){\r\n    let usercode;\r\n    try{\r\n      usercode = parseInt(userInfo['mr-user'].split('-')[1]);\r\n    }catch(err){\r\n      console.log('unable to read user info from cookie');\r\n      handleSignOut();\r\n    }\r\n    if(usercode==136)\r\n      usertype=0;\r\n    else if(usercode==239)\r\n      usertype=1;\r\n    else if(usercode==578)\r\n      usertype=2;\r\n    else{\r\n      console.log('invalid usertype from cookie');\r\n      handleSignOut();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar position=\"absolute\" className={clsx(classes.appBar, open && classes.appBarShift)}>\r\n        <Toolbar className={classes.toolbar}>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleDrawerOpen}\r\n            className={clsx(classes.menuButton, open && classes.menuButtonHidden)}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography component=\"h1\" variant=\"h4\" color=\"inherit\" noWrap className={classes.title}>\r\n            {title}\r\n          </Typography>\r\n          <img src={companylogo} alt='SFM logo' style={{width:\"120px\"}}></img>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer\r\n        variant=\"permanent\"\r\n        classes={{\r\n          paper: clsx(classes.drawerPaper, !open && classes.drawerPaperClose),\r\n        }}\r\n        open={open}\r\n      >\r\n        <div className={classes.toolbarIcon}>\r\n          <IconButton onClick={handleDrawerClose}>\r\n            <ChevronLeftIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        {usertype==0 && <List>{clientListItems}</List>}\r\n        {usertype==1 && <List>{mainListItems}</List>}\r\n        {usertype==2 && <List>{staffListItems}</List>}\r\n        <Divider />\r\n        <ListItem button component={Link} to='/accountDetails'>\r\n          <ListItemIcon>\r\n            <AccountCircleRoundedIcon />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"My Account\" />\r\n        </ListItem>\r\n        <ListItem button onClick={handleSignOut}>\r\n          <ListItemIcon>\r\n            <ExitToAppIcon color=\"secondary\"/>\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"Sign Out\" />\r\n        </ListItem>\r\n        <Divider />\r\n        {usertype==1 && <List>{secondaryListItems}</List> }\r\n      </Drawer>\r\n      <main className={classes.content}>\r\n        <div className={classes.appBarSpacer} />\r\n        <Container maxWidth={false} className={classes.container}>\r\n          <TheContent setTitle={setTitle} usertype={usertype}/>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}","export const APIROOT = 'https://sfm-dropshipping.herokuapp.com';\r\n//export const APIROOT = 'http://127.0.0.1:8000';\r\n//export const APIROOT = 'https://api.sfmdropship.com';\r\n\r\nexport default class API{\r\n  static getProductList(token){\r\n    return fetch(APIROOT + '/api/products/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static getProduct(token, id){\r\n    return fetch(APIROOT + '/api/products/' + id + '/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static addProduct(token, data){\r\n    return fetch(APIROOT + '/api/products/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static updateProduct(token, id, data){\r\n    return fetch(APIROOT + '/api/products/' + id + '/', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static deleteProduct(token, id){\r\n    return fetch(APIROOT + '/api/products/' + id + '/', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n    })\r\n  }\r\n\r\n  static getStoreList(token){\r\n    return fetch(APIROOT + '/api/stores/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static getStore(token, id){\r\n    return fetch(APIROOT + '/api/stores/' + id + '/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static updateStore(token, id, data){\r\n    return fetch(APIROOT + '/api/stores/' + id + '/', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static getPurchasesList(token, urlparams){\r\n    return fetch(APIROOT + '/api/purchases/?' + urlparams, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static getPurchase(token, id){\r\n    return fetch(APIROOT + '/api/purchases/' + id + '/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static addPurchase(token, data){\r\n    return fetch(APIROOT + '/api/purchases/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static updatePurchase(token, id, data){\r\n    return fetch(APIROOT + '/api/purchases/' + id + '/', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static deletePurchase(token, id){\r\n    return fetch(APIROOT + '/api/purchases/' + id + '/', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n    })\r\n  }\r\n\r\n  static getInventoryList(token){\r\n    return fetch(APIROOT + '/api/inventory/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static getOrderList(token, urlparams){\r\n    return fetch(APIROOT + '/api/orders/?' + urlparams, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static getPrintingList(token){\r\n    return fetch(APIROOT + '/api/printing/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static getOrder(token, id){\r\n    return fetch(APIROOT + '/api/orders/' + id + '/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static addOrder(token, data){\r\n    return fetch(APIROOT + '/api/orders/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static deleteOrder(token, id){\r\n    return fetch(APIROOT + '/api/orders/' + id + '/', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n    })\r\n  }\r\n\r\n  static updateOrder(token, id, data){\r\n    return fetch(APIROOT + '/api/orders/' + id + '/', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static getInvoiceList(token, urlparams){\r\n    return fetch(APIROOT + '/api/invoices/?' + urlparams, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static getInvoice(token, id){\r\n    return fetch(APIROOT + '/api/invoices/' + id + '/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static updateInvoice(token, id, data){\r\n    return fetch(APIROOT + '/api/invoices/' + id + '/', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static uploadReceipt(token, id, data){\r\n    return fetch(APIROOT + '/api/invoices/' + id + '/upload_receipt/', {\r\n      method: 'POST',\r\n      headers: {\r\n        // 'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: data\r\n    })\r\n  }\r\n\r\n  static generateInvoices(token, data){\r\n    return fetch(APIROOT + '/api/invoices/generate_invoices/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static uploadOrdersFile(token, data){\r\n    return fetch(APIROOT + '/api/orders/import_ordersfile/',\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n        headers: {\r\n          // 'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Token ${token}`\r\n        },\r\n\t\t\t\tbody: data,\r\n\t\t\t}\r\n\t\t)\r\n  }\r\n\r\n  static uploadShippingFile(token, data){\r\n    return fetch(APIROOT + '/api/orders/import_shippingfile/',\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n        headers: {\r\n          // 'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Token ${token}`\r\n        },\r\n\t\t\t\tbody: data,\r\n\t\t\t}\r\n\t\t)\r\n  }\r\n\r\n  static uploadPurchasesFile(token, data){\r\n    return fetch(APIROOT + '/api/purchases/import_file/',\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n        headers: {\r\n          // 'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Token ${token}`\r\n        },\r\n\t\t\t\tbody: data,\r\n\t\t\t}\r\n\t\t)\r\n  }\r\n\r\n  static uploadProductsFile(token, data){\r\n    return fetch(APIROOT + '/api/products/import_file/',\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n        headers: {\r\n          // 'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Token ${token}`\r\n        },\r\n\t\t\t\tbody: data,\r\n\t\t\t}\r\n\t\t)\r\n  }\r\n\r\n  static uploadInventoryFile(token, data){\r\n    return fetch(APIROOT + '/api/inventory/import_file/',\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n        headers: {\r\n          // 'Content-Type': 'multipart/form-data',\r\n          'Authorization': `Token ${token}`\r\n        },\r\n\t\t\t\tbody: data,\r\n\t\t\t}\r\n\t\t)\r\n  }\r\n\r\n  static getOverview(token, data){\r\n    return fetch(APIROOT + '/api/orders/get_overview/',\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static signinUser(credentials){\r\n    return fetch(APIROOT + '/api-token-auth/', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(credentials)\r\n    })\r\n  }\r\n\r\n  static getAccountDetails(token, id){\r\n    return fetch(APIROOT + '/api/accounts/' + id + '/', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      }\r\n    })\r\n  }\r\n\r\n  static updateProfile(token, id, data){\r\n    return fetch(APIROOT + '/api/accounts/update_profile/' + id + '/', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n\r\n  static changePassword(token, id, data){\r\n    return fetch(APIROOT + '/api/accounts/change_password' + id + '/', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Token ${token}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n  }\r\n}"],"sourceRoot":""}