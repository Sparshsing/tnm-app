(this["webpackJsonptnm-app"]=this["webpackJsonptnm-app"]||[]).push([[6],{266:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Re}));var n,a,o,i,c,s=r(44),l=r(17),d=r(12),u=r(0),h=r.n(u),j=r(40),b=r(114),p=r(214),m=r(278),f=r(264),O=r(251),g=r(225),x=r(203),y=r(242),v=r(227),S=r(213),k=r(161),w=r.n(k),N=r(162),C=r.n(N),T=r(228),P=r(230),I=r(231),D=r(232),W=r(240),E=r(154),z=r.n(E),L=r(233),F=r(234),A=r(235),M=r(236),V=r(237),B=r(238),U=r(239),q=r(241),G=r(10),Y=r(46),R=r(3),H=Object(R.jsxs)("div",{children:[Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/dashboard",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(z.a,{})}),Object(R.jsx)(D.a,{primary:"Dashboard"})]}),Object(R.jsxs)(P.a,(n={button:!0},Object(l.a)(n,"button",!0),Object(l.a)(n,"component",G.b),Object(l.a)(n,"to","/orders"),Object(l.a)(n,"children",[Object(R.jsx)(I.a,{children:Object(R.jsx)(L.a,{})}),Object(R.jsx)(D.a,{primary:"Orders"})]),n)),Object(R.jsxs)(P.a,(a={button:!0},Object(l.a)(a,"button",!0),Object(l.a)(a,"component",G.b),Object(l.a)(a,"to","/printing"),Object(l.a)(a,"children",[Object(R.jsx)(I.a,{children:Object(R.jsx)(F.a,{})}),Object(R.jsx)(D.a,{primary:"Printing"})]),a)),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/stores",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(A.a,{})}),Object(R.jsx)(D.a,{primary:"Stores"})]}),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/inventory",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(M.a,{})}),Object(R.jsx)(D.a,{primary:"Inventory"})]}),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/purchases",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(V.a,{})}),Object(R.jsx)(D.a,{primary:"Purchases"})]}),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/products",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(B.a,{})}),Object(R.jsx)(D.a,{primary:"Products"})]}),Object(R.jsxs)(P.a,{button:!0,children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(U.a,{})}),Object(R.jsx)(D.a,{primary:"Invoice"})]})]}),J=Object(R.jsxs)("div",{children:[Object(R.jsxs)(P.a,(o={button:!0},Object(l.a)(o,"button",!0),Object(l.a)(o,"component",G.b),Object(l.a)(o,"to","/orders"),Object(l.a)(o,"children",[Object(R.jsx)(I.a,{children:Object(R.jsx)(L.a,{})}),Object(R.jsx)(D.a,{primary:"Orders"})]),o)),Object(R.jsxs)(P.a,(i={button:!0},Object(l.a)(i,"button",!0),Object(l.a)(i,"component",G.b),Object(l.a)(i,"to","/printing"),Object(l.a)(i,"children",[Object(R.jsx)(I.a,{children:Object(R.jsx)(F.a,{})}),Object(R.jsx)(D.a,{primary:"Printing"})]),i)),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/inventory",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(M.a,{})}),Object(R.jsx)(D.a,{primary:"Inventory"})]}),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/purchases",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(V.a,{})}),Object(R.jsx)(D.a,{primary:"Purchases"})]}),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/products",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(B.a,{})}),Object(R.jsx)(D.a,{primary:"Products"})]})]}),K=Object(R.jsxs)("div",{children:[Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/dashboard",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(z.a,{})}),Object(R.jsx)(D.a,{primary:"Dashboard"})]}),Object(R.jsxs)(P.a,(c={button:!0},Object(l.a)(c,"button",!0),Object(l.a)(c,"component",G.b),Object(l.a)(c,"to","/orders"),Object(l.a)(c,"children",[Object(R.jsx)(I.a,{children:Object(R.jsx)(L.a,{})}),Object(R.jsx)(D.a,{primary:"Orders"})]),c)),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/stores",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(A.a,{})}),Object(R.jsx)(D.a,{primary:"Stores"})]}),Object(R.jsxs)(P.a,{button:!0,component:G.b,to:"/products",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(B.a,{})}),Object(R.jsx)(D.a,{primary:"Products"})]}),Object(R.jsxs)(P.a,{button:!0,children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(U.a,{})}),Object(R.jsx)(D.a,{primary:"Invoice"})]})]}),_=Object(R.jsxs)("div",{children:[Object(R.jsx)(W.a,{inset:!0,children:"Advanced"}),Object(R.jsxs)(P.a,{button:!0,component:"a",href:Y.a+"/admin",children:[Object(R.jsx)(I.a,{children:Object(R.jsx)(q.a,{})}),Object(R.jsx)(D.a,{primary:"Django Admin"})]})]}),$=r(1),X=r(212),Z=(r(21),r(61)),Q=r(277),ee=r(215),te=Object(b.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function re(e){var t=te(),r=Object(X.a)(["mr-token"]),n=Object(s.a)(r,1)[0],a=Object(X.a)(["mr-userInfo"]),o=Object(s.a)(a,1)[0],i=Object(u.useState)({}),c=Object(s.a)(i,2),l=c[0],d=c[1],h=Object(u.useState)(!1),j=Object(s.a)(h,3),b=j[0],p=j[1],m=(j[2],!1);console.log("opened form");var f=function(t){e.setMode("none")};return n["mr-token"]?1!=parseInt(o["mr-user"].split("-")[1])?Object(R.jsx)($.a,{to:"/"}):b?Object(R.jsxs)("div",{children:["Saved Succcesfully ",Object(R.jsx)(T.a,{onClick:f,children:"Go back to Products"})]}):Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)(x.a,{children:"update"==e.mode?"Update":"Add"}),Object(R.jsx)(T.a,{onClick:f,children:"Go back"})]}),Object(R.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var r=new FormData(t.target),a={};r.forEach((function(e,t){return a[t]=e})),console.log("sending data"),console.log(a),"update"==e.mode?Y.b.updateProduct(n["mr-token"],e.id,a).then((function(e){return 400==e.status&&(console.log(e),p(!1),m=!0),200==e.status&&p(!0),e.json()})).then((function(e){m&&d(e)})).catch((function(e){console.log("api error"),console.error(e)})):Y.b.addProduct(n["mr-token"],a).then((function(e){return console.log("saving",e.status),400==e.status&&(console.log(e),p(!1),m=!0),201==e.status&&p(!0),e.json()})).then((function(e){m&&d(e)})).catch((function(e){console.log("api error"),console.error(e)}))},children:[0!=Object.keys(l).length&&Object(R.jsxs)(ee.a,{error:!0,children:["Invalid data ",l.form]}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"style",label:"Style",name:"style",disabled:"update"==e.mode,helperText:l.style?l.style[0]:"",error:!!l.style,defaultValue:"update"==e.mode?e.data.style:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"size",label:"Size",name:"size",disabled:"update"==e.mode,helperText:l.size?l.size[0]:"",error:!!l.size,defaultValue:"update"==e.mode?e.data.size:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"color",label:"Color",name:"color",disabled:"update"==e.mode,helperText:l.color?l.color[0]:"",error:!!l.color,defaultValue:"update"==e.mode?e.data.color:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",disabled:"update"==e.mode,helperText:l.sku?l.sku[0]:"",error:!!l.sku,defaultValue:"update"==e.mode?e.data.sku:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"cost",label:"Cost",name:"cost",type:"number",inputProps:{step:.01},helperText:l.cost?l.cost[0]:"",error:!!l.cost,defaultValue:"update"==e.mode?e.data.cost:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"price",label:"Price",name:"price",type:"number",inputProps:{step:.01},helperText:l.price?l.price[0]:"",error:!!l.price,defaultValue:"update"==e.mode?e.data.price:""}),Object(R.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(R.jsx)($.a,{to:"/signin"})}var ne=[{field:"sfmId",headerName:"SFM ID",width:150},{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"sku",headerName:"SKU",width:150},{field:"cost",headerName:"Cost",width:150},{field:"price",headerName:"Price",width:150},{field:"amountInStock",headerName:"Amount In Stock",width:150}];var ae=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Object(X.a)(["mr-token"]),o=Object(s.a)(a,1)[0],i=Object(X.a)(["mr-user"]),c=Object(s.a)(i,1)[0],l=Object(u.useState)("none"),d=Object(s.a)(l,2),h=d[0],j=d[1],b=Object(u.useState)([]),p=Object(s.a)(b,2),m=p[0],f=p[1],O=Object(u.useState)({}),g=Object(s.a)(O,2),x=g[0],v=g[1],S=Object(u.useState)(null),k=Object(s.a)(S,2),w=k[0],N=k[1],C=Object(u.useState)(!1),P=Object(s.a)(C,2),I=P[0],D=P[1],W=Object(u.useState)(""),E=Object(s.a)(W,2),z=E[0],L=E[1],F=parseInt(c["mr-user"].split("-")[1]),A=[{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"sku",headerName:"SKU",width:150}];function M(){Y.b.getProductList(o["mr-token"]).then((function(e){if(console.log(e),200==e.status)return e.json();throw"Something went wrong"})).then((function(e){console.log(e),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}return 0==F&&A.push({field:"price",headerName:"Price",width:150}),Object(u.useEffect)((function(){"none"==h&&M()}),[o,h]),o["mr-token"]?Object(R.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(R.jsx)("h3",{children:"Products"}),""==z?"":Object(R.jsx)("div",{style:{color:"red"},children:z}),Object(R.jsx)(y.a,{style:{width:"100%",marginBottom:"15px"}}),"none"==h?Object(R.jsxs)("div",{children:[1==F&&Object(R.jsxs)("div",{children:[Object(R.jsx)(T.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){j("add")},children:"Add"}),Object(R.jsx)(T.a,{style:{width:"60px",marginBottom:"10px"},disabled:1!=m.length,onClick:function(e){if(console.log("update clicked"),1==m.length){var t=m[0];f([]),Y.b.getProduct(o["mr-token"],t).then((function(e){return e.json()})).then((function(e){console.log("filling formdata"),v(e),j("update")})).catch((function(e){console.log("api error"),console.error(e)}))}},color:"primary",variant:"contained",children:"Update"}),Object(R.jsxs)("form",{children:[Object(R.jsx)(Q.a,{type:"file",name:"myfile",onChange:function(e){1==e.target.files.length?(N(e.target.files[0]),console.log("file is: ",e.target.files[0]),D(!0)):(N(null),D(!1))}}),Object(R.jsx)(T.a,{type:"submit",disabled:!I,onClick:function(e){e.preventDefault();var t=new FormData;t.append("productsFile",w),I&&-1==w.name.search(/product/i)?L("Please make sure you have selected products file. File name should contain the word product"):Y.b.uploadProductsFile(o["mr-token"],t).then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(L("Successfully imported all records"),console.log("Successfully imported all records")):(L("Partial Success (see error records in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):L("Failed import due to unknown reason"),console.log("setting mode"),D(!1),M(),j("none")})).catch((function(e){console.error("Error:",e),L("Failed import due to unknown reasons")}))},color:"primary",variant:"contained",children:"Import Products"})]})]}),Object(R.jsx)("div",{style:{width:"100%",minWidth:"600px",height:"500px"},children:Object(R.jsx)(Z.a,{rows:r,columns:1==F?ne:A,checkboxSelection:!0,components:{Toolbar:Z.b},onSelectionModelChange:function(e){console.log(e),f(e.selectionModel)}})})]}):Object(R.jsx)(re,{id:"update"==h?m:null,data:"update"==h?x:null,mode:h,setMode:j})]}):Object(R.jsx)($.a,{to:"/signin"})},oe=[{field:"storeName",headerName:"Store Name",width:150},{field:"storeCode",headerName:"Store Code",width:150},{field:"emailAddress",headerName:"Email Address",width:150},{field:"addressLine1",headerName:"Addres Line 1",width:150},{field:"addressLine2",headerName:"Adress Line 2",width:150},{field:"city",headerName:"City",width:150},{field:"state",headerName:"State",width:150},{field:"zipCode",headerName:"Zip Code",width:150}];var ie=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Object(X.a)(["mr-token"]),o=Object(s.a)(a,1)[0],i=Object(X.a)(["mr-user"]),c=Object(s.a)(i,1)[0];return Object(u.useEffect)((function(){Y.b.getStoreList(o["mr-token"]).then((function(e){return e.json()})).then((function(e){return console.log(e),e.forEach((function(e,t){return e.id=t+1})),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]),o["mr-token"]?2==parseInt(c["mr-user"].split("-")[1])?Object(R.jsx)($.a,{to:"/"}):Object(R.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(R.jsx)("h3",{children:"Stores"}),Object(R.jsx)(y.a,{style:{width:"100%",marginBottom:"15px"}}),Object(R.jsx)("div",{style:{width:"100%",minWidth:"600px"},children:Object(R.jsx)(Z.a,{rows:r,columns:oe,autoHeight:!0,components:{Toolbar:Z.b}})})]}):Object(R.jsx)($.a,{to:"/signin"})},ce=r(98),se=r.n(ce),le=r(99),de=r(100),ue=r(254),he=r(257),je=r(258),be=r(54),pe=r(246),me=r(270),fe=Object(b.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Oe(e){var t=fe(),r=Object(X.a)(["mr-token"]),n=Object(s.a)(r,1)[0],a=Object(u.useState)({}),o=Object(s.a)(a,2),i=o[0],c=o[1],l=Object(u.useState)(!1),h=Object(s.a)(l,2),j=h[0],b=h[1],p=Object(u.useState)(!1),m=Object(s.a)(p,2),f=m[0],O=m[1],g=Object(u.useState)([]),y=Object(s.a)(g,2),v=y[0],S=y[1],k=Object(u.useState)([]),w=Object(s.a)(k,2),N=w[0],C=w[1],P=Object(u.useState)([]),I=Object(s.a)(P,2),D=I[0],W=I[1],E=Object(u.useState)([]),z=Object(s.a)(E,2),L=z[0],F=z[1],A=Object(u.useState)([]),M=Object(s.a)(A,2),V=M[0],B=M[1],U=!1;console.log("opened form"),console.log(N),console.log(V),Object(u.useEffect)((function(){Y.b.getProductList(n["mr-token"]).then((function(e){var t=e.map((function(e){return e.style}));C(Object(be.a)(new Set(t)));var r=e.map((function(e){return e.size}));W(Object(be.a)(new Set(r)));var n=e.map((function(e){return e.color}));F(Object(be.a)(new Set(n))),B(e.map((function(e){return e.sfmId})))})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);var q=function(e){O(!1)},G=function(t){console.log(t),"update"==e.mode?Y.b.updatePurchase(n["mr-token"],e.id,t).then((function(e){return 400==e.status&&(console.log(e),b(!1),U=!0),200==e.status&&b(!0),e.json()})).then((function(e){U&&c(e)})).catch((function(e){console.log("api error"),console.error(e)})):Y.b.addPurchase(n["mr-token"],t).then((function(e){return console.log("saving",e.status),400==e.status&&(console.log(e),b(!1),U=!0),201==e.status&&b(!0),e.json()})).then((function(e){U&&c(e)})).catch((function(e){console.log("api error"),console.error(e)}))},H=function(t){e.setMode("none")};return n["mr-token"]?j?Object(R.jsxs)("div",{children:["Saved Succcesfully ",Object(R.jsx)(T.a,{onClick:H,children:"Go back to Purchases"})]}):Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)(x.a,{children:"update"==e.mode?"Update":"Add"}),Object(R.jsx)(T.a,{onClick:H,children:"Go back"})]}),Object(R.jsxs)(ue.a,{open:f,onClose:q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(R.jsx)(he.a,{id:"alert-dialog-title",children:'"The Product does not Exist. New Product will be created. Continue?"'}),Object(R.jsxs)(je.a,{children:[Object(R.jsx)(T.a,{onClick:q,color:"primary",children:"Cancel"}),Object(R.jsx)(T.a,{onClick:function(e){G(v)},color:"primary",autoFocus:!0,children:"Confirm"})]})]}),Object(R.jsxs)("form",{className:t.form,onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),r={};console.log(t),t.forEach((function(e,t){return r[t]=e})),console.log("sending data");var n=r.style+"-"+r.size+"-"+r.color;S(r),V.find((function(e){return e==n}))?G(r):O(!0)},children:[0!=Object.keys(i).length&&Object(R.jsx)(ee.a,{error:!0,children:"Invalid data"}),Object(R.jsxs)(Q.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"status",label:"Status",name:"status",helperText:i.status?i.status[0]:"",error:!!i.status,defaultValue:"update"==e.mode?e.data.status:"",children:[Object(R.jsx)(pe.a,{value:"In Transit",children:"In Transit"},0),Object(R.jsx)(pe.a,{value:"Received",children:"Received"},1)]}),Object(R.jsx)(me.a,{id:"styleCombo",options:N,freeSolo:!0,getOptionLabel:function(e){return e},fullWidth:!0,renderInput:function(t){return Object(R.jsx)(Q.a,Object(d.a)(Object(d.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,id:"style",label:"Style",name:"style",disabled:"update"==e.mode,helperText:i.style?i.style[0]:"",error:!!i.style,defaultValue:"update"==e.mode?e.data.style:""}))}}),Object(R.jsx)(me.a,{id:"sizeCombo",options:D,freeSolo:!0,getOptionLabel:function(e){return e},renderInput:function(t){return Object(R.jsx)(Q.a,Object(d.a)(Object(d.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"size",label:"Size",name:"size",disabled:"update"==e.mode,helperText:i.size?i.size[0]:"",error:!!i.size,defaultValue:"update"==e.mode?e.data.size:""}))}}),Object(R.jsx)(me.a,{id:"colorCombo",options:L,freeSolo:!0,getOptionLabel:function(e){return e},renderInput:function(t){return Object(R.jsx)(Q.a,Object(d.a)(Object(d.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,id:"color",label:"Color",name:"color",disabled:"update"==e.mode,helperText:i.color?i.color[0]:"",error:!!i.color,defaultValue:"update"==e.mode?e.data.color:""}))}}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"company",label:"Company",name:"company",helperText:i.company?i.company[0]:"",error:!!i.company,defaultValue:"update"==e.mode?e.data.company:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"warehouse",label:"Warehouse",name:"warehouse",helperText:i.warehouse?i.warehouse[0]:"",error:!!i.warehouse,defaultValue:"update"==e.mode?e.data.warehouse:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"ordered",label:"Ordered",name:"ordered",type:"number",helperText:i.ordered?i.ordered[0]:"",error:!!i.ordered,defaultValue:"update"==e.mode?e.data.ordered:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderDate",label:"order Date",name:"orderDate",type:"date",helperText:i.orderDate?i.orderDate[0]:"",error:!!i.orderDate,InputLabelProps:{shrink:!0},defaultValue:"update"==e.mode?e.data.orderDate:""}),Object(R.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(R.jsx)($.a,{to:"/signin"})}var ge=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Object(X.a)(["mr-token"]),o=Object(s.a)(a,1)[0],i=Object(X.a)(["mr-user"]),c=Object(s.a)(i,1)[0],l=Object(u.useState)("none"),h=Object(s.a)(l,2),j=h[0],b=h[1],p=Object(u.useState)([]),m=Object(s.a)(p,2),f=m[0],O=m[1],g=Object(u.useState)({}),x=Object(s.a)(g,2),v=x[0],S=x[1],k=Object(u.useState)(null),w=Object(s.a)(k,2),N=w[0],C=w[1],P=Object(u.useState)(!1),I=Object(s.a)(P,2),D=I[0],W=I[1],E=Object(u.useState)(""),z=Object(s.a)(E,2),L=z[0],F=z[1],A=Object(u.useState)(!1),M=Object(s.a)(A,2),V=M[0],B=M[1],U=function(e){B(!1)},q=[{field:"id",headerName:"Purchase Id",width:150,hide:!0},{field:"status",headerName:"Status",width:150,renderCell:function(e){return Object(R.jsx)(T.a,{variant:"contained",color:"In Transit"==e.value?"secondary":"primary",size:"small","data-pid":e.id,onClick:G,style:{marginLeft:16},children:e.value})}},{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"company",headerName:"Company"},{field:"warehouse",headerName:"Warehouse",width:150},{field:"ordered",headerName:"Ordered",width:150},{field:"orderDate",headerName:"Order Date",width:150},{field:"arrivalDate",headerName:"Arrival Date",width:150},{field:"sfmId",headerName:"SFM ID",width:150}],G=function(e){var t=parseInt(e.currentTarget.dataset.pid),a=r.find((function(e){return e.id==t})),i="In Transit"==a.status?"Received":"In Transit",c=Object(d.a)(Object(d.a)({},a),{},{status:i});console.log(c),Y.b.updatePurchase(o["mr-token"],t,c).then((function(e){if(200==e.status)return e.json();throw 400==e.status?JSON.stringify(e.json()):"Something went wrong. Please Refresh"})).then((function(e){var t=r.map((function(t){return t.id==e.id?e:t}));F("updated purchase"),console.log(t.map((function(e){return e.id}))),n(t)})).catch((function(e){console.log("api error"),console.error(e),F("Something went wrong, "+String(e))}))};function H(){console.log("fetching data"),Y.b.getPurchasesList(o["mr-token"]).then((function(e){if(200==e.status)return e.json();throw"Something went wrong"})).then((function(e){console.log(e),O([]),n(e)})).catch((function(e){console.log("api error"),console.error(e),F(String(e))}))}return Object(u.useEffect)((function(){console.log("useeffect called"),"none"==j&&H()}),[o,j]),Object(u.useEffect)((function(){console.log(o)}),[j]),o["mr-token"]?0==parseInt(c["mr-user"].split("-")[1])?Object(R.jsx)($.a,{to:"/"}):Object(R.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(R.jsx)("h3",{children:"Purchases"}),""==L?"":Object(R.jsx)("div",{style:{color:"red"},children:L}),Object(R.jsx)(y.a,{style:{width:"100%",marginBottom:"10px"}}),"none"==j?Object(R.jsxs)("div",{children:[Object(R.jsx)(T.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){b("add")},children:"Add"}),Object(R.jsx)(T.a,{style:{width:"60px",marginBottom:"10px"},disabled:1!=f.length,onClick:function(e){console.log("update clicked"),1==f.length&&Y.b.getPurchase(o["mr-token"],f[0]).then((function(e){return e.json()})).then((function(e){console.log("filling formdata"),S(e),b("update")})).catch((function(e){console.log("api error"),console.error(e)}))},color:"primary",variant:"contained",children:"Update"}),Object(R.jsx)(T.a,{variant:"contained",color:"secondary",disabled:!(f.length>0),onClick:function(e){B(!0)},children:"Delete Selected"}),Object(R.jsxs)(ue.a,{open:V,onClose:U,children:[Object(R.jsxs)(he.a,{id:"alert-dialog-title",children:['"Are you sure you want to delete the ',f.length,' items"']}),Object(R.jsxs)(je.a,{children:[Object(R.jsx)(T.a,{onClick:U,color:"primary",children:"Cancel"}),Object(R.jsx)(T.a,{onClick:function(e){console.log("u confirmed delete");var t=[],r=function(){var e=Object(de.a)(se.a.mark((function e(){var r,n,a,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(le.a)(f),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=23;break}return a=n.value,e.prev=5,e.next=8,Y.b.deletePurchase(o["mr-token"],a);case 8:if(200!=(i=e.sent).status&&204!=i.status){e.next=13;break}console.log("deleted purchase with id ".concat(a)),e.next=15;break;case 13:throw console.log("Failed to delete purchase with id ".concat(a)),"Failed to delete purchase with id ".concat(a);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("could not delete purchase id ".concat(a),e.t0),t.push("could not delete purchase id ".concat(a));case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),r.e(e.t1);case 28:return e.prev=28,r.f(),e.finish(28);case 31:t.length>0?F("Some rows were not deleted\n"+t.toString()+" Pleae refresh"):F("Deleted successfully. Please refresh");case 32:case"end":return e.stop()}}),e,null,[[1,25,28,31],[5,17]])})));return function(){return e.apply(this,arguments)}}();B(!1),r()},color:"primary",autoFocus:!0,children:"Confirm"})]})]}),Object(R.jsxs)("form",{children:[Object(R.jsx)(Q.a,{type:"file",name:"myfile",onChange:function(e){1==e.target.files.length?(C(e.target.files[0]),console.log("file is: ",e.target.files[0]),W(!0)):(C(null),W(!1))}}),Object(R.jsx)(T.a,{type:"submit",disabled:!D,onClick:function(e){e.preventDefault();var t=new FormData;t.append("purchaseFile",N),D&&-1==N.name.search(/purchase/i)?F("Please make sure you have selected purchase file. File name should contain the word purchase"):Y.b.uploadPurchasesFile(o["mr-token"],t).then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(F("Successfully imported all records"),console.log("Successfully imported all records")):(F("Partial Success (see error records in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):F("Failed import due to unknown reason"),console.log("setting mode"),H(),b("none"),W(!1)})).catch((function(e){console.error("Error:",e),F("Failed import due to unknown reasons")}))},color:"primary",variant:"contained",children:"Import"})]}),Object(R.jsx)("div",{style:{width:"100%",minWidth:"600px",flexGrow:1},children:Object(R.jsx)(Z.a,{rows:r,columns:q,checkboxSelection:!0,autoHeight:!0,components:{Toolbar:Z.b},onSelectionModelChange:function(e){console.log(e),O(e.selectionModel)},disableSelectionOnClick:!0})})]}):Object(R.jsx)(Oe,{id:"update"==j?f:null,data:"update"==j?v:null,mode:j,setMode:b})]}):Object(R.jsx)($.a,{to:"/signin"})},xe=[{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"productAvailability",headerName:"Product Availabity",width:150},{field:"inStock",headerName:"In Stock",width:150},{field:"unfulfilledCount",headerName:"Unfulfilled Count",width:150},{field:"inTransit",headerName:"In Transit",width:150},{field:"arrivalDate",headerName:"ArrivaL Date",width:150},{field:"trueCount",headerName:"True Count",width:150},{field:"minimum",headerName:"Minimum",width:150},{field:"maximum",headerName:"Maximum",width:150},{field:"shortCount",headerName:"Short Count",width:150},{field:"needToPurchase",headerName:"Need to Purchase",width:150}];var ye=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Object(X.a)(["mr-token"]),o=Object(s.a)(a,1)[0],i=Object(X.a)(["mr-user"]),c=Object(s.a)(i,1)[0];return Object(u.useEffect)((function(){console.log(Object(d.a)({},r[0])),Y.b.getInventoryList(o["mr-token"]).then((function(e){return console.log(e),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]),Object(u.useEffect)((function(){console.log(o)}),[o]),o["mr-token"]?0==parseInt(c["mr-user"].split("-")[1])?Object(R.jsx)($.a,{to:"/"}):Object(R.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(R.jsx)("h3",{children:"Inventory"}),Object(R.jsx)(y.a,{style:{width:"100%",marginBottom:"15px"}}),Object(R.jsx)("div",{style:{width:"100%",minWidth:"600px",height:"500px"},children:Object(R.jsx)(Z.a,{rows:r,columns:xe,components:{Toolbar:Z.b}})})]}):Object(R.jsx)($.a,{to:"/signin"})},ve=Object(b.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Se(e){var t=ve(),r=Object(X.a)(["mr-token"]),n=Object(s.a)(r,1)[0],a=Object(u.useState)({}),o=Object(s.a)(a,2),i=o[0],c=o[1],l=Object(u.useState)(!1),d=Object(s.a)(l,3),h=d[0],j=d[1],b=(d[2],Object(u.useState)([])),p=Object(s.a)(b,2),m=p[0],f=p[1],O=Object(u.useState)([]),g=Object(s.a)(O,2),y=g[0],v=g[1],S=!1;console.log("opened form"),Object(u.useEffect)((function(){Y.b.getProductList(n["mr-token"]).then((function(e){return e.json()})).then((function(e){var t=[{prop:"style",direction:1},{prop:"size",direction:1},{prop:"color",direction:1}];return e.sort((function(e,r){for(var n=0,a=0;n<t.length&&0===a;)a=t[n].direction*(e[t[n].prop].toString()<r[t[n].prop].toString()?-1:e[t[n].prop].toString()>r[t[n].prop].toString()?1:0),n++;return a})),f(e)})).catch((function(e){console.log("api error"),console.error(e)})),Y.b.getStoreList(n["mr-token"]).then((function(e){return e.json()})).then((function(e){return console.log(e),v(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);var k=function(t){e.setMode("none")};return n["mr-token"]?h?Object(R.jsxs)("div",{children:["Saved Succcesfully ",Object(R.jsx)(T.a,{onClick:k,children:"Go back to Orders"})]}):Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)(x.a,{children:"update"==e.mode?"Update":"Add"}),Object(R.jsx)(T.a,{onClick:k,children:"Go back"})]}),Object(R.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var r=new FormData(t.target),a={};r.forEach((function(e,t){return a[t]=e}));var o=a.sfmId.split("-");a.style=o.slice(0,o.length-2).join("-"),a.size=o[o.length-2],a.color=o[o.length-1],""==a.saleDate&&(a.saleDate=null),""==a.shipDate&&(a.shipDate=null),console.log("sending data"),console.log(a),"update"==e.mode?Y.b.updateOrder(n["mr-token"],e.id,a).then((function(e){return 400==e.status&&(console.log(e),j(!1),S=!0),200==e.status&&j(!0),e.json()})).then((function(e){S&&c(e)})).catch((function(e){console.log("api error"),console.error(e)})):Y.b.addOrder(n["mr-token"],a).then((function(e){return console.log("saving",e.status),400==e.status&&(console.log(e),j(!1),S=!0),201==e.status&&j(!0),e.json()})).then((function(e){S&&c(e)})).catch((function(e){console.log("api error"),console.error(e)}))},children:[0!=Object.keys(i).length&&Object(R.jsxs)(ee.a,{error:!0,children:["Invalid data ",i.form]}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"store",label:"Store Name",name:"store",helperText:i.store?i.store[0]:"",error:!!i.store,children:y.map((function(e){return Object(R.jsx)(pe.a,{value:e.storeCode,children:e.storeName},e.storeCode)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"orderStatus",label:"Order Status",name:"orderStatus",helperText:i.orderStatus?i.orderStatus[0]:"",error:!!i.orderStatus,children:["","Shipped","Printed","Fulfilled","Unfulfilled","On Hold"].map((function(e){return Object(R.jsx)(pe.a,{value:e,children:e},e)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"saleDate",label:"Sale Date",name:"saleDate",type:"date",helperText:i.saleDate?i.saleDate[0]:"",error:!!i.saleDate,InputLabelProps:{shrink:!0}}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderNo",label:"Order No",name:"orderNo",inputProps:{maxLength:20},helperText:i.orderNo?i.orderNo[0]:"",error:!!i.orderNo}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"recipientName",label:"Recipient Name",name:"recipientName",inputProps:{maxLength:50},helperText:i.recipientName?i.recipientName[0]:"",error:!!i.recipientName,defaultValue:"update"==e.mode?e.data.recipientName:""}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,required:!0,id:"sfmId",label:"Style - Size - Color",name:"sfmId",helperText:i.sfmId?i.sfmId[0]:"",error:!!i.sfmId,children:m.map((function(e){return Object(R.jsx)(pe.a,{value:e.sfmId,children:e.sfmId},e.sfmId)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"design",label:"design",name:"design",helperText:i.design?i.design[0]:"",error:!!i.design}),Object(R.jsxs)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"processing",label:"Processing",name:"processing",inputProps:{maxLength:1},helperText:i.processing?i.processing[0]:"",error:!!i.processing,defaultValue:"N",children:[Object(R.jsx)(pe.a,{value:"N",children:"No"},0),Object(R.jsx)(pe.a,{value:"Y",children:"Yes"},1)]}),Object(R.jsxs)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"printed",label:"Printed",name:"printed",inputProps:{maxLength:1},helperText:i.printed?i.printed[0]:"",error:!!i.printed,defaultValue:"N",children:[Object(R.jsx)(pe.a,{value:"N",children:"No"},0),Object(R.jsx)(pe.a,{value:"Y",children:"Yes"},1)]}),Object(R.jsxs)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"shipped",label:"Shipped",name:"shipped",inputProps:{maxLength:1},helperText:i.shipped?i.shipped[0]:"",error:!!i.shipped,defaultValue:"N",children:[Object(R.jsx)(pe.a,{value:"N",children:"No"},0),Object(R.jsx)(pe.a,{value:"Y",children:"Yes"},1)]}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sfmNotes",label:"SFM Notes",name:"sfmNotes",helperText:i.sfmNotes?i.sfmNotes[0]:"",error:!!i.sfmNotes}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"Buyer Name",label:"buyerName",name:"buyerName",helperText:i.buyerName?i.buyerName[0]:"",error:!!i.buyerName}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"email",id:"buyerEmail",label:"Buyer Email",name:"buyerEmail",helperText:i.buyerEmail?i.buyerEmail[0]:"",error:!!i.buyerEmail}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"buyerComments",label:"Buyer Comments",name:"buyerComments",helperText:i.buyerComments?i.buyerComments[0]:"",error:!!i.buyerComments}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"giftMessages",label:"Gift Messages",name:"giftMessages",helperText:i.giftMessages?i.giftMessages[0]:"",error:!!i.giftMessages}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",inputProps:{maxLength:20},helperText:i.sku?i.sku[0]:"",error:!!i.sku}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"shipDate",label:"shipDate",name:"shipDate",type:"datetime-local",InputLabelProps:{shrink:!0},helperText:i.shipDate?i.shipDate[0]:"",error:!!i.shipDate}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"priorityShip",label:"priorityShip",name:"priorityShip",helperText:i.priorityShip?i.priorityShip[0]:"",error:!!i.priorityShip}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"customerPaidShipping",label:"Customer Paid Shipping $",name:"customerPaidShipping",type:"number",inputProps:{step:.01},helperText:i.customerPaidShipping?i.customerPaidShipping[0]:"",error:!!i.customerPaidShipping}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"trackingNumber",label:"Tracking Number",name:"trackingNumber",helperText:i.trackingNumber?i.trackingNumber[0]:"",error:!!i.trackingNumber}),Object(R.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(R.jsx)($.a,{to:"/signin"})}var ke=Object(b.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function we(e){var t=ke(),r=Object(X.a)(["mr-token"]),n=Object(s.a)(r,1)[0],a=Object(X.a)(["mr-user"]),o=Object(s.a)(a,1)[0],i=Object(u.useState)({}),c=Object(s.a)(i,2),l=c[0],h=c[1],j=Object(u.useState)(!1),b=Object(s.a)(j,3),p=b[0],m=b[1],f=(b[2],Object(u.useState)({})),O=Object(s.a)(f,2),g=O[0],y=O[1],v=Object(u.useState)(!1),S=Object(s.a)(v,2),k=S[0],w=S[1],N=Object(u.useState)([]),C=Object(s.a)(N,2),P=C[0],I=C[1],D=Object(u.useState)([]),W=Object(s.a)(D,2),E=W[0],z=W[1],L=!1;console.log("opened form");var F=parseInt(o["mr-user"].split("-")[1]);Object(u.useEffect)((function(){Y.b.getOrder(n["mr-token"],e.id).then((function(e){return e.json()})).then((function(e){console.log("initializing formdata"),y(e),w(!0)})).catch((function(e){console.log("api error"),console.error(e)})),Y.b.getProductList(n["mr-token"]).then((function(e){return e.json()})).then((function(e){var t=[{prop:"style",direction:1},{prop:"size",direction:1},{prop:"color",direction:1}];return e.sort((function(e,r){for(var n=0,a=0;n<t.length&&0===a;)a=t[n].direction*(e[t[n].prop].toString()<r[t[n].prop].toString()?-1:e[t[n].prop].toString()>r[t[n].prop].toString()?1:0),n++;return a})),I(e)})).catch((function(e){console.log("api error"),console.error(e)})),Y.b.getStoreList(n["mr-token"]).then((function(e){return e.json()})).then((function(e){return z(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);var A=function(t){e.setMode("none")};return console.log("rendering"),n["mr-token"]?p?Object(R.jsxs)("div",{children:["Saved Succcesfully ",Object(R.jsx)(T.a,{onClick:A,children:"Go back to Orders"})]}):k?Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)(x.a,{children:"Update"}),Object(R.jsx)(T.a,{onClick:A,children:"Go back"})]}),0==F?Object(R.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var r=new FormData(t.target),a={};r.forEach((function(e,t){return a[t]=e}));var o=a.sfmId.split("-");a.style=o.slice(0,o.length-2).join("-"),a.size=o[o.length-2],a.color=o[o.length-1],a=Object(d.a)(Object(d.a)({},g),a),console.log(a),Y.b.updateOrder(n["mr-token"],e.id,a).then((function(e){return 400==e.status&&(console.log(e),m(!1),L=!0),200==e.status&&m(!0),e.json()})).then((function(e){L&&h(e)})).catch((function(e){console.log("api error"),console.error(e)}))},children:[0!=Object.keys(l).length&&Object(R.jsxs)(ee.a,{error:!0,children:["Invalid data ",l.form]}),Object(R.jsxs)(ee.a,{children:["Order Id: ",g.orderId," ------ Order No: ",g.orderNo]}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,required:!0,id:"sfmId",label:"Style - Size - Color",name:"sfmId",helperText:l.sfmId?l.sfmId[0]:"",error:!!l.sfmId,defaultValue:g.sfmId,children:P.map((function(e){return Object(R.jsx)(pe.a,{value:e.sfmId,children:e.sfmId},e.sfmId)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"design",label:"design",name:"design",helperText:l.design?l.design[0]:"",error:!!l.design,defaultValue:g.design}),Object(R.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]}):Object(R.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var r=new FormData(t.target),a={};r.forEach((function(e,t){return a[t]=e}));var o=a.sfmId.split("-");a.style=o.slice(0,o.length-2).join("-"),a.size=o[o.length-2],a.color=o[o.length-1],""==a.saleDate&&(a.saleDate=null),""==a.shipDate&&(a.shipDate=null),console.log("sending data"),console.log(a),Y.b.updateOrder(n["mr-token"],e.id,a).then((function(e){return 400==e.status&&(console.log(e),m(!1),L=!0),200==e.status&&m(!0),e.json()})).then((function(e){L&&h(e)})).catch((function(e){console.log("api error"),console.error(e)}))},children:[0!=Object.keys(l).length&&Object(R.jsxs)(ee.a,{error:!0,children:["Invalid data ",l.form]}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"store",label:"Store Name",name:"store",helperText:l.store?l.store[0]:"",error:!!l.store,defaultValue:g.store,children:E.map((function(e){return Object(R.jsx)(pe.a,{value:e.storeCode,children:e.storeName},e.storeCode)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"orderStatus",label:"Order Status",name:"orderStatus",helperText:l.orderStatus?l.orderStatus[0]:"",error:!!l.orderStatus,defaultValue:g.orderStatus,children:["","Shipped","Printed","Fulfilled","Unfulfilled","On Hold"].map((function(e){return Object(R.jsx)(pe.a,{value:e,children:e},e)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"saleDate",label:"Sale Date",name:"saleDate",type:"date",helperText:l.saleDate?l.saleDate[0]:"",error:!!l.saleDate,defaultValue:g.saleDate,InputLabelProps:{shrink:!0}}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderNo",label:"Order No",name:"orderNo",inputProps:{maxLength:20},helperText:l.orderNo?l.orderNo[0]:"",error:!!l.orderNo,defaultValue:g.orderNo}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"recipientName",label:"Recipient Name",name:"recipientName",inputProps:{maxLength:50},helperText:l.recipientName?l.recipientName[0]:"",error:!!l.recipientName,defaultValue:g.recipientName,type:"hidden"}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,required:!0,id:"sfmId",label:"Style - Size - Color",name:"sfmId",helperText:l.sfmId?l.sfmId[0]:"",error:!!l.sfmId,defaultValue:g.sfmId,children:P.map((function(e){return Object(R.jsx)(pe.a,{value:e.sfmId,children:e.sfmId},e.sfmId)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"design",label:"design",name:"design",helperText:l.design?l.design[0]:"",error:!!l.design,defaultValue:g.design}),Object(R.jsxs)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"processing",label:"Processing",name:"processing",inputProps:{maxLength:1},helperText:l.processing?l.processing[0]:"",error:!!l.processing,defaultValue:g.processing,children:[Object(R.jsx)(pe.a,{value:"N",children:"No"},0),Object(R.jsx)(pe.a,{value:"Y",children:"Yes"},1)]}),Object(R.jsxs)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"printed",label:"Printed",name:"printed",inputProps:{maxLength:1},helperText:l.printed?l.printed[0]:"",error:!!l.printed,defaultValue:g.printed,children:[Object(R.jsx)(pe.a,{value:"N",children:"No"},0),Object(R.jsx)(pe.a,{value:"Y",children:"Yes"},1)]}),Object(R.jsxs)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"shipped",label:"Shipped",name:"shipped",inputProps:{maxLength:1},helperText:l.shipped?l.shipped[0]:"",error:!!l.shipped,defaultValue:g.shipped,children:[Object(R.jsx)(pe.a,{value:"N",children:"No"},0),Object(R.jsx)(pe.a,{value:"Y",children:"Yes"},1)]}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sfmNotes",label:"SFM Notes",name:"sfmNotes",helperText:l.sfmNotes?l.sfmNotes[0]:"",error:!!l.sfmNotes,defaultValue:g.sfmNotes}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"Buyer Name",label:"buyerName",name:"buyerName",helperText:l.buyerName?l.buyerName[0]:"",error:!!l.buyerName,defaultValue:g.buyerName}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"email",id:"buyerEmail",label:"Buyer Email",name:"buyerEmail",helperText:l.buyerEmail?l.buyerEmail[0]:"",error:!!l.buyerEmail,defaultValue:g.buyerEmail}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"buyerComments",label:"Buyer Comments",name:"buyerComments",helperText:l.buyerComments?l.buyerComments[0]:"",error:!!l.buyerComments,defaultValue:g.buyerComments}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"giftMessages",label:"Gift Messages",name:"giftMessages",helperText:l.giftMessages?l.giftMessages[0]:"",error:!!l.giftMessages,defaultValue:g.giftMessages}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",inputProps:{maxLength:20},helperText:l.sku?l.sku[0]:"",error:!!l.sku,defaultValue:g.sku}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"shipDate",label:"shipDate",name:"shipDate",type:"datetime-local",InputLabelProps:{shrink:!0},helperText:l.shipDate?l.shipDate[0]:"",error:!!l.shipDate,defaultValue:g.shipDate}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"priorityShip",label:"priorityShip",name:"priorityShip",helperText:l.priorityShip?l.priorityShip[0]:"",error:!!l.priorityShip,defaultValue:g.priorityShip}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"customerPaidShipping",label:"Customer Paid Shipping $",name:"customerPaidShipping",type:"number",inputProps:{step:.01},helperText:l.customerPaidShipping?l.customerPaidShipping[0]:"",error:!!l.customerPaidShipping,defaultValue:g.customerPaidShipping}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"trackingNumber",label:"Tracking Number",name:"trackingNumber",helperText:l.trackingNumber?l.trackingNumber[0]:"",error:!!l.trackingNumber,defaultValue:g.trackingNumber}),Object(R.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(R.jsx)("div",{children:"Loading"}):Object(R.jsx)($.a,{to:"/signin"})}var Ne=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Ce=[{field:"orderId",headerName:"Order Id",width:150},{field:"storeName",headerName:"Store Name",width:150},{field:"orderStatus",headerName:"Order Status",width:150},{field:"saleDate",headerName:"Sale Date",type:"date",editable:!0,width:150},{field:"orderNo",headerName:"Order No",width:150},{field:"orderCount",headerName:"Order Count",width:150},{field:"recipientName",headerName:"Recipent Name",width:150,editable:!0},{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"design",headerName:"Design",width:150},{field:"processing",headerName:"Processing",width:150},{field:"printed",headerName:"Printed",width:150},{field:"shipped",headerName:"Shipped",width:150},{field:"sfmNotes",headerName:"SFM Notes",width:150},{field:"buyerName",headerName:"Buyer Name",width:150},{field:"buyerEmail",headerName:"Buyer Email",width:150},{field:"buyerComments",headerName:"Buyer Comments",width:150},{field:"giftMessages",headerName:"Gift Messages",width:150},{field:"sfmId",headerName:"SFM ID",width:150},{field:"sku",headerName:"SKU",width:150},{field:"shipDate",headerName:"Ship Date",type:"datetime",editable:!0,width:150},{field:"priorityShip",headerName:"Priority Ship",width:150,editable:!0},{field:"customerPaidShipping",headerName:"Customer Paid Shipping",width:150,type:"number",editable:!0,valueFormatter:function(e){var t=e.value;return Ne.format(Number(t))}},{field:"trackingNumber",headerName:"Tracking Number",width:150,editable:!0},{field:"productAvailability",headerName:"Product Availability",width:150}];var Te=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Object(X.a)(["mr-token"]),o=Object(s.a)(a,1)[0],i=Object(X.a)(["mr-user"]),c=Object(s.a)(i,1)[0],l=Object(u.useState)("none"),j=Object(s.a)(l,2),b=j[0],p=j[1],m=Object(u.useState)(!1),f=Object(s.a)(m,2),O=f[0],g=f[1],x=Object(u.useState)([]),v=Object(s.a)(x,2),S=v[0],k=v[1],w=Object(u.useState)([]),N=Object(s.a)(w,2),C=N[0],P=N[1],I=Object(u.useState)(null),D=Object(s.a)(I,2),W=D[0],E=D[1],z=Object(u.useState)(!1),L=Object(s.a)(z,2),F=L[0],A=L[1],M=Object(u.useState)(null),V=Object(s.a)(M,2),B=V[0],U=V[1],q=Object(u.useState)(!1),G=Object(s.a)(q,2),H=G[0],J=G[1],K=Object(u.useState)(""),_=Object(s.a)(K,2),ee=_[0],te=_[1],re=parseInt(c["mr-user"].split("-")[1]),ne=h.a.useCallback((function(e){var t=e.id,r=e.field,n=e.props;console.log("cell commit",C,n);var a=n,o=C.map((function(e){var n={};return n[r]=a.value,e.orderId===t?Object(d.a)(Object(d.a)({},e),n):e}));P(o),console.log("cell commit after ",o)}),[C]),ae=function(e){e.preventDefault();var t=new FormData;if(F&&-1==W.name.search(/order/i))te("Please make sure you have selected orders file. File name should contain the word order");else if(H&&-1==B.name.search(/ship/i))te("Please make sure you have selected shipping file. File name should contain the word ship");else{var r;if(F)t.append("ordersFile",W),r=Y.b.uploadOrdersFile(o["mr-token"],t);else{if(!H)return void te("Please select a file");t.append("shippingFile",B),r=Y.b.uploadShippingFile(o["mr-token"],t)}r.then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(te("Successfully imported all records"),console.log("Successfully imported all records")):(te("Partial Success (see error records in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):te("Failed import due to unknown reason"),A("fasle"),ce(),p("none")})).catch((function(e){console.error("Error:",e),te("Failed import due to unknown reasons")}))}},oe=function(e){p("update")},ie=function(e){g(!1)};function ce(){console.log("fetching details"),Y.b.getOrderList(o["mr-token"]).then((function(e){return console.log(e),e.forEach((function(e,t){return e.id=e.orderId})),n(e)})).catch((function(e){console.log("api error"),console.error(e)}))}return Object(u.useEffect)((function(){"none"==b&&(k([]),P([]),console.log("inside useeffect"),ce())}),[b,o]),o["mr-token"]?Object(R.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(R.jsx)("h3",{children:"Orders"}),""==ee?"":Object(R.jsx)("div",{style:{color:"red"},children:ee}),Object(R.jsx)(y.a,{style:{width:"100%",marginBottom:"15px"}}),"none"==b?Object(R.jsxs)("div",{children:[0==re&&Object(R.jsx)(T.a,{style:{marginBottom:"10px"},color:"primary",variant:"contained",disabled:1!=S.length||"N"!=C[0].processing,onClick:oe,children:"Update Single"}),0!=re&&Object(R.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",flexDirection:"row"},children:[Object(R.jsx)(T.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){p("add")},children:"Add"}),Object(R.jsx)(T.a,{style:{marginBottom:"10px"},color:"primary",variant:"contained",disabled:1!=S.length,onClick:oe,children:"Update Single"}),Object(R.jsx)(T.a,{variant:"outlined",color:"primary",disabled:!(C.length>0),onClick:function(e){function t(){return(t=Object(de.a)(se.a.mark((function e(){var t,r,n,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Object(le.a)(C),e.prev=2,a=se.a.mark((function e(){var r,a,i,c,s;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,e.prev=1,a=function(){var e=Object(de.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y.b.updateOrder(o["mr-token"],r.orderId,r));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=5,a();case 5:if(200!=(i=e.sent).status){e.next=10;break}console.log("updated order with id ".concat(r.orderId)),e.next=20;break;case 10:if(400!=i.status){e.next=19;break}return console.log("Invalid Update for order with id ".concat(r.orderId)),e.next=14,i.json();case 14:c=e.sent,s=r.orderId,t.push({orderId:s,result:c}),e.next=20;break;case 19:throw"server error";case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(1),console.log("Something went wrong for order id ".concat(r.orderId)),console.error(e.t0),t.push("Something went wrong for order id ".concat(r.orderId));case 27:case"end":return e.stop()}}),e,null,[[1,22]])})),r.s();case 5:if((n=r.n()).done){e.next=9;break}return e.delegateYield(a(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:t.length>0?te("Some rows were not updated\n"+JSON.stringify(t)):te("Updated successfully");case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}console.log("updating the orders",C),function(){t.apply(this,arguments)}()},children:"Update Multiple"}),Object(R.jsxs)("div",{children:[Object(R.jsx)(T.a,{variant:"outlined",color:"secondary",disabled:!(S.length>0),onClick:function(e){g(!0)},children:"Delete Selected"}),Object(R.jsxs)(ue.a,{open:O,onClose:ie,children:[Object(R.jsxs)(he.a,{id:"alert-dialog-title",children:['"Are you sure you want to delete the ',S.length,' items"']}),Object(R.jsxs)(je.a,{children:[Object(R.jsx)(T.a,{onClick:ie,color:"primary",children:"Cancel"}),Object(R.jsx)(T.a,{onClick:function(e){console.log("u confirmed delete"),S.forEach((function(e){Y.b.deleteOrder(o["mr-token"],e).then((function(t){200==t.status||204==t.status?console.log("deleted order with id ".concat(e)):console.log("Failed to delete order with id ".concat(e))})).catch((function(t){return console.error("could not delete order id ".concat(e),t)}))})),g(!1)},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]}),Object(R.jsxs)("form",{children:[Object(R.jsx)(Q.a,{type:"file",name:"myfile",onChange:function(e){1==e.target.files.length?(E(e.target.files[0]),console.log("order file is: ",e.target.files[0]),A(!0)):(E(null),A(!1))}}),Object(R.jsx)(T.a,{type:"submit",disabled:!F,onClick:ae,color:"primary",variant:"contained",children:"Import Order Details"})]}),Object(R.jsxs)("form",{children:[Object(R.jsx)(Q.a,{type:"file",name:"myShippingfile",onChange:function(e){1==e.target.files.length?(U(e.target.files[0]),console.log("ship file is: ",e.target.files[0]),J(!0)):(U(null),J(!1))}}),Object(R.jsx)(T.a,{type:"submit",disabled:!H,onClick:ae,color:"primary",variant:"contained",children:"Import Shipping Details"})]})]}),Object(R.jsx)("div",{style:{width:"100%",height:"500px",minWidth:"600px"},children:Object(R.jsx)(Z.a,{rows:r,columns:Ce,checkboxSelection:!0,components:{Toolbar:Z.b},disableSelectionOnClick:!0,onSelectionModelChange:function(e){console.log(e),k(e.selectionModel)},onRowSelected:function(e){console.log(e);var t=Object(be.a)(e.api.current.getSelectedRows().values());console.log("selected rows ere : ",t),P(t)},onEditCellChangeCommitted:ne})})]}):"add"==b?Object(R.jsx)(Se,{mode:b,setMode:p}):Object(R.jsx)(we,{id:S[0],mode:b,setMode:p})]}):Object(R.jsx)($.a,{to:"/signin"})},Pe=r(223),Ie=r(245),De=Object(b.a)((function(){return{root:{alignItems:"center",lineHeight:"24px",width:"100%",height:"100%",position:"relative",display:"flex","& .cellValue":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}}}));function We(e){var t=e.width,r=e.value,n=Object(u.useRef)(null),a=Object(u.useRef)(null),o=Object(u.useRef)(null),i=Object(u.useState)(null),c=Object(s.a)(i,2),l=c[0],d=c[1],h=De(),j=Object(u.useState)(!1),b=Object(s.a)(j,2),p=b[0],m=b[1],f=Object(u.useState)(!1),O=Object(s.a)(f,2),g=O[0],y=O[1];return Object(u.useEffect)((function(){if(p)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||m(!1)}}),[m,p]),Object(R.jsxs)("div",{ref:n,className:h.root,onMouseEnter:function(){var e,t=(e=o.current,String(e.innerHTML).length>10);y(t),d(a.current),m(!0)},onMouseLeave:function(){m(!1)},children:[Object(R.jsx)("div",{ref:a,style:{height:1,width:t,display:"block",position:"absolute",top:0}}),Object(R.jsx)("div",{ref:o,className:"cellValue",children:r}),g&&Object(R.jsx)(Ie.a,{open:p&&null!==l,anchorEl:l,style:{width:t,marginLeft:-17},children:Object(R.jsx)(Pe.a,{elevation:1,style:{minHeight:n.current.offsetHeight-3},children:Object(R.jsx)(x.a,{variant:"body2",style:{padding:8},children:r})})})]})}var Ee=r(273),ze=r(260),Le=r(263),Fe=r(250),Ae=r(259),Me=r(261),Ve=r(262),Be=Object(b.a)({table:{minWidth:700},th:{background:"black"}});var Ue=function(){var e=Be(),t=Object(u.useState)([]),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Object(X.a)(["mr-token"]),i=Object(s.a)(o,1)[0],c=Object(X.a)(["mr-user"]),l=Object(s.a)(c,1)[0],h=Object(u.useState)("none"),j=Object(s.a)(h,2),b=j[0],p=j[1],m=Object(u.useState)(!1),f=Object(s.a)(m,2),O=f[0],g=f[1],x=Object(u.useState)([]),v=Object(s.a)(x,2),S=v[0],k=v[1],w=Object(u.useState)(""),N=Object(s.a)(w,2),C=N[0],P=N[1],I=function(e){var t=parseInt(e.target.dataset.oid);console.log(t),console.log(e.target.checked);var r=[];if(e.target.checked)r=[].concat(Object(be.a)(S),[t]);else{var n=S.indexOf(t);n>-1&&S.splice(n,1),r=Object(be.a)(S)}console.log(r),k(r)},D=function(e){console.log(e.currentTarget,e.currentTarget.dataset.oid);var t=parseInt(e.currentTarget.dataset.oid),r=String(e.currentTarget.dataset.btype),o=n.find((function(e){return e.orderId==t})),c={};if(console.log(r),"processing"==r){var s="Y"==o.processing?"N":"Y";console.log(s),c=Object(d.a)(Object(d.a)({},o),{},{processing:s})}if("printed"==r){var l="Y"==o.printed?"N":"Y";console.log(l),c=Object(d.a)(Object(d.a)({},o),{},{printed:l})}if("shipped"==r){var u="Y"==o.shipped?"N":"Y";console.log(u),c=Object(d.a)(Object(d.a)({},o),{},{shipped:u})}Y.b.updateOrder(i["mr-token"],t,c).then((function(e){if(200==e.status)return e.json();throw"Something went wrong"})).then((function(e){var t=n.map((function(t){return t.orderId==e.orderId?e:t}));P("updated order"),console.log(t.map((function(e){return e.orderId}))),a(t)})).catch((function(e){console.log("api error"),console.error(e),P("Something went wrong")}))},W=function(e){g(!1)};Object(u.useEffect)((function(){"none"==b&&Y.b.getPrintingList(i["mr-token"]).then((function(e){var t=e;console.log("fetching orders"),console.log(t.map((function(e){return e.orderId}))),t.forEach((function(e,t){return e.id=e.orderId}));var r=[{prop:"storeName",direction:1},{prop:"recipientName",direction:1},{prop:"orderNo",direction:1},{prop:"orderStatus",direction:1}];t.sort((function(e,t){for(var n=0,a=0;n<r.length&&0===a;)a=r[n].direction*(e[r[n].prop].toString()<t[r[n].prop].toString()?-1:e[r[n].prop].toString()>t[r[n].prop].toString()?1:0),n++;return a})),console.log(t.map((function(e){return e.orderId}))),a(t)})).catch((function(e){console.log("api error"),console.error(e)}))}),[b,i]),Object(u.useEffect)((function(){console.log(i)}),[i]);var E=0;return i["mr-token"]?(parseInt(l["mr-user"].split("-")[1]),Object(R.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(R.jsx)("h3",{children:"Printing"}),""==C?"":Object(R.jsx)("div",{style:{color:"red"},children:C}),Object(R.jsx)(y.a,{style:{width:"100%",marginBottom:"15px"}}),"none"==b?Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{children:[Object(R.jsx)(T.a,{style:{width:"60px",marginBottom:"10px"},color:"primary",variant:"contained",onClick:function(e){p("add")},children:"Add"}),Object(R.jsx)(T.a,{variant:"contained",color:"secondary",disabled:!(S.length>0),onClick:function(e){g(!0)},children:"Delete"}),Object(R.jsxs)(ue.a,{open:O,onClose:W,children:[Object(R.jsxs)(he.a,{children:['"Are you sure you want to delete the ',S.length,' items"']}),Object(R.jsxs)(je.a,{children:[Object(R.jsx)(T.a,{onClick:W,color:"primary",children:"Cancel"}),Object(R.jsx)(T.a,{onClick:function(e){console.log("u confirmed delete");var t=[],r=function(){var e=Object(de.a)(se.a.mark((function e(){var r,n,a,o;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(le.a)(S),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=23;break}return a=n.value,e.prev=5,e.next=8,Y.b.deleteOrder(i["mr-token"],a);case 8:if(200!=(o=e.sent).status&&204!=o.status){e.next=13;break}console.log("deleted order with id ".concat(a)),e.next=15;break;case 13:throw console.log("Failed to delete order with id ".concat(a)),"Failed to delete order with id ".concat(a);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("could not delete order id ".concat(a),e.t0),t.push("could not delete order id ".concat(a));case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),r.e(e.t1);case 28:return e.prev=28,r.f(),e.finish(28);case 31:t.length>0?P("Some rows were not deleted\n"+t.toString()+" Pleae refresh"):P("Deleted successfully. Please refresh");case 32:case"end":return e.stop()}}),e,null,[[1,25,28,31],[5,17]])})));return function(){return e.apply(this,arguments)}}();g(!1),r()},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]}),Object(R.jsx)(Ae.a,{component:Pe.a,style:{height:"500px"},children:Object(R.jsxs)(ze.a,{className:e.table,size:"small","aria-label":"spanning table",children:[Object(R.jsx)(Me.a,{children:Object(R.jsxs)(Ve.a,{children:[Object(R.jsx)(Fe.a,{padding:"checkbox",children:Object(R.jsx)(Ee.a,{disabled:!0})}),Object(R.jsx)(Fe.a,{children:"Status"}),Object(R.jsx)(Fe.a,{align:"right",children:"Shop"}),Object(R.jsx)(Fe.a,{align:"right",children:"Recipient/Order/#"}),Object(R.jsx)(Fe.a,{align:"right",children:"Style"}),Object(R.jsx)(Fe.a,{align:"right",children:"Size"}),Object(R.jsx)(Fe.a,{align:"right",children:"Color"}),Object(R.jsx)(Fe.a,{align:"right",children:"Design"}),Object(R.jsx)(Fe.a,{align:"right",children:"Message"}),Object(R.jsx)(Fe.a,{align:"right",children:"Processed"}),Object(R.jsx)(Fe.a,{align:"right",children:"Printed"}),Object(R.jsx)(Fe.a,{align:"right",children:"Shipped"}),Object(R.jsx)(Fe.a,{align:"right",children:"Product Availability"}),Object(R.jsx)(Fe.a,{align:"right",children:"Notes"})]})}),Object(R.jsx)(Le.a,{children:n.map((function(e,t,r){var n=!1;if(t==E){n=!0;for(var a=t+1;a<r.length;a++)if(e.orderNo!=r[a].orderNo||e.storeName!=r[a].storeName||e.recipientName!=r[a].recipientName||e.displayStatus!=r[a].displayStatus){E=a;break}}return Object(R.jsxs)(Ve.a,{children:[Object(R.jsx)(Fe.a,{children:Object(R.jsx)(Ee.a,{inputProps:{"data-oid":e.orderId},onChange:I})}),n&&Object(R.jsx)(Fe.a,{rowSpan:E-t,children:e.displayStatus}),n&&Object(R.jsx)(Fe.a,{rowSpan:E-t,children:e.storeName}),n&&Object(R.jsxs)(Fe.a,{rowSpan:E-t,children:[Object(R.jsx)("div",{children:e.recipientName}),Object(R.jsx)("div",{children:e.orderNo}),Object(R.jsx)("div",{children:e.orderCount})]}),Object(R.jsx)(Fe.a,{align:"right",children:e.style}),Object(R.jsx)(Fe.a,{align:"right",children:e.size}),Object(R.jsx)(Fe.a,{align:"right",children:e.color}),Object(R.jsx)(Fe.a,{align:"right",children:e.design}),Object(R.jsx)(Fe.a,{align:"right",style:{maxWidth:"100px"},children:Object(R.jsx)(We,{value:e.giftMessages,width:500})}),Object(R.jsx)(Fe.a,{align:"right",children:Object(R.jsx)(T.a,{onClick:D,"data-oid":e.orderId,"data-btype":"processing",color:"Y"==e.processing?"primary":"secondary",variant:"contained",children:e.processing})}),Object(R.jsx)(Fe.a,{align:"right",children:Object(R.jsx)(T.a,{onClick:D,"data-oid":e.orderId,"data-btype":"printed",color:"Y"==e.printed?"primary":"secondary",variant:"contained",children:e.printed})}),Object(R.jsx)(Fe.a,{align:"right",children:Object(R.jsx)(T.a,{onClick:D,"data-oid":e.orderId,"data-btype":"shipped",color:"Y"==e.shipped?"primary":"secondary",variant:"contained",children:e.shipped})}),Object(R.jsx)(Fe.a,{align:"right",children:e.productAvailability}),Object(R.jsx)(Fe.a,{align:"right",children:e.sfmNotes})]},e.orderId)}))})]})})]}):Object(R.jsx)(Se,{mode:b,setMode:p})]})):Object(R.jsx)($.a,{to:"/signin"})};var qe=function(){var e=Object(X.a)(["mr-token"]),t=Object(s.a)(e,1)[0],r=Object(u.useState)({}),n=Object(s.a)(r,2),a=(n[0],n[1],Object(u.useState)(!1)),o=Object(s.a)(a,3),i=(o[0],o[1],o[2],Object(u.useState)([])),c=Object(s.a)(i,2),l=(c[0],c[1],Object(u.useState)([])),d=Object(s.a)(l,2),h=d[0],j=d[1],b=Object(u.useState)("All"),p=Object(s.a)(b,2),m=p[0],f=p[1],O=Object(u.useState)(""),g=Object(s.a)(O,2),y=g[0],v=g[1],S=Object(u.useState)(""),k=Object(s.a)(S,2),w=k[0],N=k[1];return Object(u.useEffect)((function(){Y.b.getStoreList(t["mr-token"]).then((function(e){return e.json()})).then((function(e){return e.unshift({storeName:"All",storeCode:"All"}),console.log(e),j(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]),Object(R.jsxs)("div",{children:[Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,label:"Store",name:"store",value:m,onChange:function(e){console.log(e.target.value),f(e.target.value)},children:h.map((function(e){return Object(R.jsx)(pe.a,{value:e.storeCode,children:e.storeName},e.storeCode)}))}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Start Date",name:"startDate",type:"date",value:y,onChange:function(e){return v(e.target.value)},InputLabelProps:{shrink:!0}}),Object(R.jsx)(Q.a,{variant:"outlined",margin:"normal",fullWidth:!0,label:"End Date",name:"endtDate",type:"date",value:w,onChange:function(e){return N(e.target.value)},InputLabelProps:{shrink:!0}}),Object(R.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),console.log(m,typeof y)},children:"Submit"}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)("strong",{children:"Total Orders "}),m]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)("strong",{children:"Fulfilled "}),m]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)("strong",{children:"Unfulfilled "}),m]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)("strong",{children:"OnHold "}),m]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)("strong",{children:"Out Of Stock "}),m]})]})};var Ge=function(){return Object(R.jsxs)($.d,{children:[Object(R.jsx)($.b,{exact:!0,path:"/",render:function(e){return Object(R.jsx)("div",Object(d.a)(Object(d.a)({},e),{},{children:"Welcome To SFM Dropshipping"}))}}),Object(R.jsx)($.b,{exact:!0,path:"/dashboard",component:qe}),Object(R.jsx)($.b,{exact:!0,path:"/products",component:ae}),Object(R.jsx)($.b,{exact:!0,path:"/stores",component:ie}),Object(R.jsx)($.b,{exact:!0,path:"/purchases",component:ge}),Object(R.jsx)($.b,{exact:!0,path:"/inventory",component:ye}),Object(R.jsx)($.b,{exact:!0,path:"/orders",component:Te}),Object(R.jsx)($.b,{exact:!0,path:"/printing",component:Ue})]})};var Ye=Object(b.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1,textAlign:"center"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(l.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto",padding:"5px"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:"0px",paddingRight:"0px"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Re(){var e=Ye(),t=h.a.useState(!0),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Object(X.a)(["mr-token"]),i=Object(s.a)(o,3),c=i[0],l=(i[1],i[2]),d=Object(X.a)(["mr-user"]),u=Object(s.a)(d,3),b=u[0],k=(u[1],u[2]);Object(j.a)(e.paper,e.fixedHeight);if(!c["mr-token"])return Object(R.jsx)($.a,{to:"/signin"});var N=0;return b["mr-user"]&&(N=parseInt(b["mr-user"].split("-")[1])),Object(R.jsxs)("div",{className:e.root,children:[Object(R.jsx)(p.a,{}),Object(R.jsx)(f.a,{position:"absolute",className:Object(j.a)(e.appBar,n&&e.appBarShift),children:Object(R.jsxs)(O.a,{className:e.toolbar,children:[Object(R.jsx)(v.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},className:Object(j.a)(e.menuButton,n&&e.menuButtonHidden),children:Object(R.jsx)(w.a,{})}),Object(R.jsx)(x.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:"SFM Dropshipping"}),c["mr-token"]?Object(R.jsx)(T.a,{color:"secondary",variant:"contained",onClick:function(e){l("mr-token"),k("mr-user")},children:"SignOut"}):Object(R.jsx)(T.a,{color:"secondary",variant:"contained",component:G.b,to:"/signin",children:"Sign In"})]})}),Object(R.jsxs)(m.a,{variant:"permanent",classes:{paper:Object(j.a)(e.drawerPaper,!n&&e.drawerPaperClose)},open:n,children:[Object(R.jsx)("div",{className:e.toolbarIcon,children:Object(R.jsx)(v.a,{onClick:function(){a(!1)},children:Object(R.jsx)(C.a,{})})}),Object(R.jsx)(y.a,{}),0==N&&Object(R.jsx)(g.a,{children:K}),1==N&&Object(R.jsx)(g.a,{children:H}),2==N&&Object(R.jsx)(g.a,{children:J}),Object(R.jsx)(y.a,{}),1==N&&Object(R.jsx)(g.a,{children:_})]}),Object(R.jsxs)("main",{className:e.content,children:[Object(R.jsx)("div",{className:e.appBarSpacer}),Object(R.jsx)(S.a,{maxWidth:!1,className:e.container,children:Object(R.jsx)(Ge,{})})]})]})}},46:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r(67),a=r(62),o="http://127.0.0.1:8000",i=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"getProductList",value:function(e){return fetch(o+"/api/products/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getProduct",value:function(e,t){return fetch(o+"/api/products/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addProduct",value:function(e,t){return fetch(o+"/api/products/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"updateProduct",value:function(e,t,r){return fetch(o+"/api/products/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(r)})}},{key:"getStoreList",value:function(e){return fetch(o+"/api/stores/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getPurchasesList",value:function(e){return fetch(o+"/api/purchases/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getPurchase",value:function(e,t){return fetch(o+"/api/purchases/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addPurchase",value:function(e,t){return fetch(o+"/api/purchases/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"updatePurchase",value:function(e,t,r){return fetch(o+"/api/purchases/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(r)})}},{key:"deletePurchase",value:function(e,t){return fetch(o+"/api/purchases/"+t+"/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getInventoryList",value:function(e){return fetch(o+"/api/inventory/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getOrderList",value:function(e){return fetch(o+"/api/orders/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getPrintingList",value:function(e){return fetch(o+"/api/printing/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}).then((function(e){return e.json()}))}},{key:"getOrder",value:function(e,t){return fetch(o+"/api/orders/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addOrder",value:function(e,t){return fetch(o+"/api/orders/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"deleteOrder",value:function(e,t){return fetch(o+"/api/orders/"+t+"/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"updateOrder",value:function(e,t,r){return fetch(o+"/api/orders/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(r)})}},{key:"uploadOrdersFile",value:function(e,t){return fetch(o+"/api/orders/import_ordersfile/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadShippingFile",value:function(e,t){return fetch(o+"/api/orders/import_shippingfile/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadPurchasesFile",value:function(e,t){return fetch(o+"/api/purchases/import_file/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadProductsFile",value:function(e,t){return fetch(o+"/api/products/import_file/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"signinUser",value:function(e){return fetch(o+"/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}]),e}()}}]);
//# sourceMappingURL=6.3b923447.chunk.js.map