(this["webpackJsonptnm-app"]=this["webpackJsonptnm-app"]||[]).push([[6],{108:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.2cf1827a.png"},272:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ot}));var r,a,o,i,c,l=n(43),s=n(17),d=n(11),u=n(0),j=n.n(u),h=n(40),p=n(123),b=n(220),m=n(283),f=n(269),O=n(260),g=n(231),x=n(210),v=n(270),y=n(233),S=n(219),w=n(169),k=n.n(w),C=n(170),N=n.n(C),T=n(171),P=n.n(T),D=n(172),I=n.n(D),z=n(236),L=n(237),W=n(238),F=n(161),E=n.n(F),A=n(239),M=n(240),U=n(241),V=n(242),R=n(243),q=n(244),_=n(245),Y=n(246),G=n(10),B=n(45),J=n(3),H=Object(J.jsxs)("div",{children:[Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/dashboard",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(E.a,{})}),Object(J.jsx)(W.a,{primary:"Dashboard"})]}),Object(J.jsxs)(z.a,(r={button:!0},Object(s.a)(r,"button",!0),Object(s.a)(r,"component",G.b),Object(s.a)(r,"to","/orders"),Object(s.a)(r,"children",[Object(J.jsx)(L.a,{children:Object(J.jsx)(A.a,{})}),Object(J.jsx)(W.a,{primary:"Orders"})]),r)),Object(J.jsxs)(z.a,(a={button:!0},Object(s.a)(a,"button",!0),Object(s.a)(a,"component",G.b),Object(s.a)(a,"to","/printing"),Object(s.a)(a,"children",[Object(J.jsx)(L.a,{children:Object(J.jsx)(M.a,{})}),Object(J.jsx)(W.a,{primary:"Printing"})]),a)),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/stores",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(U.a,{})}),Object(J.jsx)(W.a,{primary:"Stores"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/inventory",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(V.a,{})}),Object(J.jsx)(W.a,{primary:"Inventory"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/purchases",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(R.a,{})}),Object(J.jsx)(W.a,{primary:"Purchases"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/products",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(q.a,{})}),Object(J.jsx)(W.a,{primary:"Products"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/invoices",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(_.a,{})}),Object(J.jsx)(W.a,{primary:"Invoices"})]})]}),K=Object(J.jsxs)("div",{children:[Object(J.jsxs)(z.a,(o={button:!0},Object(s.a)(o,"button",!0),Object(s.a)(o,"component",G.b),Object(s.a)(o,"to","/orders"),Object(s.a)(o,"children",[Object(J.jsx)(L.a,{children:Object(J.jsx)(A.a,{})}),Object(J.jsx)(W.a,{primary:"Orders"})]),o)),Object(J.jsxs)(z.a,(i={button:!0},Object(s.a)(i,"button",!0),Object(s.a)(i,"component",G.b),Object(s.a)(i,"to","/printing"),Object(s.a)(i,"children",[Object(J.jsx)(L.a,{children:Object(J.jsx)(M.a,{})}),Object(J.jsx)(W.a,{primary:"Printing"})]),i)),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/inventory",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(V.a,{})}),Object(J.jsx)(W.a,{primary:"Inventory"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/purchases",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(R.a,{})}),Object(J.jsx)(W.a,{primary:"Purchases"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/products",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(q.a,{})}),Object(J.jsx)(W.a,{primary:"Products"})]})]}),Z=Object(J.jsxs)("div",{children:[Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/dashboard",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(E.a,{})}),Object(J.jsx)(W.a,{primary:"Dashboard"})]}),Object(J.jsxs)(z.a,(c={button:!0},Object(s.a)(c,"button",!0),Object(s.a)(c,"component",G.b),Object(s.a)(c,"to","/orders"),Object(s.a)(c,"children",[Object(J.jsx)(L.a,{children:Object(J.jsx)(A.a,{})}),Object(J.jsx)(W.a,{primary:"Orders"})]),c)),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/stores",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(U.a,{})}),Object(J.jsx)(W.a,{primary:"Stores"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/products",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(q.a,{})}),Object(J.jsx)(W.a,{primary:"Products"})]}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/invoices",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(_.a,{})}),Object(J.jsx)(W.a,{primary:"Invoice"})]})]}),X=Object(J.jsx)("div",{children:Object(J.jsxs)(z.a,{button:!0,component:"a",href:B.a+"/admin",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(Y.a,{})}),Object(J.jsx)(W.a,{primary:"Django Admin"})]})}),$=n(108),Q=n(1),ee=n(157),te=n(62),ne=n(60),re=function(){function e(){Object(te.a)(this,e)}return Object(ne.a)(e,null,[{key:"signout",value:function(){console.log("Signing out"),document.cookie="mr-user=;expires="+(new Date).toUTCString(),document.cookie="mr-token=;expires="+(new Date).toUTCString(),window.location.reload()}},{key:"handleUnauthorized",value:function(){console.log("User is not authorized. Logging out"),e.signout()}},{key:"login",value:function(e,t){}}]),e}(),ae=n(54),oe=n.n(ae),ie=n(90),ce=n(55),le=n(49),se=(n(21),n(63)),de=n(248),ue=n(251),je=n(252),he=n(234),pe=n(282),be=n(80),me=n.n(be),fe=n(81),Oe=n.n(fe),ge=n(91),xe=n.n(ge),ve=n(221),ye=Object(p.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Se(e){var t=ye(),n=Object(ee.a)(["mr-token"]),r=Object(l.a)(n,1)[0],a=Object(u.useState)({}),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(u.useState)({}),j=Object(l.a)(s,2),h=j[0],p=j[1],b=Object(u.useState)(!1),m=Object(l.a)(b,3),f=m[0],O=m[1];m[2];console.log("opened form"),Object(u.useEffect)((function(){"update"==e.mode&&function(){var t=Object(ce.a)(oe.a.mark((function t(){var n,a;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.b.getProduct(r["mr-token"],e.id);case 3:if(200!=(n=t.sent).status){t.next=12;break}return t.next=7,n.json();case 7:a=t.sent,console.log("retreiving data"),p(a),t.next=13;break;case 12:throw"Could not get the product details";case 13:t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("api error"),console.error(t.t0),c({form:String(t.t0)});case 20:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[]);var g=function(){var t=Object(ce.a)(oe.a.mark((function t(n,a){var o,i;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.b.updateProduct(r["mr-token"],n,a);case 3:if(o=t.sent,console.log("response status ",o.status),200!=o.status){t.next=11;break}O(!0),alert("Saved Successfully"),e.setMode("none"),t.next=20;break;case 11:if(400!=o.status){t.next=19;break}return console.log(o),t.next=15,o.json();case 15:i=t.sent,c(i),t.next=20;break;case 19:throw"Failed due to unknown reasons";case 20:t.next=27;break;case 22:t.prev=22,t.t0=t.catch(0),console.log("api error"),console.error(t.t0),c({form:String(t.t0)});case 27:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var t=Object(ce.a)(oe.a.mark((function t(n){var a,o;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.b.addProduct(r["mr-token"],n);case 3:if(a=t.sent,console.log("response status ",a.status),201!=a.status){t.next=11;break}O(!0),alert("Saved Successfully"),e.setMode("none"),t.next=20;break;case 11:if(400!=a.status){t.next=19;break}return console.log(a),t.next=15,a.json();case 15:o=t.sent,c(o),t.next=20;break;case 19:throw"Failed due to unknown reasons";case 20:t.next=27;break;case 22:t.prev=22,t.t0=t.catch(0),console.log("api error"),console.error(t.t0),c({form:String(t.t0)});case 27:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e){return t.apply(this,arguments)}}();return r["mr-token"]?f?Object(J.jsx)(Q.a,{to:"/products"}):"update"==e.mode&&0===Object.keys(h).length?Object(J.jsx)("div",{children:"Loading..."}):Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(J.jsx)(x.a,{variant:"h4",children:"update"==e.mode?"Update":"Add"}),Object(J.jsx)(he.a,{variant:"contained",color:"primary",onClick:function(t){e.setMode("none")},children:"Go back"})]}),Object(J.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var n=new FormData(t.target),r={};n.forEach((function(e,t){return r[t]=e})),console.log("sending data"),r=Object(d.a)(Object(d.a)({},h),r),console.log(r),"update"==e.mode?g(e.id,r):v(r)},children:[0!=Object.keys(i).length&&Object(J.jsxs)(ve.a,{error:!0,children:["Invalid data ",i.form]}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"style",label:"Style",name:"style",disabled:"update"==e.mode,helperText:i.style?i.style[0]:"",error:!!i.style,defaultValue:"update"==e.mode?h.style:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"size",label:"Size",name:"size",disabled:"update"==e.mode,helperText:i.size?i.size[0]:"",error:!!i.size,defaultValue:"update"==e.mode?h.size:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"color",label:"Color",name:"color",disabled:"update"==e.mode,helperText:i.color?i.color[0]:"",error:!!i.color,defaultValue:"update"==e.mode?h.color:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",disabled:"update"==e.mode,helperText:i.sku?i.sku[0]:"",error:!!i.sku,defaultValue:"update"==e.mode?h.sku:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"price",label:"Price",name:"price",type:"number",inputProps:{step:.01},helperText:i.price?i.price[0]:"",error:!!i.price,defaultValue:"update"==e.mode?h.price:""}),Object(J.jsx)(he.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(J.jsx)(Q.a,{to:"/signin"})}var we=n(229),ke=n(247),Ce=Object(p.a)((function(){return{root:{alignItems:"center",lineHeight:"24px",width:"100%",height:"100%",position:"relative",display:"flex","& .cellValue":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}}}));function Ne(e){var t=e.width,n=e.value,r=e.limit,a=Object(u.useRef)(null),o=Object(u.useRef)(null),i=Object(u.useRef)(null),c=Object(u.useState)(null),s=Object(l.a)(c,2),d=s[0],j=s[1],h=Ce(),p=Object(u.useState)(!1),b=Object(l.a)(p,2),m=b[0],f=b[1],O=Object(u.useState)(!1),g=Object(l.a)(O,2),v=g[0],y=g[1];return Object(u.useEffect)((function(){if(m)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||f(!1)}}),[f,m]),Object(J.jsxs)("div",{ref:a,className:h.root,onMouseEnter:function(){var e=function(e,t){return String(e.innerHTML).length>t}(i.current,r);y(e),j(o.current),f(!0)},onMouseLeave:function(){f(!1)},children:[Object(J.jsx)("div",{ref:o,style:{height:1,width:t,display:"block",position:"absolute",top:0}}),Object(J.jsx)("div",{ref:i,className:"cellValue",children:n}),v&&Object(J.jsx)(ke.a,{open:m&&null!==d,anchorEl:d,style:{width:t,marginLeft:-17},children:Object(J.jsx)(we.a,{elevation:1,style:{minHeight:a.current.offsetHeight-3},children:Object(J.jsx)(x.a,{variant:"body2",style:{padding:8},children:n})})})]})}var Te=[{field:"id",headerName:"ID",width:80},{field:"sfmId",headerName:"SFM ID",width:300,renderCell:function(e){return Object(J.jsx)(Ne,{limit:29,value:e.value?e.value.toString():"",width:300})},hide:!0},{field:"style",headerName:"Style",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})}},{field:"size",headerName:"Size",width:100},{field:"color",headerName:"Color",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})}},{field:"sku",headerName:"SKU",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})}},{field:"price",headerName:"Price",width:100,type:"number"},{field:"amountInStock",headerName:"Amount In Stock",width:150,type:"number"}];var Pe=function(e){var t=Object(u.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(u.useState)([]),i=Object(l.a)(o,2),c=i[0],s=i[1],d=Object(u.useState)(""),j=Object(l.a)(d,2),h=j[0],p=j[1],b=Object(ee.a)(["mr-token"]),m=Object(l.a)(b,1)[0],f=Object(u.useState)("none"),O=Object(l.a)(f,2),g=O[0],x=O[1],v=Object(u.useState)([]),S=Object(l.a)(v,2),w=S[0],k=S[1],C=Object(u.useState)(!1),N=Object(l.a)(C,2),T=N[0],P=N[1],D=Object(u.useState)(!1),I=Object(l.a)(D,2),z=I[0],L=I[1],W=Object(u.useState)(null),F=Object(l.a)(W,2),E=F[0],A=F[1],M=Object(u.useState)(!1),U=Object(l.a)(M,2),V=U[0],R=U[1],q=Object(u.useState)(""),_=Object(l.a)(q,2),Y=_[0],G=_[1],H=e.usertype,K=[{field:"style",headerName:"Style",width:150},{field:"size",headerName:"Size",width:150},{field:"color",headerName:"Color",width:150},{field:"sku",headerName:"SKU",width:150},{field:"amountInStock",headerName:"Amount In Stock",width:150,type:"number"}];function Z(){L(!0),B.b.getProductList(m["mr-token"]).then((function(e){if(200==e.status)return e.json();throw 401==e.status&&re.handleUnauthorized(),"Something went wrong"})).then((function(e){console.log(e),L(!1),a(e)})).catch((function(e){console.log("api error"),console.error(e),L(!1)}))}0==H&&K.splice(4,0,{field:"price",headerName:"Price",width:150}),Object(u.useEffect)((function(){e.setTitle("Products"),"none"==g&&Z()}),[m,g]),Object(u.useEffect)((function(){X(h)}),[r]);var X=function(e){var t=Object(le.a)(r);""!=e&&(t=t.filter((function(t){var n=e.toLowerCase();return t.style.toLowerCase().search(n)>=0||t.size.toLowerCase().search(n)>=0||t.color.toLowerCase().search(n)>=0}))),k([]),s(t)},$=function(e){P(!1)},te=function(){var e=Object(ce.a)(oe.a.mark((function e(t){var n,a,o,i,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("u confirmed delete"),n=0,a=[],o=Object(ie.a)(w),e.prev=4,c=oe.a.mark((function e(){var t,o,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.value,e.prev=1,e.next=4,B.b.deleteProduct(m["mr-token"],t);case 4:if(200!=(o=e.sent).status&&204!=o.status){e.next=10;break}console.log("deleted order with id ".concat(t)),n++,e.next=13;break;case 10:throw console.log("Failed to delete product with id ".concat(t)),c=r.find((function(e){return e.id==t})).sfmId,"Could not delete product ".concat(c);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("could not delete product id ".concat(t),e.t0),a.push(e.t0.toString());case 19:case"end":return e.stop()}}),e,null,[[1,15]])})),o.s();case 7:if((i=o.n()).done){e.next=11;break}return e.delegateYield(c(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),o.e(e.t1);case 16:return e.prev=16,o.f(),e.finish(16);case 19:n<w.length?G("Could not delete products "+a.toString()):G("Successfull"),P(!1),Z();case 22:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return m["mr-token"]?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Y&&Object(J.jsx)("div",{style:{color:"red"},children:Y}),"none"==g?Object(J.jsxs)("div",{children:[1==H&&Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",flexDirection:"row"},children:[Object(J.jsxs)("div",{children:[Object(J.jsx)(y.a,{color:"primary",variant:"contained",onClick:function(e){x("add")},children:Object(J.jsx)(me.a,{})}),Object(J.jsx)(y.a,{disabled:1!=w.length,onClick:function(e){console.log("update clicked"),1==w.length&&x("update")},color:"primary",variant:"contained",children:Object(J.jsx)(Oe.a,{})}),Object(J.jsx)(y.a,{variant:"outlined",color:"secondary",disabled:!(w.length>0),onClick:function(e){P(!0)},children:Object(J.jsx)(xe.a,{})}),Object(J.jsxs)(de.a,{open:T,onClose:$,children:[Object(J.jsxs)(ue.a,{id:"alert-dialog-title",children:['"Are you sure you want to delete the ',w.length,' items"']}),Object(J.jsxs)(je.a,{children:[Object(J.jsx)(he.a,{onClick:$,color:"primary",children:"Cancel"}),Object(J.jsx)(he.a,{onClick:te,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]}),Object(J.jsxs)("form",{children:[Object(J.jsx)("input",{type:"file",name:"myfile",id:"myfile",onChange:function(e){1==e.target.files.length?(A(e.target.files[0]),console.log("file is: ",e.target.files[0]),R(!0)):(A(null),R(!1))},hidden:!0}),Object(J.jsx)("label",{htmlFor:"myfile",className:"file-input-label",children:"Choose File"}),Object(J.jsx)(he.a,{type:"submit",disabled:!V,onClick:function(e){e.preventDefault();var t=new FormData;t.append("productsFile",E),V&&-1==E.name.search(/product/i)?G("Please make sure you have selected products file. File name should contain the word product"):B.b.uploadProductsFile(m["mr-token"],t).then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(G(e.msg),console.log(e.msg)):(G(e.msg+" (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):G("Failed import due to unknown reason"),console.log("setting mode"),R(!1),A(null),Z(),x("none")})).catch((function(e){console.error("Error:",e),R(!1),A(null),G("Failed import due to unknown reasons")}))},color:"primary",variant:"contained",children:"Import Products"})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)(pe.a,{variant:"outlined",size:"small",margin:"none",type:"text",style:{marginRight:"4px"},value:h,text:"Search",onChange:function(e){return p(e.target.value)},onKeyPress:function(e){return"Enter"==e.key&&X(e.target.value)}}),Object(J.jsx)(he.a,{color:"primary",variant:"contained",onClick:function(e){return X(h)},children:"Search"})]})]}),Object(J.jsx)("div",{style:{width:"100%",minWidth:"600px",height:"calc(100vh - 140px"},children:Object(J.jsx)(se.a,{rows:c,columns:1==H?Te:K,checkboxSelection:!0,components:{Toolbar:se.b},onSelectionModelChange:function(e){console.log(e),k(e.selectionModel)},disableColumnMenu:!0,disableSelectionOnClick:!0,loading:z})})]}):Object(J.jsx)(Se,{id:"update"==g?w[0]:null,mode:g,setMode:x})]}):Object(J.jsx)(Q.a,{to:"/signin"})},De=Object(p.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ie(e){var t=De(),n=Object(ee.a)(["mr-token"]),r=Object(l.a)(n,1)[0],a=Object(u.useState)({}),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(u.useState)({}),j=Object(l.a)(s,2),h=j[0],p=j[1],b=Object(u.useState)(!1),m=Object(l.a)(b,2),f=m[0],O=m[1];Object(u.useEffect)((function(){"update"==e.mode&&function(){var t=Object(ce.a)(oe.a.mark((function t(){var n,a;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.b.getStore(r["mr-token"],e.id);case 3:if(200!=(n=t.sent).status){t.next=12;break}return t.next=7,n.json();case 7:a=t.sent,console.log("retreiving data"),p(a),t.next=13;break;case 12:throw"Could not get the store details";case 13:t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("api error"),console.error(t.t0),c({form:String(t.t0)});case 20:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[]);var g=function(){var t=Object(ce.a)(oe.a.mark((function t(n,a){var o,i;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.b.updateStore(r["mr-token"],n,a);case 3:if(o=t.sent,console.log("response status ",o.status),200!=o.status){t.next=11;break}O(!0),alert("Saved Succesfully"),e.setMode("none"),t.next=20;break;case 11:if(400!=o.status){t.next=19;break}return console.log(o),t.next=15,o.json();case 15:i=t.sent,c(i),t.next=20;break;case 19:throw"Failed due to unknown reasons";case 20:t.next=27;break;case 22:t.prev=22,t.t0=t.catch(0),console.log("api error"),console.error(t.t0),c({form:String(t.t0)});case 27:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e,n){return t.apply(this,arguments)}}();return r["mr-token"]?f?Object(J.jsx)(Q.a,{to:"/stores"}):"update"==e.mode&&0===Object.keys(h).length?Object(J.jsx)("div",{children:"Loading..."}):Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(J.jsx)(x.a,{variant:"h4",children:"update"==e.mode?"Update":"Add"}),Object(J.jsx)(he.a,{variant:"contained",color:"primary",onClick:function(t){e.setMode("none")},children:"Go back"})]}),Object(J.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var n=new FormData(t.target),r={};n.forEach((function(e,t){return r[t]=e})),console.log("sending data"),r=Object(d.a)(Object(d.a)({},h),r),console.log(r),"update"==e.mode?g(e.id,r):console.error("only update available")},children:[0!=Object.keys(i).length&&Object(J.jsxs)(ve.a,{error:!0,children:["Invalid data ",i.form]}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"storeName",label:"Store Name",name:"storeName",disabled:"update"==e.mode,helperText:i.storeName?i.storeName[0]:"",error:!!i.storeName,defaultValue:"update"==e.mode?h.storeName:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"email",id:"emailAddress",label:"Email Address",name:"emailAddress",helperText:i.emailAddress?i.emailAddress[0]:"",error:!!i.emailAddress,defaultValue:"update"==e.mode?h.emailAddress:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"addressLine1",label:"Address Line 1",name:"addressLine1",inputProps:{maxLength:50},helperText:i.addressLine1?i.addressLine1[0]:"",error:!!i.addressLine1,defaultValue:"update"==e.mode?h.addressLine1:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"addressLine2",label:"addressLine2",name:"addressLine2",helperText:i.addressLine2?i.addressLine2[0]:"",error:!!i.addressLine2,defaultValue:"update"==e.mode?h.addressLine2:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"city",label:"City",name:"city",helperText:i.city?i.city[0]:"",error:!!i.city,defaultValue:"update"==e.mode?h.city:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"state",label:"State",name:"state",inputProps:{maxLength:2},helperText:i.state?i.state[0]:"",error:!!i.state,defaultValue:"update"==e.mode?h.state:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"zipCode",label:"Zip Code",name:"zipCode",type:"number",inputProps:{step:1,max:99999},helperText:i.zipCode?i.zipCode[0]:"",error:!!i.zipCode,defaultValue:"update"==e.mode?h.zipCode:""}),Object(J.jsx)(he.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(J.jsx)(Q.a,{to:"/signin"})}var ze=[{field:"storeName",headerName:"Store Name",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})}},{field:"storeCode",headerName:"Store Code",width:110},{field:"emailAddress",headerName:"Email Address",width:250,renderCell:function(e){return Object(J.jsx)(Ne,{limit:23,value:e.value?e.value.toString():"",width:300})}},{field:"addressLine1",headerName:"Addres Line 1",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})}},{field:"addressLine2",headerName:"Adress Line 2",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})}},{field:"city",headerName:"City",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})}},{field:"state",headerName:"State",width:80},{field:"zipCode",headerName:"Zip Code",width:100}];var Le=function(e){var t=Object(u.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(ee.a)(["mr-token"]),i=Object(l.a)(o,1)[0],c=Object(u.useState)("none"),s=Object(l.a)(c,2),d=s[0],j=s[1],h=Object(u.useState)(""),p=Object(l.a)(h,2),b=p[0],m=p[1],f=Object(u.useState)([]),O=Object(l.a)(f,2),g=O[0],x=O[1],v=Object(u.useState)(!1),S=Object(l.a)(v,2),w=S[0],k=S[1];Object(u.useEffect)((function(){e.setTitle("Stores"),k(!0),B.b.getStoreList(i["mr-token"]).then((function(e){if(200==e.status)return e.json();throw 401==e.status&&re.handleUnauthorized(),"Something went wrong"})).then((function(e){console.log(e),e.forEach((function(e,t){return e.id=t+1})),a(e),k(!1)})).catch((function(e){console.log("api error"),console.error(e),k(!1)}))}),[d,i]);var C=e.usertype;return i["mr-token"]?Object(J.jsx)("div",{children:"none"==d?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[1==C&&Object(J.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center",flexWrap:"wrap",flexDirection:"row"},children:Object(J.jsx)(y.a,{disabled:1!=g.length,onClick:function(e){console.log("update clicked"),1==g.length&&(m(r.find((function(e){return e.id==g[0]})).storeCode),j("update"))},color:"primary",variant:"contained",children:Object(J.jsx)(Oe.a,{})})}),Object(J.jsx)("div",{style:{width:"100%",minWidth:"600px",height:"calc(100vh - 100px"},children:Object(J.jsx)(se.a,{rows:r,columns:ze,components:{Toolbar:se.b},checkboxSelection:!0,onSelectionModelChange:function(e){console.log(e),x(e.selectionModel)},disableColumnMenu:!0,loading:w})})]}):Object(J.jsx)(Ie,{id:"update"==d?b:null,mode:d,setMode:j})}):Object(J.jsx)(Q.a,{to:"/signin"})},We=n(255),Fe=n(276),Ee=Object(p.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ae(e){var t=Ee(),n=Object(ee.a)(["mr-token"]),r=Object(l.a)(n,1)[0],a=Object(u.useState)({}),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(u.useState)(!1),j=Object(l.a)(s,2),h=j[0],p=j[1],b=Object(u.useState)(!1),m=Object(l.a)(b,2),f=m[0],O=m[1],g=Object(u.useState)([]),v=Object(l.a)(g,2),y=v[0],S=v[1],w=Object(u.useState)([]),k=Object(l.a)(w,2),C=k[0],N=k[1],T=Object(u.useState)([]),P=Object(l.a)(T,2),D=P[0],I=P[1],z=Object(u.useState)([]),L=Object(l.a)(z,2),W=L[0],F=L[1],E=Object(u.useState)([]),A=Object(l.a)(E,2),M=A[0],U=A[1],V=!1;console.log("opened form"),console.log(C),console.log(M),Object(u.useEffect)((function(){B.b.getProductList(r["mr-token"]).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.style}));N(Object(le.a)(new Set(t)));var n=e.map((function(e){return e.size}));I(Object(le.a)(new Set(n)));var r=e.map((function(e){return e.color}));F(Object(le.a)(new Set(r))),U(e.map((function(e){return e.sfmId})))})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);var R=function(e){O(!1)},q=function(t){console.log(t),"update"==e.mode?B.b.updatePurchase(r["mr-token"],e.id,t).then((function(e){return 400==e.status&&(console.log(e),p(!1),V=!0),200==e.status&&p(!0),e.json()})).then((function(e){V&&c(e)})).catch((function(e){console.log("api error"),console.error(e)})):B.b.addPurchase(r["mr-token"],t).then((function(e){return console.log("saving",e.status),400==e.status&&(console.log(e),p(!1),V=!0),201==e.status&&p(!0),e.json()})).then((function(e){V&&c(e)})).catch((function(e){console.log("api error"),console.error(e)}))},_=function(t){e.setMode("none")};return r["mr-token"]?h?Object(J.jsxs)("div",{children:["Saved Succcesfully ",Object(J.jsx)(he.a,{onClick:_,children:"Go back to Purchases"})]}):Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{style:{display:"flex"},children:[Object(J.jsx)(x.a,{children:"update"==e.mode?"Update":"Add"}),Object(J.jsx)(he.a,{onClick:_,children:"Go back"})]}),Object(J.jsxs)(de.a,{open:f,onClose:R,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(J.jsx)(ue.a,{id:"alert-dialog-title",children:'"The Product does not Exist. New Product will be created. Continue?"'}),Object(J.jsxs)(je.a,{children:[Object(J.jsx)(he.a,{onClick:R,color:"primary",children:"Cancel"}),Object(J.jsx)(he.a,{onClick:function(e){q(y)},color:"primary",autoFocus:!0,children:"Confirm"})]})]}),Object(J.jsxs)("form",{className:t.form,onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n={};console.log(t),t.forEach((function(e,t){return n[t]=e})),console.log("sending data");var r=n.style+"-"+n.size+"-"+n.color;S(n),M.find((function(e){return e==r}))?q(n):O(!0)},children:[0!=Object.keys(i).length&&Object(J.jsx)(ve.a,{error:!0,children:"Invalid data"}),Object(J.jsxs)(pe.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"status",label:"Status",name:"status",helperText:i.status?i.status[0]:"",error:!!i.status,defaultValue:"update"==e.mode?e.data.status:"In Transit",children:[Object(J.jsx)(We.a,{value:"In Transit",children:"In Transit"},0),Object(J.jsx)(We.a,{value:"Received",children:"Received"},1)]}),Object(J.jsx)(Fe.a,{id:"styleCombo",options:C,freeSolo:!0,getOptionLabel:function(e){return e},fullWidth:!0,renderInput:function(t){return Object(J.jsx)(pe.a,Object(d.a)(Object(d.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,id:"style",label:"Style",name:"style",disabled:"update"==e.mode,helperText:i.style?i.style[0]:"",error:!!i.style,defaultValue:"update"==e.mode?e.data.style:""}))}}),Object(J.jsx)(Fe.a,{id:"sizeCombo",options:D,freeSolo:!0,getOptionLabel:function(e){return e},renderInput:function(t){return Object(J.jsx)(pe.a,Object(d.a)(Object(d.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"size",label:"Size",name:"size",disabled:"update"==e.mode,helperText:i.size?i.size[0]:"",error:!!i.size,defaultValue:"update"==e.mode?e.data.size:""}))}}),Object(J.jsx)(Fe.a,{id:"colorCombo",options:W,freeSolo:!0,getOptionLabel:function(e){return e},renderInput:function(t){return Object(J.jsx)(pe.a,Object(d.a)(Object(d.a)({},t),{},{variant:"outlined",margin:"normal",required:!0,id:"color",label:"Color",name:"color",disabled:"update"==e.mode,helperText:i.color?i.color[0]:"",error:!!i.color,defaultValue:"update"==e.mode?e.data.color:""}))}}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"company",label:"Company",name:"company",helperText:i.company?i.company[0]:"",error:!!i.company,defaultValue:"update"==e.mode?e.data.company:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"warehouse",label:"Warehouse",name:"warehouse",helperText:i.warehouse?i.warehouse[0]:"",error:!!i.warehouse,defaultValue:"update"==e.mode?e.data.warehouse:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"ordered",label:"Ordered",name:"ordered",type:"number",helperText:i.ordered?i.ordered[0]:"",error:!!i.ordered,defaultValue:"update"==e.mode?e.data.ordered:""}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderDate",label:"order Date",name:"orderDate",type:"date",helperText:i.orderDate?i.orderDate[0]:"",error:!!i.orderDate,InputLabelProps:{shrink:!0},defaultValue:"update"==e.mode?e.data.orderDate:""}),Object(J.jsx)(he.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(J.jsx)(Q.a,{to:"/signin"})}var Me=function(e){var t=String(e.getDate()).padStart(2,"0");return String(e.getMonth()+1).padStart(2,"0")+"/"+t+"/"+String(e.getFullYear()).substr(2,2)};var Ue=function(e){var t=Object(u.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(u.useState)([]),i=Object(l.a)(o,2),c=(i[0],i[1],Object(u.useState)("")),s=Object(l.a)(c,2),j=s[0],h=s[1],p=Object(ee.a)(["mr-token"]),b=Object(l.a)(p,1)[0],m=Object(u.useState)("none"),f=Object(l.a)(m,2),O=f[0],g=f[1],x=Object(u.useState)([]),v=Object(l.a)(x,2),S=v[0],w=v[1],k=Object(u.useState)({}),C=Object(l.a)(k,2),N=C[0],T=C[1],P=Object(u.useState)(0),D=Object(l.a)(P,2),I=D[0],z=D[1],L=Object(u.useState)(0),W=Object(l.a)(L,2),F=W[0],E=W[1],A=Object(u.useState)(!1),M=Object(l.a)(A,2),U=M[0],V=M[1],R=Object(u.useState)(null),q=Object(l.a)(R,2),_=q[0],Y=q[1],G=Object(u.useState)(!1),H=Object(l.a)(G,2),K=H[0],Z=H[1],X=Object(u.useState)(""),$=Object(l.a)(X,2),te=$[0],ne=$[1],ae=Object(u.useState)(!1),le=Object(l.a)(ae,2),be=le[0],fe=le[1],ge=function(e){fe(!1)},ve=[{field:"id",headerName:"Id",width:70,hide:!0},{field:"status",headerName:"Status",width:150,renderCell:function(e){return Object(J.jsx)(he.a,{variant:"contained",color:"In Transit"==e.value?"secondary":"primary",size:"small","data-pid":e.id,onClick:ye,style:{marginLeft:16},children:e.value})}},{field:"style",headerName:"Style",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})}},{field:"size",headerName:"Size",width:80},{field:"color",headerName:"Color",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})}},{field:"company",headerName:"Company",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})}},{field:"warehouse",headerName:"Warehouse",width:150},{field:"ordered",headerName:"Ordered",width:150},{field:"orderDate",headerName:"Order Date",width:150,valueFormatter:function(e){if(e.value)return Me(new Date(e.value))}},{field:"arrivalDate",headerName:"Arrival Date",width:150,valueFormatter:function(e){if(e.value)return Me(new Date(e.value))}},{field:"sfmId",headerName:"SFM ID",hide:!0,width:300,renderCell:function(e){return Object(J.jsx)(Ne,{limit:28,value:e.value?e.value.toString():"",width:400})}}],ye=function(e){var t=parseInt(e.currentTarget.dataset.pid),n=r.find((function(e){return e.id==t})),o="In Transit"==n.status?"Received":"In Transit",i=Object(d.a)(Object(d.a)({},n),{},{status:o});console.log(i),B.b.updatePurchase(b["mr-token"],t,i).then((function(e){if(200==e.status)return e.json();throw 400==e.status?JSON.stringify(e.json()):"Unknown reason. Please refresh"})).then((function(e){var t=r.map((function(t){return t.id==e.id?e:t}));ne("updated purchase"),console.log(t.map((function(e){return e.id}))),a(t)})).catch((function(e){console.log("api error"),console.error(e),ne("Something went wrong, "+String(e))}))};function Se(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&0!=F?E(0):(console.log("fetching data"),e=j?new URLSearchParams({page:F+1,search:j}):new URLSearchParams({page:F+1}),V(!0),B.b.getPurchasesList(b["mr-token"],e).then((function(e){if(200==e.status)return e.json();throw 401==e.status&&re.handleUnauthorized(),"Something went wrong"})).then((function(e){console.log(e),w([]),e.results?(I!=e.count&&E(0),console.log("setting count",e.count),z(e.count),a(e.results)):(console.error("error getting data"),console.error(e.detail),console.log("setting count",e.count),E(0),z(0),a([])),V(!1)})).catch((function(e){console.log("api error"),console.error(e),ne(String(e)),V(!1)})))}return Object(u.useEffect)((function(){e.setTitle("Purchases"),console.log("useeffect called"),"none"==O&&Se()}),[b,O,F]),b["mr-token"]?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[""==te?"":Object(J.jsx)("div",{style:{color:"red"},children:te}),"none"==O?Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",flexDirection:"row"},children:[Object(J.jsxs)("div",{children:[Object(J.jsx)(y.a,{color:"primary",variant:"contained",onClick:function(e){g("add")},children:Object(J.jsx)(me.a,{})}),Object(J.jsx)(y.a,{disabled:1!=S.length,onClick:function(e){console.log("update clicked"),1==S.length&&B.b.getPurchase(b["mr-token"],S[0]).then((function(e){return e.json()})).then((function(e){console.log("filling formdata"),T(e),g("update")})).catch((function(e){console.log("api error"),console.error(e)}))},color:"primary",variant:"contained",children:Object(J.jsx)(Oe.a,{})}),Object(J.jsx)(y.a,{variant:"contained",color:"secondary",disabled:!(S.length>0),onClick:function(e){fe(!0)},children:Object(J.jsx)(xe.a,{})}),Object(J.jsxs)(de.a,{open:be,onClose:ge,children:[Object(J.jsxs)(ue.a,{id:"alert-dialog-title",children:['"Are you sure you want to delete the ',S.length,' items"']}),Object(J.jsxs)(je.a,{children:[Object(J.jsx)(he.a,{onClick:ge,color:"primary",children:"Cancel"}),Object(J.jsx)(he.a,{onClick:function(e){console.log("u confirmed delete");var t=[],n=function(){var e=Object(ce.a)(oe.a.mark((function e(){var n,r,a,o;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(ie.a)(S),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=23;break}return a=r.value,e.prev=5,e.next=8,B.b.deletePurchase(b["mr-token"],a);case 8:if(200!=(o=e.sent).status&&204!=o.status){e.next=13;break}console.log("deleted purchase with id ".concat(a)),e.next=15;break;case 13:throw console.log("Failed to delete purchase with id ".concat(a)),"Failed to delete purchase with id ".concat(a);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("could not delete purchase id ".concat(a),e.t0),t.push("could not delete purchase id ".concat(a));case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),n.e(e.t1);case 28:return e.prev=28,n.f(),e.finish(28);case 31:t.length>0?ne("Some rows were not deleted\n"+t.toString()+" Please refresh"):ne("Deleted successfully. Please refresh");case 32:case"end":return e.stop()}}),e,null,[[1,25,28,31],[5,17]])})));return function(){return e.apply(this,arguments)}}();fe(!1),n()},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]}),Object(J.jsxs)("form",{children:[Object(J.jsx)("input",{type:"file",name:"myfile",id:"myfile",onChange:function(e){1==e.target.files.length?(Y(e.target.files[0]),console.log("file is: ",e.target.files[0]),Z(!0)):(Y(null),Z(!1))},hidden:!0}),Object(J.jsx)("label",{htmlFor:"myfile",className:"file-input-label",children:"Choose File"}),Object(J.jsx)(he.a,{type:"submit",disabled:!K,onClick:function(e){e.preventDefault();var t=new FormData;t.append("purchaseFile",_),K&&-1==_.name.search(/purchase/i)?ne("Please make sure you have selected purchase file. File name should contain the word purchase"):B.b.uploadPurchasesFile(b["mr-token"],t).then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(ne(e.msg),console.log(e.msg)):(ne(e.msg+" (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):ne("Failed import due to unknown reason"),console.log("setting mode"),Se(),g("none"),Z(!1)})).catch((function(e){console.error("Error:",e),ne("Failed import due to unknown reasons")}))},color:"primary",variant:"contained",children:"Import"})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)(pe.a,{variant:"outlined",size:"small",margin:"none",type:"text",value:j,text:"Search",style:{marginRight:"4px"},onChange:function(e){return h(e.target.value)},onKeyPress:function(e){return"Enter"==e.key&&Se(!0)}}),Object(J.jsx)(he.a,{color:"primary",variant:"contained",onClick:function(e){return Se(!0)},children:"Search"})]})]}),Object(J.jsx)("div",{style:{width:"100%",minWidth:"600px",flexGrow:1},children:Object(J.jsx)(se.a,{rows:r,columns:ve,checkboxSelection:!0,onSelectionModelChange:function(e){console.log(e),w(e.selectionModel)},disableSelectionOnClick:!0,disableColumnMenu:!0,autoHeight:!0,components:{Toolbar:se.b},loading:U,pagination:!0,page:F,pageSize:50,rowsPerPageOptions:[],rowCount:I,paginationMode:"server",onPageChange:function(e){E(e.page)}})})]}):Object(J.jsx)(Ae,{id:"update"==O?S:null,data:"update"==O?N:null,mode:O,setMode:g})]}):Object(J.jsx)(Q.a,{to:"/signin"})},Ve=[{field:"style",headerName:"Style",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:20,value:e.value?e.value.toString():"",width:300})}},{field:"size",headerName:"Size",width:80},{field:"color",headerName:"Color",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})}},{field:"productAvailability",headerName:"Product Availabity",width:150},{field:"inStock",headerName:"In Stock",width:80},{field:"unfulfilledCount",headerName:"Unfulfilled Count",width:80},{field:"inTransit",headerName:"In Transit",width:90},{field:"arrivalDate",headerName:"ArrivaL Date",width:120,valueFormatter:function(e){if(e.value)return function(e){var t=String(e.getDate()).padStart(2,"0");return String(e.getMonth()+1).padStart(2,"0")+"/"+t+"/"+String(e.getFullYear()).substr(2,2)}(new Date(e.value))}},{field:"trueCount",headerName:"True Count",width:80},{field:"minimum",headerName:"Minimum",width:80},{field:"maximum",headerName:"Maximum",width:80},{field:"shortCount",headerName:"Short Count",width:80},{field:"needToPurchase",headerName:"Need to Purchase",width:90}];var Re=function(e){var t=Object(u.useState)([]),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(u.useState)([]),i=Object(l.a)(o,2),c=i[0],s=i[1],d=Object(u.useState)(""),j=Object(l.a)(d,2),h=j[0],p=j[1],b=Object(u.useState)(null),m=Object(l.a)(b,2),f=m[0],O=m[1],g=Object(u.useState)(!1),x=Object(l.a)(g,2),v=x[0],y=x[1],S=Object(u.useState)(""),w=Object(l.a)(S,2),k=w[0],C=w[1],N=Object(u.useState)(!1),T=Object(l.a)(N,2),P=T[0],D=T[1],I=Object(ee.a)(["mr-token"]),z=Object(l.a)(I,1)[0];Object(u.useEffect)((function(){e.setTitle("Inventory"),L()}),[z]);var L=function(){D(!0),B.b.getInventoryList(z["mr-token"]).then((function(e){if(200==e.status)return e.json();throw 401==e.status&&re.handleUnauthorized(),"Something went wrong"})).then((function(e){console.log(e),a(e),D(!1)})).catch((function(e){console.log("api error"),C("Something went wrong"),console.error(e),D(!1)}))};Object(u.useEffect)((function(){W(h)}),[r]);var W=function(e){var t=Object(le.a)(r);""!=e&&(t=t.filter((function(t){var n=e.toLowerCase();return t.style.toLowerCase().search(n)>=0||t.size.toLowerCase().search(n)>=0||t.color.toLowerCase().search(n)>=0||t.productAvailability.toLowerCase().search(n)>=0}))),s(t)};return z["mr-token"]?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[k&&Object(J.jsx)("div",{style:{color:"red"},children:k}),Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",flexDirection:"row",marginBottom:"5px"},children:[Object(J.jsxs)("form",{children:[Object(J.jsx)("input",{type:"file",name:"myfile",id:"myfile",onChange:function(e){1==e.target.files.length?(O(e.target.files[0]),console.log("file is: ",e.target.files[0]),y(!0)):(O(null),y(!1))},hidden:!0}),Object(J.jsx)("label",{htmlFor:"myfile",className:"file-input-label",children:"Choose File"}),Object(J.jsx)(he.a,{type:"submit",disabled:!v,onClick:function(e){e.preventDefault();var t=new FormData;t.append("inventoryFile",f),v&&-1==f.name.search(/inventory/i)?C("Please make sure you have selected inventory file. File name should contain the word inventory"):B.b.uploadInventoryFile(z["mr-token"],t).then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(C(e.msg),console.log(e.msg)):(C(e.msg+" (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):C("Failed import due to unknown reason"),y(!1),O(null),L()})).catch((function(e){console.error("Error:",e),y(!1),O(null),C("Failed import due to unknown reasons")}))},color:"primary",variant:"contained",children:"Import Inventory"})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)(pe.a,{variant:"outlined",size:"small",margin:"none",type:"text",value:h,text:"Search",style:{marginRight:"4px"},onChange:function(e){return p(e.target.value)},onKeyPress:function(e){return"Enter"==e.key&&W(e.target.value)}}),Object(J.jsx)(he.a,{color:"primary",variant:"contained",onClick:function(e){return W(h)},children:"Search"})]})]}),Object(J.jsx)("div",{style:{width:"100%",minWidth:"600px",height:"calc(100vh - 100px)"},children:Object(J.jsx)(se.a,{rows:c,columns:Ve,components:{Toolbar:se.b},disableColumnMenu:!0,loading:P})})]}):Object(J.jsx)(Q.a,{to:"/signin"})},qe=Object(p.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function _e(e){var t=qe(),n=Object(ee.a)(["mr-token"]),r=Object(l.a)(n,1)[0],a=Object(u.useState)({}),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(u.useState)(!1),j=Object(l.a)(s,3),h=j[0],p=j[1],b=(j[2],Object(u.useState)([])),m=Object(l.a)(b,2),f=m[0],O=m[1],g=Object(u.useState)([]),v=Object(l.a)(g,2),y=v[0],S=v[1],w=Object(u.useState)([]),k=Object(l.a)(w,2),C=k[0],N=k[1],T=Object(u.useState)([]),P=Object(l.a)(T,2),D=P[0],I=P[1],z=Object(u.useState)([]),L=Object(l.a)(z,2),W=L[0],F=L[1],E=Object(u.useRef)(null),A=Object(u.useRef)(null),M=Object(u.useRef)(null),U=!1,V=e.usertype;console.log("opened form"),Object(u.useEffect)((function(){B.b.getProductList(r["mr-token"]).then((function(e){return e.json()})).then((function(e){var t=[{prop:"style",direction:1},{prop:"size",direction:1},{prop:"color",direction:1}];e.sort((function(e,n){for(var r=0,a=0;r<t.length&&0===a;)a=t[r].direction*(e[t[r].prop].toString()<n[t[r].prop].toString()?-1:e[t[r].prop].toString()>n[t[r].prop].toString()?1:0),r++;return a})),S(Object(le.a)(new Set(e.map((function(e){return e.style}))))),N(Object(le.a)(new Set(e.map((function(e){return e.size}))))),I(Object(le.a)(new Set(e.map((function(e){return e.color}))))),O(e)})).catch((function(e){console.log("api error"),console.error(e)})),B.b.getStoreList(r["mr-token"]).then((function(e){return e.json()})).then((function(e){return console.log(e),F(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);return r["mr-token"]?h?e.fromPrinting?Object(J.jsx)(Q.a,{to:"/printing"}):Object(J.jsx)(Q.a,{to:"/orders"}):Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(J.jsx)(x.a,{variant:"h4",children:"update"==e.mode?"Update":"Add"}),Object(J.jsx)(he.a,{variant:"contained",color:"primary",onClick:function(t){e.setMode("none")},children:"Go back"})]}),Object(J.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault(),console.log("submit clicked");var n=new FormData(t.target),a={};n.forEach((function(e,t){return a[t]=e})),a.sfmId=a.style+"-"+a.size+"-"+a.color,0!=f.filter((function(e){return e.sfmId==a.sfmId})).length?(""==a.saleDate&&(a.saleDate=null),0==V&&(a=Object(d.a)(Object(d.a)({},a),{},{processing:"N",printed:"N",shipped:"N",sfmNotes:"",buyerName:"",buyerEmail:"",buyerComments:"",giftMessages:"",sku:"",priorityShip:""})),a.shipDate=null,a.customerPaidShipping=0,a.trackingNumber="",console.log("sending data"),console.log(a),"update"==e.mode?B.b.updateOrder(r["mr-token"],e.id,a).then((function(t){return 400==t.status&&(console.log(t),p(!1),U=!0),200==t.status&&(p(!0),alert("Saved Successfully"),e.setMode("none")),t.json()})).then((function(e){U&&c(e)})).catch((function(e){console.log("api error"),console.error(e)})):B.b.addOrder(r["mr-token"],a).then((function(t){return console.log("saving",t.status),400==t.status&&(console.log(t),p(!1),U=!0),201==t.status&&(p(!0),alert("Saved Successfully"),e.setMode("none")),t.json()})).then((function(e){U&&c(e)})).catch((function(e){console.log("api error"),console.error(e)}))):c({style:["The style size color combination does not exist"]})},children:[0!=Object.keys(i).length&&Object(J.jsxs)(ve.a,{error:!0,children:["Invalid data ",i.form]}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"store",label:"Store Name",name:"store",inputProps:{maxLength:50},helperText:i.store?i.store[0]:"",error:!!i.store,children:W.map((function(e){return Object(J.jsx)(We.a,{value:e.storeCode,children:e.storeName},e.storeCode)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"orderStatus",label:"Order Status",name:"orderStatus",inputProps:{maxLength:50},helperText:i.orderStatus?i.orderStatus[0]:"",error:!!i.orderStatus,defaultValue:"Unfulfilled",disabled:!0,children:["Unfulfilled","Processed","Printed","Shipped"].map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"saleDate",label:"Sale Date",name:"saleDate",type:"date",helperText:i.saleDate?i.saleDate[0]:"",error:!!i.saleDate,InputLabelProps:{shrink:!0}}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderNo",label:"Order No",name:"orderNo",inputProps:{maxLength:20},helperText:i.orderNo?i.orderNo[0]:"",error:!!i.orderNo}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"recipientName",label:"Recipient Name",name:"recipientName",inputProps:{maxLength:50},helperText:i.recipientName?i.recipientName[0]:"",error:!!i.recipientName}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,id:"style",label:"Style",name:"style",inputRef:E,onChange:function(e){console.log(E,A,M);var t=e.target.value;console.log("style changed",t),N(Object(le.a)(new Set(f.filter((function(e){return e.style==t})).map((function(e){return e.size}))))),I(Object(le.a)(new Set(f.filter((function(e){return e.style==t})).map((function(e){return e.color})))))},disabled:"update"==e.mode,helperText:i.style?i.style[0]:"",error:!!i.style,children:y.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:A,id:"size",label:"Size",name:"size",onChange:function(e){console.log(E.current.value,A.current.value,M.current.value);var t=E.current.value,n=e.target.value;console.log("size changed",n),I(Object(le.a)(new Set(f.filter((function(e){return e.style==t&&e.size==n})).map((function(e){return e.color})))))},disabled:"update"==e.mode,helperText:i.size?i.size[0]:"",error:!!i.size,children:C.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:M,id:"color",label:"Color",name:"color",disabled:"update"==e.mode,helperText:i.color?i.color[0]:"",error:!!i.color,children:D.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"design",label:"design",name:"design",inputProps:{maxLength:50},helperText:i.design?i.design[0]:"",error:!!i.design}),0!=V&&Object(J.jsxs)("div",{children:[Object(J.jsxs)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"processing",label:"Processing",name:"processing",inputProps:{maxLength:1},helperText:i.processing?i.processing[0]:"",error:!!i.processing,defaultValue:"N",children:[Object(J.jsx)(We.a,{value:"N",children:"No"},0),Object(J.jsx)(We.a,{value:"Y",children:"Yes"},1)]}),Object(J.jsxs)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"printed",label:"Printed",name:"printed",inputProps:{maxLength:1},helperText:i.printed?i.printed[0]:"",error:!!i.printed,defaultValue:"N",children:[Object(J.jsx)(We.a,{value:"N",children:"No"},0),Object(J.jsx)(We.a,{value:"Y",children:"Yes"},1)]}),Object(J.jsxs)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"shipped",label:"Shipped",name:"shipped",inputProps:{maxLength:1},helperText:i.shipped?i.shipped[0]:"",error:!!i.shipped,defaultValue:"N",children:[Object(J.jsx)(We.a,{value:"N",children:"No"},0),Object(J.jsx)(We.a,{value:"Y",children:"Yes"},1)]}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sfmNotes",label:"SFM Notes",name:"sfmNotes",inputProps:{maxLength:5e3},helperText:i.sfmNotes?i.sfmNotes[0]:"",error:!!i.sfmNotes}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"Buyer Name",label:"buyerName",name:"buyerName",inputProps:{maxLength:50},helperText:i.buyerName?i.buyerName[0]:"",error:!!i.buyerName}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"email",id:"buyerEmail",label:"Buyer Email",name:"buyerEmail",inputProps:{maxLength:50},helperText:i.buyerEmail?i.buyerEmail[0]:"",error:!!i.buyerEmail}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"buyerComments",label:"Buyer Comments",name:"buyerComments",inputProps:{maxLength:5e3},helperText:i.buyerComments?i.buyerComments[0]:"",error:!!i.buyerComments}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"giftMessages",label:"Gift Messages",name:"giftMessages",inputProps:{maxLength:5e3},helperText:i.giftMessages?i.giftMessages[0]:"",error:!!i.giftMessages}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",inputProps:{maxLength:20},helperText:i.sku?i.sku[0]:"",error:!!i.sku}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"priorityShip",label:"Priority Ship",name:"priorityShip",inputProps:{maxLength:50},helperText:i.priorityShip?i.priorityShip[0]:"",error:!!i.priorityShip})]}),Object(J.jsx)(he.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(J.jsx)(Q.a,{to:"/signin"})}var Ye=Object(p.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Ge(e){var t=Ye(),n=Object(ee.a)(["mr-token"]),r=Object(l.a)(n,1)[0],a=Object(u.useState)({}),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(u.useState)(!1),j=Object(l.a)(s,3),h=j[0],p=j[1],b=(j[2],Object(u.useState)({})),m=Object(l.a)(b,2),f=m[0],O=m[1],g=Object(u.useState)(!1),v=Object(l.a)(g,2),y=v[0],S=v[1],w=Object(u.useState)([]),k=Object(l.a)(w,2),C=k[0],N=k[1],T=Object(u.useState)([]),P=Object(l.a)(T,2),D=P[0],I=P[1],z=Object(u.useState)([]),L=Object(l.a)(z,2),W=L[0],F=L[1],E=Object(u.useState)([]),A=Object(l.a)(E,2),M=A[0],U=A[1],V=Object(u.useState)([]),R=Object(l.a)(V,2),q=R[0],_=R[1],Y=Object(u.useRef)(null),G=Object(u.useRef)(null),H=Object(u.useRef)(null),K=!1;console.log("opened form");var Z=e.usertype;Object(u.useEffect)((function(){B.b.getOrder(r["mr-token"],e.id).then((function(e){return e.json()})).then((function(e){console.log("initializing formdata"),O(e),S(!0)})).catch((function(e){console.log("api error"),console.error(e)})),B.b.getProductList(r["mr-token"]).then((function(e){return e.json()})).then((function(e){var t=[{prop:"style",direction:1},{prop:"size",direction:1},{prop:"color",direction:1}];e.sort((function(e,n){for(var r=0,a=0;r<t.length&&0===a;)a=t[r].direction*(e[t[r].prop].toString()<n[t[r].prop].toString()?-1:e[t[r].prop].toString()>n[t[r].prop].toString()?1:0),r++;return a})),F(Object(le.a)(new Set(e.map((function(e){return e.style}))))),U(Object(le.a)(new Set(e.map((function(e){return e.size}))))),_(Object(le.a)(new Set(e.map((function(e){return e.color}))))),N(e)})).catch((function(e){console.log("api error"),console.error(e)})),B.b.getStoreList(r["mr-token"]).then((function(e){return e.json()})).then((function(e){I(e)})).catch((function(e){console.log("api error"),console.error(e)}))}),[]);var X,$=function(e){console.log(Y,G,H);var t=e.target.value;console.log("style changed",t),U(Object(le.a)(new Set(C.filter((function(e){return e.style==t})).map((function(e){return e.size}))))),_(Object(le.a)(new Set(C.filter((function(e){return e.style==t})).map((function(e){return e.color})))))},te=function(e){console.log(Y.current.value,G.current.value,H.current.value);var t=Y.current.value,n=e.target.value;console.log("size changed",n),_(Object(le.a)(new Set(C.filter((function(e){return e.style==t&&e.size==n})).map((function(e){return e.color})))))};null!=f.shipDate&&(X=new Date(f.shipDate)).setMinutes(X.getMinutes()-X.getTimezoneOffset());var ne=null==f.shipDate?"":X.toISOString().substr(0,16);return console.log("rendering"),r["mr-token"]?h?e.fromPrinting?Object(J.jsx)(Q.a,{to:"/printing"}):Object(J.jsx)(Q.a,{to:"/orders"}):y?Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(J.jsx)(x.a,{variant:"h4",children:"Update"}),Object(J.jsx)(he.a,{variant:"contained",color:"primary",onClick:function(t){e.setMode("none")},children:"Go back"})]}),0!=Z?Object(J.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var n=new FormData(t.target),a={};n.forEach((function(e,t){return a[t]=e})),a.sfmId=a.style+"-"+a.size+"-"+a.color,0!=C.filter((function(e){return e.sfmId==a.sfmId})).length?(""==a.saleDate&&(a.saleDate=null),""==a.shipDate?a.shipDate=null:a.shipDate=new Date(a.shipDate).toJSON(),console.log("sending data"),console.log(a),B.b.updateOrder(r["mr-token"],e.id,a).then((function(t){return 400==t.status&&(console.log(t),p(!1),K=!0),200==t.status&&(p(!0),alert("Saved Successfully"),e.setMode("none")),t.json()})).then((function(e){K&&c(e)})).catch((function(e){console.log("api error"),console.error(e),c({form:"Something went wrong. Please refresh."})}))):c({style:["The style size color combination does not exist"]})},children:[Object(J.jsxs)(ve.a,{children:["Order Id: ",f.orderId," ------ Order No: ",f.orderNo]}),0!=Object.keys(i).length&&Object(J.jsxs)(ve.a,{error:!0,children:["Invalid data ",i.form]}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,select:!0,fullWidth:!0,id:"store",label:"Store Name",name:"store",inputProps:{maxLength:50},helperText:i.store?i.store[0]:"",error:!!i.store,defaultValue:f.store,children:D.map((function(e){return Object(J.jsx)(We.a,{value:e.storeCode,children:e.storeName},e.storeCode)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"orderStatus",label:"Order Status",name:"orderStatus",inputProps:{maxLength:15},helperText:i.orderStatus?i.orderStatus[0]:"",error:!!i.orderStatus,defaultValue:f.orderStatus,children:["Unfulfilled","Processed","Printed","Shipped","Cancelled","On Hold"].map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"saleDate",label:"Sale Date",name:"saleDate",type:"date",helperText:i.saleDate?i.saleDate[0]:"",error:!!i.saleDate,defaultValue:f.saleDate,InputLabelProps:{shrink:!0}}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderNo",label:"Order No",name:"orderNo",inputProps:{maxLength:20},helperText:i.orderNo?i.orderNo[0]:"",error:!!i.orderNo,defaultValue:f.orderNo}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"recipientName",label:"Recipient Name",name:"recipientName",inputProps:{maxLength:50},helperText:i.recipientName?i.recipientName[0]:"",error:!!i.recipientName,defaultValue:f.recipientName}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:Y,id:"style",label:"Style",name:"style",onChange:$,helperText:i.style?i.style[0]:"",error:!!i.style,defaultValue:f.style,children:W.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:G,onChange:te,id:"size",label:"Size",name:"size",helperText:i.size?i.size[0]:"",error:!!i.size,defaultValue:f.size,children:M.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:H,id:"color",label:"Color",name:"color",helperText:i.color?i.color[0]:"",error:!!i.color,defaultValue:f.color,children:q.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"design",label:"design",name:"design",inputProps:{maxLength:50},helperText:i.design?i.design[0]:"",error:!!i.design,defaultValue:f.design}),Object(J.jsxs)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"processing",label:"Processing",name:"processing",inputProps:{maxLength:1},helperText:i.processing?i.processing[0]:"",error:!!i.processing,defaultValue:f.processing,children:[Object(J.jsx)(We.a,{value:"N",children:"No"},0),Object(J.jsx)(We.a,{value:"Y",children:"Yes"},1)]}),Object(J.jsxs)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,select:!0,id:"printed",label:"Printed",name:"printed",inputProps:{maxLength:1},helperText:i.printed?i.printed[0]:"",error:!!i.printed,defaultValue:f.printed,children:[Object(J.jsx)(We.a,{value:"N",children:"No"},0),Object(J.jsx)(We.a,{value:"Y",children:"Yes"},1)]}),Object(J.jsxs)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,select:!0,id:"shipped",label:"Shipped",name:"shipped",inputProps:{maxLength:1},helperText:i.shipped?i.shipped[0]:"",error:!!i.shipped,defaultValue:f.shipped,children:[Object(J.jsx)(We.a,{value:"N",children:"No"},0),Object(J.jsx)(We.a,{value:"Y",children:"Yes"},1)]}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sfmNotes",label:"SFM Notes",name:"sfmNotes",inputProps:{maxLength:5e3},helperText:i.sfmNotes?i.sfmNotes[0]:"",error:!!i.sfmNotes,defaultValue:f.sfmNotes}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"Buyer Name",label:"buyerName",name:"buyerName",inputProps:{maxLength:50},helperText:i.buyerName?i.buyerName[0]:"",error:!!i.buyerName,defaultValue:f.buyerName}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,type:"email",id:"buyerEmail",label:"Buyer Email",name:"buyerEmail",inputProps:{maxLength:50},helperText:i.buyerEmail?i.buyerEmail[0]:"",error:!!i.buyerEmail,defaultValue:f.buyerEmail}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"buyerComments",label:"Buyer Comments",name:"buyerComments",inputProps:{maxLength:5e3},helperText:i.buyerComments?i.buyerComments[0]:"",error:!!i.buyerComments,defaultValue:f.buyerComments}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"giftMessages",label:"Gift Messages",name:"giftMessages",inputProps:{maxLength:5e3},helperText:i.giftMessages?i.giftMessages[0]:"",error:!!i.giftMessages,defaultValue:f.giftMessages}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"sku",label:"SKU",name:"sku",inputProps:{maxLength:20},helperText:i.sku?i.sku[0]:"",error:!!i.sku,defaultValue:f.sku}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"shipDate",label:"shipDate",name:"shipDate",type:"datetime-local",InputLabelProps:{shrink:!0},helperText:i.shipDate?i.shipDate[0]:"",error:!!i.shipDate,defaultValue:ne}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"priorityShip",label:"priorityShip",name:"priorityShip",inputProps:{maxLength:50},helperText:i.priorityShip?i.priorityShip[0]:"",error:!!i.priorityShip,defaultValue:f.priorityShip}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"customerPaidShipping",label:"Customer Paid Shipping $",name:"customerPaidShipping",type:"number",inputProps:{step:.01,min:0,max:99999},helperText:i.customerPaidShipping?i.customerPaidShipping[0]:"",error:!!i.customerPaidShipping,defaultValue:f.customerPaidShipping}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"trackingNumber",label:"Tracking Number",name:"trackingNumber",inputProps:{maxLength:30},helperText:i.trackingNumber?i.trackingNumber[0]:"",error:!!i.trackingNumber,defaultValue:f.trackingNumber}),Object(J.jsx)(he.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]}):Object(J.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var n=new FormData(t.target),a={};n.forEach((function(e,t){return a[t]=e})),a.sfmId=a.style+"-"+a.size+"-"+a.color,0!=C.filter((function(e){return e.sfmId==a.sfmId})).length?(""!=a.shipDate&&(a.shipDate=new Date(a.shipDate).toJSON()),a=Object(d.a)(Object(d.a)({},f),a),console.log(a),B.b.updateOrder(r["mr-token"],e.id,a).then((function(t){return 400==t.status&&(console.log(t),p(!1),K=!0),200==t.status&&(p(!0),alert("Saved Successfully"),e.setMode("none")),t.json()})).then((function(e){K&&c(e)})).catch((function(e){console.log("api error"),console.error(e)}))):c({style:["The style size color combination does not exist"]})},children:[0!=Object.keys(i).length&&Object(J.jsxs)(ve.a,{error:!0,children:["Invalid data ",i.form]}),Object(J.jsxs)(ve.a,{children:["Order Id: ",f.orderId," ------ Order No: ",f.orderNo]}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"saleDate",label:"Sale Date",name:"saleDate",type:"date",helperText:i.saleDate?i.saleDate[0]:"",error:!!i.saleDate,defaultValue:f.saleDate,InputLabelProps:{shrink:!0}}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"orderNo",label:"Order No",name:"orderNo",inputProps:{maxLength:20},helperText:i.orderNo?i.orderNo[0]:"",error:!!i.orderNo,defaultValue:f.orderNo}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"recipientName",label:"Recipient Name",name:"recipientName",inputProps:{maxLength:50},helperText:i.recipientName?i.recipientName[0]:"",error:!!i.recipientName,defaultValue:f.recipientName}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:Y,id:"style",label:"Style",name:"style",onChange:$,helperText:i.style?i.style[0]:"",error:!!i.style,defaultValue:f.style,children:W.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:G,id:"size",label:"Size",name:"size",onChange:te,helperText:i.size?i.size[0]:"",error:!!i.size,defaultValue:f.size,children:M.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,select:!0,inputRef:H,id:"color",label:"Color",name:"color",helperText:i.color?i.color[0]:"",error:!!i.color,defaultValue:f.color,children:q.map((function(e){return Object(J.jsx)(We.a,{value:e,children:e},e)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"design",label:"design",name:"design",helperText:i.design?i.design[0]:"",error:!!i.design,defaultValue:f.design}),Object(J.jsx)(he.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Submit"})]})]}):Object(J.jsx)("div",{children:"Loading"}):Object(J.jsx)(Q.a,{to:"/signin"})}var Be=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Je=Object(p.a)({root:{"& .cold":{backgroundColor:"#b9d5ff91",color:"#1a3e72"},"& .hot":{backgroundColor:"#ff943975",color:"#1a3e72"},"& .compactcell":{padding:"0px 8px"}},searchInput:{marginRight:"4px"}}),He=[{field:"orderId",headerName:"Id",width:60,cellClassName:"compactcell"},{field:"storeName",headerName:"Store Name",width:150,cellClassName:"compactcell",renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})}},{field:"orderStatus",headerName:"Status",cellClassName:"compactcell",width:110},{field:"saleDate",headerName:"Sale Date",cellClassName:"compactcell",type:"date",editable:!0,width:120,valueFormatter:function(e){if(e.value)return function(e){var t=String(e.getDate()).padStart(2,"0");return String(e.getMonth()+1).padStart(2,"0")+"/"+t+"/"+String(e.getFullYear()).substr(2,2)}(new Date(e.value))}},{field:"orderNo",headerName:"Order No",cellClassName:"compactcell",width:150},{field:"orderCount",headerName:"Count",cellClassName:"compactcell",width:60,headerClassName:"compactcell"},{field:"recipientName",headerName:"Recipient Name",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})},cellClassName:"compactcell"},{field:"style",headerName:"Style",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})},cellClassName:"compactcell"},{field:"size",headerName:"Size",width:80,cellClassName:"compactcell"},{field:"color",headerName:"Color",width:110,renderCell:function(e){return Object(J.jsx)(Ne,{limit:10,value:e.value?e.value.toString():"",width:300})},cellClassName:"compactcell"},{field:"design",headerName:"Design",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})},cellClassName:"compactcell"},{field:"productAvailability",headerName:"Product Availability",width:120,cellClassName:"compactcell"},{field:"processing",headerName:"Processing",width:80,cellClassName:"compactcell"},{field:"printed",headerName:"Printed",width:80,cellClassName:"compactcell"},{field:"shipped",headerName:"Shipped",width:90,cellClassName:"compactcell"},{field:"sfmNotes",headerName:"SFM Notes",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:500})},cellClassName:"compactcell"},{field:"buyerName",headerName:"Buyer Name",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})},cellClassName:"compactcell"},{field:"buyerEmail",headerName:"Buyer Email",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:500})},cellClassName:"compactcell"},{field:"buyerComments",headerName:"Buyer Comments",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:500})},cellClassName:"compactcell"},{field:"giftMessages",headerName:"Gift Messages",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})},cellClassName:"compactcell"},{field:"sfmId",headerName:"SFM ID",width:300,renderCell:function(e){return Object(J.jsx)(Ne,{limit:28,value:e.value?e.value.toString():"",width:400})},cellClassName:"compactcell"},{field:"sku",headerName:"SKU",width:200,renderCell:function(e){return Object(J.jsx)(Ne,{limit:19,value:e.value?e.value.toString():"",width:300})},cellClassName:"compactcell"},{field:"shipDate",headerName:"Ship Date",type:"datetime",editable:!0,width:150,cellClassName:"compactcell",valueFormatter:function(e){if(e.value)return function(e){var t=String(e.getDate()).padStart(2,"0");return String(e.getMonth()+1).padStart(2,"0")+"/"+t+"/"+String(e.getFullYear()).substr(2,2)+" "+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")}(new Date(e.value))}},{field:"priorityShip",headerName:"Priority Ship",width:110,editable:!0,cellClassName:"compactcell"},{field:"customerPaidShipping",headerName:"Customer Paid Shipping",width:150,type:"number",cellClassName:"compactcell",editable:!0,valueFormatter:function(e){var t=e.value;return Be.format(Number(t))}},{field:"trackingNumber",headerName:"Tracking Number",width:200,editable:!0,cellClassName:"compactcell"}];var Ke=function(e){var t=Je(),n=Object(u.useState)([]),r=Object(l.a)(n,2),a=r[0],o=r[1],i=Object(u.useState)(""),c=Object(l.a)(i,2),s=c[0],h=c[1],p=Object(ee.a)(["mr-token"]),b=Object(l.a)(p,1)[0],m=Object(u.useState)("none"),f=Object(l.a)(m,2),O=f[0],g=f[1],x=Object(u.useState)(!1),v=Object(l.a)(x,2),S=v[0],w=v[1],k=Object(u.useState)(0),C=Object(l.a)(k,2),N=C[0],T=C[1],P=Object(u.useState)(0),D=Object(l.a)(P,2),I=D[0],z=D[1],L=Object(u.useState)([]),W=Object(l.a)(L,2),F=W[0],E=W[1],A=Object(u.useState)([]),M=Object(l.a)(A,2),U=M[0],V=M[1],R=Object(u.useState)(null),q=Object(l.a)(R,2),_=q[0],Y=q[1],G=Object(u.useState)(!1),H=Object(l.a)(G,2),K=H[0],Z=H[1],X=Object(u.useState)(null),$=Object(l.a)(X,2),te=$[0],ne=$[1],ae=Object(u.useState)(!1),be=Object(l.a)(ae,2),fe=be[0],ge=be[1],ve=Object(u.useState)(""),ye=Object(l.a)(ve,2),Se=ye[0],we=ye[1],ke=Object(u.useState)(!1),Ce=Object(l.a)(ke,2),Ne=Ce[0],Te=Ce[1],Pe=e.usertype,De=j.a.useCallback((function(e){var t=e.id,n=e.field,r=e.props;console.log("cell commit",U,r);var a=r,o=U.map((function(e){var r={};return r[n]=a.value,e.orderId===t?Object(d.a)(Object(d.a)({},e),r):e}));V(o),console.log("cell commit after ",o)}),[U]),Ie=function(e){e.preventDefault();var t=new FormData;if(K&&-1==_.name.search(/order/i))we("Please make sure you have selected orders file. File name should contain the word order");else if(fe&&-1==te.name.search(/ship/i))we("Please make sure you have selected shipping file. File name should contain the word ship");else{var n;if(K)t.append("ordersFile",_),n=B.b.uploadOrdersFile(b["mr-token"],t);else{if(!fe)return void we("Please select a file");t.append("shippingFile",te),n=B.b.uploadShippingFile(b["mr-token"],t)}n.then((function(e){return e.json()})).then((function(e){e.errors?0==e.errors.length?(we(e.msg),console.log(e.msg)):(we(e.msg+" (see error records in admin panel logs, or in console (hit Ctrl+Shift+i)"),console.log("Following rows were not imported: "),console.log(e.errors)):we("Failed import due to unknown reason"),Z(!1),Y(null),ge(!1),ne(null),Fe(),g("none")})).catch((function(e){console.error("Error:",e),Z(!1),Y(null),ge(!1),ne(null),we("Failed import due to unknown reasons")}))}},ze=function(e){g("add")},Le=function(e){g("update")},We=function(e){w(!1)};function Fe(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&0!=I?z(0):(console.log("fetching details"),e=s?new URLSearchParams({page:I+1,search:s}):new URLSearchParams({page:I+1}),Te(!0),B.b.getOrderList(b["mr-token"],e).then((function(e){if(200==e.status)return e.json();throw 401==e.status&&re.handleUnauthorized(),"Something went wrong"})).then((function(e){e.results?(N!=e.count&&z(0),console.log("setting count",e.count),T(e.count),e.results.forEach((function(e,t){return e.id=e.orderId})),o(e.results)):(console.error("error getting data"),console.error(e.detail),console.log("setting count",e.count),z(0),T(0),o([])),Te(!1)})).catch((function(e){console.log("api error"),console.error(e),Te(!1)})))}return Object(u.useEffect)((function(){e.setTitle("Orders"),"none"==O&&(E([]),V([]),console.log("inside useeffect"),Fe())}),[O,b,I]),b["mr-token"]?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[""==Se?"":Object(J.jsx)("div",{style:{color:"red"},children:Se}),"none"==O?Object(J.jsxs)("div",{children:[0==Pe&&Object(J.jsxs)("div",{children:[Object(J.jsx)(y.a,{color:"primary",variant:"contained",onClick:ze,children:Object(J.jsx)(me.a,{})}),Object(J.jsx)(y.a,{color:"primary",variant:"contained",disabled:1!=F.length||"N"!=U[0].shipped&&"N"!=U[0].printed&&"N"!=U[0].processing,onClick:Le,children:Object(J.jsx)(Oe.a,{})})]}),0!=Pe&&Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",flexDirection:"row"},children:[Object(J.jsx)(y.a,{style:{width:"60px"},color:"primary",variant:"contained",onClick:ze,children:Object(J.jsx)(me.a,{})}),Object(J.jsx)(y.a,{color:"primary",variant:"contained",disabled:1!=F.length,onClick:Le,children:Object(J.jsx)(Oe.a,{})}),Object(J.jsxs)("div",{children:[Object(J.jsx)(y.a,{variant:"outlined",color:"secondary",disabled:!(F.length>0),onClick:function(e){w(!0)},children:Object(J.jsx)(xe.a,{})}),Object(J.jsxs)(de.a,{open:S,onClose:We,children:[Object(J.jsxs)(ue.a,{id:"alert-dialog-title",children:['"Are you sure you want to delete the ',F.length,' items"']}),Object(J.jsxs)(je.a,{children:[Object(J.jsx)(he.a,{onClick:We,color:"primary",children:"Cancel"}),Object(J.jsx)(he.a,{onClick:function(e){console.log("u confirmed delete");var t=[],n=function(){var e=Object(ce.a)(oe.a.mark((function e(){var n,r,a,o;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(ie.a)(F),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=23;break}return a=r.value,e.prev=5,e.next=8,B.b.deleteOrder(b["mr-token"],a);case 8:if(200!=(o=e.sent).status&&204!=o.status){e.next=13;break}console.log("deleted order with id ".concat(a)),e.next=15;break;case 13:throw console.log("Failed to delete order with id ".concat(a)),"Failed to delete order with id ".concat(a);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("could not delete order id ".concat(a),e.t0),t.push("could not delete order id ".concat(a));case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),n.e(e.t1);case 28:return e.prev=28,n.f(),e.finish(28);case 31:t.length>0?we("Some rows were not deleted\n"+t.toString()+" Please refresh"):we("Deleted successfully. Please refresh");case 32:case"end":return e.stop()}}),e,null,[[1,25,28,31],[5,17]])})));return function(){return e.apply(this,arguments)}}();w(!1),n()},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]}),Object(J.jsx)(he.a,{variant:"contained",color:"primary",disabled:!(U.length>0),onClick:function(e){function t(){return(t=Object(ce.a)(oe.a.mark((function e(){var t,n,r,a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=Object(ie.a)(U),e.prev=2,a=oe.a.mark((function e(){var n,a,o,i,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.value,e.prev=1,a=function(){var e=Object(ce.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.b.updateOrder(b["mr-token"],n.orderId,n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=5,a();case 5:if(200!=(o=e.sent).status){e.next=10;break}console.log("updated order with id ".concat(n.orderId)),e.next=20;break;case 10:if(400!=o.status){e.next=19;break}return console.log("Invalid Update for order with id ".concat(n.orderId)),e.next=14,o.json();case 14:i=e.sent,c=n.orderId,t.push({orderId:c,result:i}),e.next=20;break;case 19:throw"server error";case 20:e.next=27;break;case 22:e.prev=22,e.t0=e.catch(1),console.log("Something went wrong for order id ".concat(n.orderId)),console.error(e.t0),t.push("Something went wrong for order id ".concat(n.orderId));case 27:case"end":return e.stop()}}),e,null,[[1,22]])})),n.s();case 5:if((r=n.n()).done){e.next=9;break}return e.delegateYield(a(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),n.e(e.t1);case 14:return e.prev=14,n.f(),e.finish(14);case 17:t.length>0?we("Some rows were not updated\n"+JSON.stringify(t)):we("Updated successfully");case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}console.log("updating the orders",U),function(){t.apply(this,arguments)}()},children:"Mass Update"}),Object(J.jsxs)("form",{children:[Object(J.jsx)("input",{type:"file",name:"myfile",id:"myfile",onChange:function(e){console.log(e),1==e.target.files.length?(Y(e.target.files[0]),console.log("order file is: ",e.target.files[0]),e.target.labels[0].textContent=e.target.files[0].name,Z(!0)):(Y(null),Z(!1))},hidden:!0}),Object(J.jsx)("label",{htmlFor:"myfile",className:"file-input-label",children:"Choose File"}),Object(J.jsx)(he.a,{type:"submit",disabled:!K,onClick:Ie,color:"primary",variant:"contained",children:"Import Orders"})]}),Object(J.jsxs)("form",{children:[Object(J.jsx)("input",{type:"file",name:"myShippingfile",id:"myShippingfile",onChange:function(e){1==e.target.files.length?(ne(e.target.files[0]),console.log("ship file is: ",e.target.files[0]),e.target.labels[0].textContent=e.target.files[0].name,ge(!0)):(ne(null),ge(!1))},hidden:!0}),Object(J.jsx)("label",{htmlFor:"myShippingfile",className:"file-input-label",children:"Choose File"}),Object(J.jsx)(he.a,{type:"submit",disabled:!fe,onClick:Ie,color:"primary",variant:"contained",children:"Import Shipping Info"})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)(pe.a,{variant:"outlined",size:"small",margin:"none",type:"text",value:s,className:t.searchInput,text:"Search",onChange:function(e){return h(e.target.value)},onKeyPress:function(e){return"Enter"==e.key&&Fe(!0)}}),Object(J.jsx)(he.a,{color:"primary",variant:"contained",onClick:function(e){return Fe(!0)},children:"Search"})]})]}),Object(J.jsx)("div",{style:{width:"100%",padding:"5px",height:"calc(100vh - 110px)",minWidth:"600px"},className:t.root,children:Object(J.jsx)(se.a,{rows:a,columns:He,loading:Ne,checkboxSelection:!0,components:{Toolbar:se.b},density:"compact",disableSelectionOnClick:!0,onSelectionModelChange:function(e){console.log(e),E(e.selectionModel)},onRowSelected:function(e){console.log(e);var t=Object(le.a)(e.api.current.getSelectedRows().values());console.log("selected rows ere : ",t),V(t)},onEditCellChangeCommitted:De,disableColumnMenu:!0,pagination:!0,page:I,pageSize:50,rowsPerPageOptions:[],rowCount:N,paginationMode:"server",onPageChange:function(e){z(e.page)},getRowClassName:function(e){if("Short"==e.row.productAvailability||"Out Of Stock"==e.row.productAvailability)return"hot"}})})]}):"add"==O?Object(J.jsx)(_e,{mode:O,setMode:g,usertype:Pe}):Object(J.jsx)(Ge,{id:F[0],mode:O,setMode:g,usertype:Pe})]}):Object(J.jsx)(Q.a,{to:"/signin"})},Ze=n(263),Xe=n(279),$e=n(167),Qe=n.n($e),et=n(265),tt=n(268),nt=n(259),rt=n(264),at=n(266),ot=n(267),it=Object(p.a)({table:{minWidth:700},headcell:{fontWeight:"bold",fontSize:"1rem",padding:"6px"},headcellCentered:{fontWeight:"bold",fontSize:"1rem",padding:"6px",textAlign:"center"},redbtn:{color:"white",background:"red"},greenbtn:{color:"white",background:"green"},tablecell:{padding:"6px"},searchInput:{marginRight:"4px"},tablecellCentered:{padding:"6px",textAlign:"center"}});var ct=function(e){var t=it(),n=Object(u.useState)([]),r=Object(l.a)(n,2),a=r[0],o=r[1],i=Object(u.useState)([]),c=Object(l.a)(i,2),s=c[0],j=c[1],h=Object(ee.a)(["mr-token"]),p=Object(l.a)(h,1)[0],b=Object(u.useState)("none"),m=Object(l.a)(b,2),f=m[0],O=m[1],g=Object(u.useState)(!1),x=Object(l.a)(g,2),v=x[0],S=x[1],w=Object(u.useState)(!1),k=Object(l.a)(w,2),C=k[0],N=k[1],T=Object(u.useState)(""),P=Object(l.a)(T,2),D=P[0],I=P[1],z=Object(u.useState)(null),L=Object(l.a)(z,2),W=L[0],F=L[1],E=Object(u.useState)(""),A=Object(l.a)(E,2),M=A[0],U=A[1],V=Object(u.useState)([]),R=Object(l.a)(V,2),q=R[0],_=R[1],Y=Object(u.useState)(!1),G=Object(l.a)(Y,2),H=G[0],K=G[1],Z=Object(u.useState)(""),X=Object(l.a)(Z,2),$=X[0],Q=X[1],te=function(e){var t=parseInt(e.target.dataset.oid);console.log(t),console.log(e.target.checked);var n=[];if(e.target.checked)n=[].concat(Object(le.a)(q),[t]);else{var r=q.indexOf(t);r>-1&&q.splice(r,1),n=Object(le.a)(q)}console.log(n),_(n)},ne=function(e){console.log(e.currentTarget,e.currentTarget.dataset.oid);var t=parseInt(e.currentTarget.dataset.oid),n=String(e.currentTarget.dataset.btype),r=a.find((function(e){return e.orderId==t})),i={};if(console.log(n),"processing"==n){var c="Y"==r.processing?"N":"Y";console.log(c),i=Object(d.a)(Object(d.a)({},r),{},{processing:c})}if("printed"==n){var l="Y"==r.printed?"N":"Y";console.log(l),i=Object(d.a)(Object(d.a)({},r),{},{printed:l})}if("shipped"==n){var s="Y"==r.shipped?"N":"Y";console.log(s),i=Object(d.a)(Object(d.a)({},r),{},{shipped:s})}B.b.updateOrder(p["mr-token"],t,i).then((function(e){if(200==e.status)return e.json();throw"Something went wrong"})).then((function(e){var t=a.map((function(t){return t.orderId==e.orderId?e:t}));Q("updated order"),console.log(t.map((function(e){return e.orderId}))),o(t)})).catch((function(e){console.log("api error"),console.error(e),Q("Something went wrong")}))},ae=function(e){S(!1)},se=function(e){N(!1)},be=function(e){var t=parseInt(e.currentTarget.dataset.oid);F(t);var n=a.find((function(e){return e.orderId==t}));I(n.sfmNotes),N(!0)};Object(u.useEffect)((function(){console.log("cookies"),e.setTitle("Printing"),"none"==f&&(K(!0),_([]),B.b.getPrintingList(p["mr-token"]).then((function(e){if(200==e.status)return e.json();throw 401==e.status&&re.handleUnauthorized(),"Something went wrong"})).then((function(e){var t=e;console.log("fetching orders"),t.forEach((function(e,t){return e.id=e.orderId}));var n=[{prop:"storeName",direction:1},{prop:"recipientName",direction:1},{prop:"orderNo",direction:1},{prop:"orderStatus",direction:1}];t.sort((function(e,t){for(var r=0,a=0;r<n.length&&0===a;)a=n[r].direction*(e[n[r].prop].toString()<t[n[r].prop].toString()?-1:e[n[r].prop].toString()>t[n[r].prop].toString()?1:0),r++;return a})),console.log(t.map((function(e){return e.orderId}))),o(t),K(!1)})).catch((function(e){console.log("api error"),console.error(e),K(!1)})))}),[f,p]),Object(u.useEffect)((function(){fe(M)}),[a]);var fe=function(e){var t=Object(le.a)(a);""!=e&&(t=t.filter((function(t){var n=e.toLowerCase();return t.displayStatus.toLowerCase().search(n)>=0||t.style.toLowerCase().search(n)>=0||t.orderNo.toLowerCase().search(n)>=0||t.storeName.toLowerCase().search(n)>=0||t.recipientName.toLowerCase().search(n)>=0||t.design.toLowerCase().search(n)>=0||t.size.toLowerCase().search(n)>=0||t.color.toLowerCase().search(n)>=0||t.productAvailability.toLowerCase().search(n)>=0}))),_([]),j(t)},ge=0;return Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(J.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:Object(J.jsx)("div",{})}),""!=$&&Object(J.jsx)("div",{style:{color:"red"},children:$}),"none"==f?Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",flexDirection:"row"},children:[Object(J.jsxs)("div",{children:[Object(J.jsx)(y.a,{color:"primary",variant:"contained",onClick:function(e){O("add")},children:Object(J.jsx)(me.a,{})}),Object(J.jsx)(y.a,{variant:"contained",color:"primary",disabled:1!=q.length,onClick:function(e){O("update")},children:Object(J.jsx)(Oe.a,{})}),Object(J.jsx)(y.a,{variant:"contained",color:"secondary",disabled:!(q.length>0),onClick:function(e){S(!0)},children:Object(J.jsx)(xe.a,{})}),Object(J.jsxs)(de.a,{open:v,onClose:ae,children:[Object(J.jsxs)(ue.a,{children:['"Are you sure you want to delete the ',q.length,' items"']}),Object(J.jsxs)(je.a,{children:[Object(J.jsx)(he.a,{onClick:ae,color:"primary",children:"Cancel"}),Object(J.jsx)(he.a,{onClick:function(e){console.log("u confirmed delete");var t=[],n=function(){var e=Object(ce.a)(oe.a.mark((function e(){var n,r,a,o;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(ie.a)(q),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=23;break}return a=r.value,e.prev=5,e.next=8,B.b.deleteOrder(p["mr-token"],a);case 8:if(200!=(o=e.sent).status&&204!=o.status){e.next=13;break}console.log("deleted order with id ".concat(a)),e.next=15;break;case 13:throw console.log("Failed to delete order with id ".concat(a)),"Failed to delete order with id ".concat(a);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.error("could not delete order id ".concat(a),e.t0),t.push("could not delete order id ".concat(a));case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),n.e(e.t1);case 28:return e.prev=28,n.f(),e.finish(28);case 31:t.length>0?Q("Some rows were not deleted\n"+t.toString()+" Pleae refresh"):Q("Deleted successfully. Please refresh");case 32:case"end":return e.stop()}}),e,null,[[1,25,28,31],[5,17]])})));return function(){return e.apply(this,arguments)}}();S(!1),n()},color:"primary",autoFocus:!0,children:"Confirm"})]})]}),Object(J.jsxs)(de.a,{open:C,maxWidth:"lg",fullWidth:!0,onClose:se,children:[Object(J.jsx)(ue.a,{children:"Notes"}),Object(J.jsx)(Ze.a,{children:Object(J.jsx)(pe.a,{multiline:!0,value:D,text:"Notes",variant:"outlined",rows:4,fullWidth:!0,onChange:function(e){return I(e.target.value)}})}),Object(J.jsxs)(je.a,{children:[Object(J.jsx)(he.a,{onClick:se,color:"primary",children:"Cancel"}),Object(J.jsx)(he.a,{onClick:function(e){var t=W,n=a.find((function(e){return e.orderId==t})),r=D,i=Object(d.a)(Object(d.a)({},n),{},{sfmNotes:r});B.b.updateOrder(p["mr-token"],t,i).then((function(e){if(200==e.status)return e.json();throw"Something went wrong"})).then((function(e){var t=a.map((function(t){return t.orderId==e.orderId?e:t}));Q("updated Order"),o(t)})).catch((function(e){console.log("api error"),console.error(e),Q("Something went wrong")})),N(!1)},color:"primary",autoFocus:!0,children:"Save"})]})]})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)(pe.a,{variant:"outlined",size:"small",margin:"none",type:"text",value:M,text:"Search",className:t.searchInput,onChange:function(e){return U(e.target.value)},onKeyPress:function(e){return"Enter"==e.key&&fe(e.target.value)}}),Object(J.jsx)(he.a,{color:"primary",variant:"contained",onClick:function(e){return fe(M)},children:"Search"})]})]}),H?Object(J.jsx)("h2",{children:"Loading...  Please wait"}):Object(J.jsx)(rt.a,{component:we.a,style:{height:"calc(100vh - 140px)"},children:Object(J.jsxs)(et.a,{className:t.table,size:"small","aria-label":"spanning table",children:[Object(J.jsx)(at.a,{children:Object(J.jsxs)(ot.a,{children:[Object(J.jsx)(nt.a,{className:t.tablecell,children:Object(J.jsx)(Xe.a,{disabled:!0})}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Status"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Shop"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Recipient/Order/#"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Style"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Size"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Color"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Design"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Msg"}),Object(J.jsx)(nt.a,{className:t.headcellCentered,children:"Processed"}),Object(J.jsx)(nt.a,{className:t.headcellCentered,children:"Printed"}),Object(J.jsx)(nt.a,{className:t.headcellCentered,children:"Shipped"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Product Availability"}),Object(J.jsx)(nt.a,{className:t.headcell,children:"Notes"})]})}),Object(J.jsx)(tt.a,{children:s.map((function(e,n,r){var a=!1;if(n==ge){a=!0;for(var o=n+1;o<r.length;o++)if(e.orderNo!=r[o].orderNo||e.storeName!=r[o].storeName||e.recipientName!=r[o].recipientName){ge=o;break}}return Object(J.jsxs)(ot.a,{children:[Object(J.jsx)(nt.a,{className:t.tablecell,style:ge!=n+1?{borderBottomColor:"white"}:{},children:Object(J.jsx)(Xe.a,{inputProps:{"data-oid":e.orderId},onChange:te})}),Object(J.jsx)(nt.a,{style:ge!=n+1?{whiteSpace:"nowrap",borderBottomColor:"white"}:{whiteSpace:"nowrap"},className:t.tablecell,children:e.displayStatus}),a&&Object(J.jsx)(nt.a,{style:{whiteSpace:"nowrap"},rowSpan:ge-n,className:t.tablecell,children:e.storeName}),a&&Object(J.jsxs)(nt.a,{style:{whiteSpace:"nowrap"},rowSpan:ge-n,className:t.tablecell,children:[Object(J.jsx)("div",{children:e.recipientName}),Object(J.jsx)("div",{children:e.orderNo}),Object(J.jsx)("div",{children:e.orderCount})]}),Object(J.jsx)(nt.a,{style:{whiteSpace:"nowrap"},className:t.tablecell,children:e.style}),Object(J.jsx)(nt.a,{style:{whiteSpace:"nowrap"},className:t.tablecell,children:e.size}),Object(J.jsx)(nt.a,{style:{whiteSpace:"nowrap"},className:t.tablecell,children:e.color}),Object(J.jsx)(nt.a,{style:{whiteSpace:"nowrap"},className:t.tablecell,children:e.design}),Object(J.jsx)(nt.a,{style:{maxWidth:"50px"},className:t.tablecell,children:e.giftMessages&&Object(J.jsx)(Qe.a,{})}),Object(J.jsx)(nt.a,{className:t.tablecellCentered,children:Object(J.jsx)(he.a,{onClick:ne,"data-oid":e.orderId,"data-btype":"processing",className:"Y"==e.processing?t.greenbtn:t.redbtn,variant:"contained",children:e.processing})}),Object(J.jsx)(nt.a,{className:t.tablecellCentered,children:Object(J.jsx)(he.a,{onClick:ne,"data-oid":e.orderId,"data-btype":"printed",className:"Y"==e.printed?t.greenbtn:t.redbtn,variant:"contained",children:e.printed})}),Object(J.jsx)(nt.a,{className:t.tablecellCentered,children:Object(J.jsx)(he.a,{onClick:ne,"data-oid":e.orderId,"data-btype":"shipped",className:"Y"==e.shipped?t.greenbtn:t.redbtn,variant:"contained",children:e.shipped})}),Object(J.jsx)(nt.a,{className:t.tablecell,children:e.productAvailability}),Object(J.jsx)(nt.a,{className:t.tablecell,style:{maxWidth:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.sfmNotes?Object(J.jsx)(he.a,{onClick:be,"data-oid":e.orderId,children:e.sfmNotes.substring(0,13)+"..."}):Object(J.jsx)(y.a,{color:"primary",variant:"contained",onClick:be,"data-oid":e.orderId,children:Object(J.jsx)(me.a,{})})})]},e.orderId)}))})]})})]}):"add"==f?Object(J.jsx)(_e,{mode:f,setMode:O,fromPrinting:!0}):Object(J.jsx)(Ge,{id:q[0],mode:f,setMode:O,fromPrinting:!0})]})};var lt=function(e){var t=Object(ee.a)(["mr-token"]),n=Object(l.a)(t,1)[0],r=e.usertype,a=Object(u.useState)(""),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Object(u.useState)(!0),d=Object(l.a)(s,2),j=d[0],h=d[1],p=Object(u.useState)([]),b=Object(l.a)(p,2),m=b[0],f=b[1],O=Object(u.useState)([]),g=Object(l.a)(O,2),v=g[0],y=g[1],S=Object(u.useState)("All"),w=Object(l.a)(S,2),k=w[0],C=w[1],N=Object(u.useState)(function(){var e=new Date;e.setDate(e.getDate()-30);var t=e.getTimezoneOffset();return new Date(e.getTime()-60*t*1e3).toISOString().split("T")[0]}()),T=Object(l.a)(N,2),P=T[0],D=T[1],I=Object(u.useState)(""),z=Object(l.a)(I,2),L=z[0],W=z[1],F=Object(u.useState)({}),E=Object(l.a)(F,2),A=E[0],M=E[1];Object(u.useEffect)((function(){Object(ce.a)(oe.a.mark((function t(){var a,o,i;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setTitle("Dashboard"),t.prev=1,t.next=4,B.b.getStoreList(n["mr-token"]);case 4:if(200!=(a=t.sent).status){t.next=18;break}return t.next=8,a.json();case 8:if(0!=(o=t.sent).length){t.next=13;break}throw"No stores available";case 13:o.unshift({storeName:"All",storeCode:"All"});case 14:f(o),U(k,P,L),t.next=23;break;case 18:if(401!=a.status){t.next=22;break}re.handleUnauthorized(),t.next=23;break;case 22:throw"Something went wrong";case 23:t.next=30;break;case 25:t.prev=25,t.t0=t.catch(1),console.log("api error"),console.error(t.t0),c("Something went wrong. Please refresh");case 30:if(1!=r){t.next=56;break}return t.prev=31,t.next=34,B.b.getInventoryList(n["mr-token"]);case 34:if(i=t.sent,console.log("fetch inventory list status",i.status),200!=i.status){t.next=44;break}return t.t1=y,t.next=40,i.json();case 40:t.t2=t.sent,(0,t.t1)(t.t2),t.next=49;break;case 44:if(401!=i.status){t.next=48;break}re.handleUnauthorized(),t.next=49;break;case 48:throw"Something went wrong";case 49:t.next=56;break;case 51:t.prev=51,t.t3=t.catch(31),console.log("api error"),console.error(t.t3),c("Something went wrong. Please refresh");case 56:h(!1);case 57:case"end":return t.stop()}}),t,null,[[1,25],[31,51]])})))()}),[]);var U=function(e,t,r){if(console.log(e),""!=e){var a={store:e,startDate:t,endDate:r};B.b.getOverview(n["mr-token"],a).then((function(e){if(200==e.status)return e.json();throw"Something went wrong. Please make sure store is selected."})).then((function(e){M(e)})).catch((function(e){console.log(e),c(String(e))}))}else c("Please choose a store")};return n["mr-token"]?j?Object(J.jsx)("div",{children:"Loading. Please wait"}):Object(J.jsxs)("div",{children:[i&&Object(J.jsx)("h3",{style:{color:"red"},children:i}),Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-around",alignItems:"center"},children:[Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,select:!0,style:{minWidth:"250px"},label:"Store",name:"store",value:k,onChange:function(e){console.log(e.target.value),C(e.target.value)},children:m.map((function(e){return Object(J.jsx)(We.a,{value:e.storeCode,children:e.storeName},e.storeCode)}))}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",label:"Start Date",name:"startDate",type:"date",value:P,onChange:function(e){return D(e.target.value)},InputLabelProps:{shrink:!0}}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",label:"End Date",name:"endtDate",type:"date",value:L,onChange:function(e){return W(e.target.value)},InputLabelProps:{shrink:!0}}),Object(J.jsx)(he.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),console.log(P,L),console.log(k,typeof P),U(k,P,L)},children:"Submit"})]}),Object(J.jsxs)(we.a,{style:{padding:"10px",margin:"5px",marginTop:"15px"},children:[Object(J.jsx)(x.a,{variant:"h4",children:Object(J.jsx)("strong",{children:"Orders Summary"})}),Object(J.jsxs)(x.a,{children:[Object(J.jsx)("strong",{children:"Total Orders \xa0\xa0\xa0\xa0\xa0: "}),A.total]}),Object(J.jsxs)(x.a,{children:[Object(J.jsx)("strong",{children:"Fulfilled \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: "}),A.fulfilled]}),Object(J.jsxs)(x.a,{children:[Object(J.jsx)("strong",{children:"Unfulfilled \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: "}),A.unfulfilled]}),Object(J.jsxs)(x.a,{children:[Object(J.jsx)("strong",{children:"OnHold \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: "}),A.onhold]}),Object(J.jsxs)(x.a,{children:[Object(J.jsx)("strong",{children:"Out Of Stock \xa0\xa0\xa0\xa0: "}),A.outofstock]})]}),1==r&&Object(J.jsxs)("div",{children:[Object(J.jsxs)(we.a,{style:{padding:"10px",margin:"5px",marginTop:"15px"},children:[Object(J.jsx)(x.a,{variant:"h4",children:Object(J.jsx)("strong",{children:"General"})}),Object(J.jsxs)(x.a,{children:[Object(J.jsx)("strong",{children:"Products \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: "}),v.length>0&&Object(le.a)(new Set(v.map((function(e){return e.style})))).length]}),Object(J.jsxs)(x.a,{children:[Object(J.jsx)("strong",{children:"Store Count \xa0\xa0\xa0\xa0\xa0: "}),m.length]})]}),Object(J.jsxs)(we.a,{style:{padding:"10px",margin:"5px",marginTop:"15px"},children:[Object(J.jsx)(x.a,{variant:"h4",children:Object(J.jsx)("strong",{children:"Inventory Needs"})}),Object(J.jsx)("table",{style:{padding:"20px"},children:Object(J.jsx)("tbody",{children:v.length>0&&v.filter((function(e){return e.needToPurchase>0})).map((function(e){return Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:Object(J.jsxs)("strong",{children:[e.style," - ",e.size," - ",e.color," "]})}),Object(J.jsxs)("td",{children:[Object(J.jsx)("strong",{children:": "}),e.needToPurchase]})]},e.sfmId)}))})})]})]})]}):Object(J.jsx)(Q.a,{to:"/signin"})};function st(e){var t=Object(ee.a)(["mr-token"]),n=Object(l.a)(t,1)[0],r=Object(ee.a)(["mr-user"]),a=Object(l.a)(r,2),o=a[0],i=(a[1],Object(u.useState)("")),c=Object(l.a)(i,2),s=c[0],d=c[1],j=Object(u.useState)(""),h=Object(l.a)(j,2),p=h[0],b=h[1],m=Object(u.useState)(""),f=Object(l.a)(m,2),O=f[0],g=f[1],x=Object(u.useState)(""),v=Object(l.a)(x,2),y=v[0],S=v[1],w=Object(u.useState)(""),k=Object(l.a)(w,2),C=k[0],N=k[1],T=Object(u.useState)(""),P=Object(l.a)(T,2),D=P[0],I=P[1],z=Object(u.useState)(""),L=Object(l.a)(z,2),W=L[0],F=L[1],E=Object(u.useState)(!1),A=Object(l.a)(E,2),M=A[0],U=A[1],V=Object(u.useState)(""),R=Object(l.a)(V,2),q=R[0],_=R[1],Y=Object(u.useState)({}),G=Object(l.a)(Y,2),H=G[0],K=G[1],Z=parseInt(o["mr-user"].split("-")[0]);Object(u.useEffect)((function(){Object(ce.a)(oe.a.mark((function t(){var r,a;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setTitle("My Account"),t.prev=1,t.next=4,B.b.getAccountDetails(n["mr-token"],Z);case 4:if(200!=(r=t.sent).status){t.next=16;break}return t.next=8,r.json();case 8:a=t.sent,console.log("got data",a),d(a.username),b(a.email),F(a.last_name),I(a.first_name),t.next=21;break;case 16:if(401!=r.status){t.next=20;break}re.handleUnauthorized(),t.next=21;break;case 20:throw"Something went wrong";case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(1),console.log("api error"),console.log("ee",t.t0);case 27:case"end":return t.stop()}}),t,null,[[1,23]])})))()}),[]);var X=function(){var e=Object(ce.a)(oe.a.mark((function e(t){var r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.b.updateProfile(n["mr-token"],Z,{email:p,first_name:D,last_name:W});case 3:if(200==(r=e.sent).status&&(K(""),_("Updated Successfully")),400!=r.status){e.next=13;break}return console.log("dddd"),_("Invalid Data"),e.t0=K,e.next=11,r.json();case 11:e.t1=e.sent,(0,e.t0)(e.t1);case 13:e.next=20;break;case 15:e.prev=15,e.t2=e.catch(0),_("Something went wrong"),console.log("api error"),console.error(e.t2);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(ce.a)(oe.a.mark((function e(t){var r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.b.changePassword(n["mr-token"],Z,{password:y,password2:C,old_password:O});case 3:200==(r=e.sent).status&&(K(""),_("Password Changed Successfully")),400==r.status&&(_("Invalid Data"),K(r.json())),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),_("Something went wrong"),console.log("api error"),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return n["mr-token"]?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(J.jsx)("div",{children:!1===M?Object(J.jsx)(he.a,{variant:"contained",color:"secondary",onClick:function(e){return U(!0)},children:"Change Password"}):Object(J.jsx)(he.a,{variant:"contained",color:"primary",onClick:function(e){return U(!1)},children:"Back"})}),q&&Object(J.jsx)("h3",{style:{color:"red"},children:q}),0==M?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",disabled:!0,id:"username",label:"Username",name:"username",value:s,inputProps:{maxLength:20},helperText:H.username?H.orderNo[0]:"",error:!!H.username}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,id:"email",label:"Email",name:"email",value:p,onChange:function(e){return b(e.target.value)},inputProps:{maxLength:50},helperText:H.email?H.email[0]:"",error:!!H.email}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,id:"first_name",label:"First Name",name:"first_name",value:D,onChange:function(e){return I(e.target.value)},inputProps:{maxLength:20},helperText:H.first_name?H.first_name[0]:"",error:!!H.first_name}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,id:"last_name",label:"Last Name",name:"last_name",value:W,onChange:function(e){return F(e.target.value)},inputProps:{maxLength:20},helperText:H.last_name?H.last_name[0]:"",error:!!H.last_name}),Object(J.jsx)(he.a,{variant:"contained",color:"primary",onClick:X,children:"Save Changes"})]}):Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,id:"old_password",label:"old_password",name:"old_password",type:"password",value:O,onChange:function(e){return g(e.target.value)},inputProps:{maxLength:20},helperText:H.old_password?H.old_password[0]:"",error:!!H.old_password}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,id:"password",label:"password",name:"password",type:"password",value:y,onChange:function(e){return S(e.target.value)},inputProps:{maxLength:20},helperText:H.password?H.password[0]:"",error:!!H.password}),Object(J.jsx)(pe.a,{variant:"outlined",margin:"normal",required:!0,id:"password2",label:"password2",name:"password2",type:"password",value:C,onChange:function(e){return N(e.target.value)},inputProps:{maxLength:20},helperText:H.password2?H.password2[0]:"",error:!!H.password2}),Object(J.jsx)(he.a,{variant:"contained",color:"primary",onClick:$,children:"Confirm"})]})]}):Object(J.jsx)(Q.a,{to:"/signin"})}var dt=n(218),ut=n(168),jt=n.n(ut),ht=function(e){var t=String(e.getDate()).padStart(2,"0");return String(e.getMonth()+1).padStart(2,"0")+"/"+t+"/"+String(e.getFullYear()).substr(2,2)},pt=Object(p.a)({root:{"& .compactcell":{padding:"0px 8px"}},redcolor:{background:"red",color:"white"},greencolor:{background:"green",color:"white"},inputbtn:{display:"none"},searchInput:{marginRight:"4px"}});function bt(e){var t,n,r=pt(),a=Object(u.useState)([]),o=Object(l.a)(a,2),i=o[0],c=o[1],j=Object(ee.a)(["mr-token"]),h=Object(l.a)(j,1)[0],p=Object(u.useState)(""),b=Object(l.a)(p,2),m=b[0],f=b[1],O=Object(u.useState)(""),g=Object(l.a)(O,2),x=g[0],v=g[1],S=Object(u.useState)(0),w=Object(l.a)(S,2),k=w[0],C=w[1],N=Object(u.useState)(0),T=Object(l.a)(N,2),P=T[0],D=T[1],I=Object(u.useState)(!1),z=Object(l.a)(I,2),L=z[0],W=z[1],F=Object(u.useState)(""),E=Object(l.a)(F,2),A=E[0],M=E[1],U=Object(u.useState)(null),V=Object(l.a)(U,2),R=V[0],q=V[1],_=Object(u.useState)(function(){var e=new Date;e.setDate(e.getDate()-e.getDay()-7);var t=e.getTimezoneOffset();return new Date(e.getTime()-60*t*1e3).toISOString().split("T")[0]}()),Y=Object(l.a)(_,2),G=Y[0],H=Y[1],K=Object(u.useState)(function(){var e=new Date;e.setDate(e.getDate()-e.getDay()-1);var t=e.getTimezoneOffset();return new Date(e.getTime()-60*t*1e3).toISOString().split("T")[0]}()),Z=Object(l.a)(K,2),X=Z[0],$=Z[1],te=Object(u.useState)(!1),ne=Object(l.a)(te,2),ae=ne[0],ie=ne[1],le=e.usertype,be=[{field:"id",headerName:"Id",width:100,hide:!0},{field:"attachment",headerName:"View Invoice",width:110,renderCell:function(e){return Object(J.jsx)(dt.a,{size:"small",href:e.value,target:"_blank",rel:"noopener noreferrer",children:"Open"})}},{field:"startDate",headerName:"Start Date",width:110,valueFormatter:function(e){if(e.value)return ht(new Date(e.value))}},{field:"endDate",headerName:"End Date",width:110,valueFormatter:function(e){if(e.value)return ht(new Date(e.value))}},{field:"storeName",headerName:"Store",width:150,renderCell:function(e){return Object(J.jsx)(Ne,{limit:14,value:e.value?e.value.toString():"",width:300})}},{field:"invoiceNo",headerName:"Invoice Number",width:200},{field:"status",headerName:"Status",width:110,renderCell:function(e){return Object(J.jsx)(he.a,{variant:"contained",className:"Paid"==e.value?r.greencolor:r.redcolor,size:"small","data-pid":e.id,onClick:fe,children:e.value})}},{field:"total",headerName:"Total",width:110},{field:"notes",headerName:"Notes",width:200,renderCell:function(e){return e.value?Object(J.jsx)(he.a,{onClick:ve,"data-oid":e.id,children:e.value.substring(0,14)+"..."}):Object(J.jsx)(y.a,{color:"primary",variant:"contained",onClick:ve,"data-oid":e.id,children:Object(J.jsx)(me.a,{})})}},{field:"uploadbtn",headerName:"Upload Attachment",width:70,cellClassName:"compactcell",headerClassName:"compactcell",renderCell:function(e){return Object(J.jsxs)("div",{children:[Object(J.jsx)("input",{type:"file",name:"myfile"+e.id,id:"myfile"+e.id,onChange:Oe,className:r.inputbtn,"data-pid":e.id}),Object(J.jsx)("label",{htmlFor:"myfile"+e.id,children:Object(J.jsx)(y.a,{color:"primary","aria-label":"upload file",component:"span",children:Object(J.jsx)(jt.a,{})})})]})}},{field:"receipt",headerName:"View Attachment",width:70,cellClassName:"compactcell",headerClassName:"compactcell",renderCell:function(e){return e.value?Object(J.jsx)(dt.a,{size:"small",href:e.value,target:"_blank",rel:"noopener noreferrer",children:"Open"}):Object(J.jsx)("div",{})}}],fe=function(e){var t=parseInt(e.currentTarget.dataset.pid),n=i.find((function(e){return e.id==t})),r="Paid"==n.status?"UnPaid":"Paid",a=Object(d.a)(Object(d.a)({},n),{},{status:r});B.b.updateInvoice(h["mr-token"],t,a).then((function(e){if(200==e.status)return e.json();throw 400==e.status?JSON.stringify("Invalid data"):"Unknown reason. Please refresh"})).then((function(e){console.log(e),f("Status Changed Successfully"),ge()})).catch((function(e){console.log("api error"),console.error(e),alert("Something went wrong, "+String(e)),f("Something went wrong, "+String(e))})),console.log(e.target.value)},Oe=function(e){if(1==e.target.files.length){var t=e.target.files[0];console.log("file is: ",t);var n=parseInt(e.currentTarget.dataset.pid),r=new FormData;r.append("receipt",t),B.b.uploadReceipt(h["mr-token"],n,r).then((function(e){if(200==e.status)return e.json();throw 400==e.status?JSON.stringify(e.json()):"Unknown reason. Please refresh"})).then((function(e){console.log(e),alert("File Uploaded Successfully"),f("File Uploaded Successfully"),ge()})).catch((function(e){console.log("api error"),console.error(e),f("Something went wrong, "+String(e))}))}};Object(u.useEffect)((function(){e.setTitle("Invoices"),ge()}),[h,P]);var ge=function(){var e=Object(ce.a)(oe.a.mark((function e(){var t,n,r,a=arguments;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length>0&&void 0!==a[0]&&a[0])||0==P){e.next=4;break}return D(0),e.abrupt("return");case 4:return console.log("fetching details",P),t=x?new URLSearchParams({page:P+1,search:x}):new URLSearchParams({page:P+1}),e.prev=6,ie(!0),e.next=10,B.b.getInvoiceList(h["mr-token"],t);case 10:if(200!=(n=e.sent).status){e.next=18;break}return e.next=14,n.json();case 14:(r=e.sent).results&&(k!=r.count&&D(0),console.log("setting count",r.count),C(r.count),ie(!1),c(r.results)),e.next=23;break;case 18:if(401!=n.status){e.next=22;break}re.handleUnauthorized(),e.next=23;break;case 22:throw"Something went wrong";case 23:e.next=31;break;case 25:e.prev=25,e.t0=e.catch(6),console.log("api error"),console.error(e.t0),f("Something went wrong. Please refresh."),ie(!1);case 31:case"end":return e.stop()}}),e,null,[[6,25]])})));return function(){return e.apply(this,arguments)}}(),xe=function(e){W(!1)},ve=function(e){var t=parseInt(e.currentTarget.dataset.oid);q(t);var n=i.find((function(e){return e.id==t}));M(n.notes),W(!0)};return h["mr-token"]?Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",flexDirection:"column"},children:[""!=m&&Object(J.jsx)("div",{style:{color:"red"},children:m}),1==le&&Object(J.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"baseline",flexWrap:"wrap",flexDirection:"row",marginBottom:"8px"},children:[Object(J.jsxs)("div",{children:[Object(J.jsx)(pe.a,{variant:"outlined",size:"small",margin:"none",type:"text",value:x,className:r.searchInput,text:"Search",onChange:function(e){return v(e.target.value)},onKeyPress:function(e){return"Enter"==e.key&&ge(!0)}}),Object(J.jsx)(he.a,{color:"primary",variant:"contained",onClick:function(e){return ge(!0)},children:"Search"})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)(pe.a,(t={variant:"outlined",margin:"normal",label:"Start Date",name:"startDate",type:"date"},Object(s.a)(t,"margin","none"),Object(s.a)(t,"size","small"),Object(s.a)(t,"style",{marginRight:"4px"}),Object(s.a)(t,"value",G),Object(s.a)(t,"onChange",(function(e){return H(e.target.value)})),Object(s.a)(t,"InputLabelProps",{shrink:!0}),t)),Object(J.jsx)(pe.a,(n={variant:"outlined",margin:"normal",label:"End Date",name:"endtDate",type:"date"},Object(s.a)(n,"margin","none"),Object(s.a)(n,"size","small"),Object(s.a)(n,"style",{marginRight:"4px"}),Object(s.a)(n,"value",X),Object(s.a)(n,"onChange",(function(e){return $(e.target.value)})),Object(s.a)(n,"InputLabelProps",{shrink:!0}),n)),Object(J.jsx)(he.a,{color:"primary",variant:"contained",onClick:function(e){e.preventDefault(),console.log(G,X),Object(ce.a)(oe.a.mark((function e(){var t,n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.b.generateInvoices(h["mr-token"],{startDate:G,endDate:X});case 3:if(200==(t=e.sent).status){e.next=6;break}throw"invalid status ".concat(t.status," ").concat(t.statusText);case 6:return e.next=8,t.json();case 8:n=e.sent,f("".concat(n.count," invoices created "),String(n.errors)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("api error"),console.error(e.t0),f("Something went wrong. See logs in admin panel. Please refresh.");case 17:case"end":return e.stop()}}),e,null,[[0,12]])})))()},children:"Generate Invoices"})]}),Object(J.jsxs)(de.a,{open:L,maxWidth:"lg",fullWidth:!0,onClose:xe,children:[Object(J.jsx)(ue.a,{children:"Notes"}),Object(J.jsx)(Ze.a,{children:Object(J.jsx)(pe.a,{multiline:!0,value:A,text:"Notes",variant:"outlined",rows:4,fullWidth:!0,onChange:function(e){return M(e.target.value)}})}),Object(J.jsxs)(je.a,{children:[Object(J.jsx)(he.a,{onClick:xe,color:"primary",children:"Cancel"}),Object(J.jsx)(he.a,{onClick:function(e){var t=A,n=R,r=i.find((function(e){return e.id==n})),a=Object(d.a)(Object(d.a)({},r),{},{notes:t}),o=!1;B.b.updateInvoice(h["mr-token"],n,a).then((function(e){if(200==e.status)return e.json();if(400==e.status)return o=!0,e.json();throw"Unknown reason. Please refresh"})).then((function(e){if(o)throw JSON.stringify(e);console.log(e),f("Notes Updated Successfully"),ge()})).catch((function(e){console.log("api error"),console.error(e),f("Something went wrong, "+String(e))})),W(!1)},color:"primary",autoFocus:!0,children:"Save"})]})]})]}),Object(J.jsx)("div",{style:{width:"100%",minWidth:"600px",height:"calc(100vh - 110px)"},className:r.root,children:Object(J.jsx)(se.a,{rows:i,columns:be,components:{Toolbar:se.b},loading:ae,pagination:!0,page:P,pageSize:50,rowsPerPageOptions:[],rowCount:k,paginationMode:"server",onPageChange:function(e){D(e.page)},disableColumnMenu:!0})})]}):Object(J.jsx)(Q.a,{to:"/signin"})}var mt=function(e){var t=e.setTitle,n=e.usertype;return Object(J.jsxs)(Q.d,{children:[Object(J.jsx)(Q.b,{exact:!0,path:"/",render:function(e){return Object(J.jsx)("div",{children:"Welcome To SFM Dropshipping"})}}),2!=n&&Object(J.jsx)(Q.b,{exact:!0,path:"/dashboard",render:function(e){return Object(J.jsx)(lt,{setTitle:t,usertype:n})}}),Object(J.jsx)(Q.b,{exact:!0,path:"/products",render:function(e){return Object(J.jsx)(Pe,{setTitle:t,usertype:n})}}),2!=n&&Object(J.jsx)(Q.b,{exact:!0,path:"/stores",render:function(e){return Object(J.jsx)(Le,{setTitle:t,usertype:n})}}),0!=n&&Object(J.jsx)(Q.b,{exact:!0,path:"/purchases",render:function(e){return Object(J.jsx)(Ue,{setTitle:t})}}),0!=n&&Object(J.jsx)(Q.b,{exact:!0,path:"/inventory",render:function(e){return Object(J.jsx)(Re,{setTitle:t})}}),Object(J.jsx)(Q.b,{exact:!0,path:"/orders",render:function(e){return Object(J.jsx)(Ke,{setTitle:t,usertype:n})}}),0!=n&&Object(J.jsx)(Q.b,{exact:!0,path:"/printing",render:function(e){return Object(J.jsx)(ct,{setTitle:t,usertype:n})}}),Object(J.jsx)(Q.b,{exact:!0,path:"/accountdetails",render:function(e){return Object(J.jsx)(st,{setTitle:t,usertype:n})}}),2!=n&&Object(J.jsx)(Q.b,{exact:!0,path:"/invoices",render:function(e){return Object(J.jsx)(bt,{setTitle:t,usertype:n})}})]})};var ft=Object(p.a)((function(e){return{root:{display:"flex"},toolbar:{backgroundColor:"rgb(47,83,149)",paddingRight:24,paddingBottom:"5px",paddingTop:"10px"},toolbarIcon:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1,textAlign:"center"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(s.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto",padding:"5px"},container:{paddingTop:e.spacing(1),paddingBottom:e.spacing(0),paddingLeft:"0px",paddingRight:"0px"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Ot(){var e=ft(),t=j.a.useState(!0),n=Object(l.a)(t,2),r=n[0],a=n[1],o=j.a.useState("Home"),i=Object(l.a)(o,2),c=i[0],s=i[1],d=Object(ee.a)(["mr-token"]),u=Object(l.a)(d,1)[0],p=Object(ee.a)(["mr-user"]),w=Object(l.a)(p,1)[0],C=function(e){console.log("sign out clicked"),re.signout()};Object(h.a)(e.paper,e.fixedHeight);if(!u["mr-token"])return Object(J.jsx)(Q.a,{to:"/signin"});var T=0;if(w["mr-user"]){var D;try{D=parseInt(w["mr-user"].split("-")[1])}catch(F){console.log("unable to read user info from cookie"),C()}136==D?T=0:239==D?T=1:578==D?T=2:(console.log("invalid usertype from cookie"),C())}return Object(J.jsxs)("div",{className:e.root,children:[Object(J.jsx)(b.a,{}),Object(J.jsx)(f.a,{position:"absolute",className:Object(h.a)(e.appBar,r&&e.appBarShift),children:Object(J.jsxs)(O.a,{className:e.toolbar,children:[Object(J.jsx)(y.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){a(!0)},className:Object(h.a)(e.menuButton,r&&e.menuButtonHidden),children:Object(J.jsx)(k.a,{})}),Object(J.jsx)(x.a,{component:"h1",variant:"h4",color:"inherit",noWrap:!0,className:e.title,children:c}),Object(J.jsx)("img",{src:$.a,alt:"SFM logo",style:{width:"120px"}})]})}),Object(J.jsxs)(m.a,{variant:"permanent",classes:{paper:Object(h.a)(e.drawerPaper,!r&&e.drawerPaperClose)},open:r,children:[Object(J.jsx)("div",{className:e.toolbarIcon,children:Object(J.jsx)(y.a,{onClick:function(){a(!1)},children:Object(J.jsx)(N.a,{})})}),Object(J.jsx)(v.a,{}),0==T&&Object(J.jsx)(g.a,{children:Z}),1==T&&Object(J.jsx)(g.a,{children:H}),2==T&&Object(J.jsx)(g.a,{children:K}),Object(J.jsx)(v.a,{}),Object(J.jsxs)(z.a,{button:!0,component:G.b,to:"/accountDetails",children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(P.a,{})}),Object(J.jsx)(W.a,{primary:"My Account"})]}),Object(J.jsxs)(z.a,{button:!0,onClick:C,children:[Object(J.jsx)(L.a,{children:Object(J.jsx)(I.a,{color:"secondary"})}),Object(J.jsx)(W.a,{primary:"Sign Out"})]}),Object(J.jsx)(v.a,{}),1==T&&Object(J.jsx)(g.a,{children:X})]}),Object(J.jsxs)("main",{className:e.content,children:[Object(J.jsx)("div",{className:e.appBarSpacer}),Object(J.jsx)(S.a,{maxWidth:!1,className:e.container,children:Object(J.jsx)(mt,{setTitle:s,usertype:T})})]})]})}},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(62),a=n(60),o="https://sfm-dropshipping.herokuapp.com",i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,null,[{key:"getProductList",value:function(e){return fetch(o+"/api/products/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getProduct",value:function(e,t){return fetch(o+"/api/products/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addProduct",value:function(e,t){return fetch(o+"/api/products/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"updateProduct",value:function(e,t,n){return fetch(o+"/api/products/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(n)})}},{key:"deleteProduct",value:function(e,t){return fetch(o+"/api/products/"+t+"/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getStoreList",value:function(e){return fetch(o+"/api/stores/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getStore",value:function(e,t){return fetch(o+"/api/stores/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"updateStore",value:function(e,t,n){return fetch(o+"/api/stores/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(n)})}},{key:"getPurchasesList",value:function(e,t){return fetch(o+"/api/purchases/?"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getPurchase",value:function(e,t){return fetch(o+"/api/purchases/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addPurchase",value:function(e,t){return fetch(o+"/api/purchases/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"updatePurchase",value:function(e,t,n){return fetch(o+"/api/purchases/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(n)})}},{key:"deletePurchase",value:function(e,t){return fetch(o+"/api/purchases/"+t+"/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getInventoryList",value:function(e){return fetch(o+"/api/inventory/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getOrderList",value:function(e,t){return fetch(o+"/api/orders/?"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getPrintingList",value:function(e){return fetch(o+"/api/printing/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getOrder",value:function(e,t){return fetch(o+"/api/orders/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"addOrder",value:function(e,t){return fetch(o+"/api/orders/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"deleteOrder",value:function(e,t){return fetch(o+"/api/orders/"+t+"/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"updateOrder",value:function(e,t,n){return fetch(o+"/api/orders/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(n)})}},{key:"getInvoiceList",value:function(e,t){return fetch(o+"/api/invoices/?"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"getInvoice",value:function(e,t){return fetch(o+"/api/invoices/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"updateInvoice",value:function(e,t,n){return fetch(o+"/api/invoices/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(n)})}},{key:"uploadReceipt",value:function(e,t,n){return fetch(o+"/api/invoices/"+t+"/upload_receipt/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:n})}},{key:"generateInvoices",value:function(e,t){return fetch(o+"/api/invoices/generate_invoices/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"uploadOrdersFile",value:function(e,t){return fetch(o+"/api/orders/import_ordersfile/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadShippingFile",value:function(e,t){return fetch(o+"/api/orders/import_shippingfile/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadPurchasesFile",value:function(e,t){return fetch(o+"/api/purchases/import_file/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadProductsFile",value:function(e,t){return fetch(o+"/api/products/import_file/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"uploadInventoryFile",value:function(e,t){return fetch(o+"/api/inventory/import_file/",{method:"POST",headers:{Authorization:"Token ".concat(e)},body:t})}},{key:"getOverview",value:function(e,t){return fetch(o+"/api/orders/get_overview/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(t)})}},{key:"signinUser",value:function(e){return fetch(o+"/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}},{key:"getAccountDetails",value:function(e,t){return fetch(o+"/api/accounts/"+t+"/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}})}},{key:"updateProfile",value:function(e,t,n){return fetch(o+"/api/accounts/update_profile/"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(n)})}},{key:"changePassword",value:function(e,t,n){return fetch(o+"/api/accounts/change_password"+t+"/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},body:JSON.stringify(n)})}}]),e}()}}]);
//# sourceMappingURL=6.3ac297cb.chunk.js.map